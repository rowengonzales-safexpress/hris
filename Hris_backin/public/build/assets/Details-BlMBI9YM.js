import{_ as h}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as v}from"./CardBox-B8VuaoGy.js";import{_ as b}from"./BaseButton-YqB03AwT.js";import{a as D}from"./axios-ngrFHoWO.js";import{h as F}from"./html2pdf.js-p1DVm4cu.js";import{_ as B}from"./app-VaUb3FJr.js";import{Q as x,x as n,y as l,H as u,D as t,J as g,C as f,L as o,F as C,z as S}from"./@vue-DhfKueGL.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./@inertiajs-DE7H7qLl.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./html2canvas-CBrSDip1.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";const L={name:"FinanceDetailsPage",components:{SectionTitleLineWithButton:h,CardBox:v,BaseButton:b},props:{formdata:{type:Object,default:()=>({})}},data(){return{loading:!1,data:{form:{},items:[],liquidation:[],disbursement:null}}},watch:{formdata:{immediate:!0,async handler(i){if(i){this.loading=!0;try{const e=i.frms_id??i.id;let c=`/frls/reports/finance-detail/${e}`;try{typeof route=="function"&&(c=route("frls.reports.finance-detail",e))}catch{}const m=await D.get(c);m.data&&m.data.success&&(this.data=m.data)}catch{}finally{this.loading=!1}}}}},methods:{formatCurrency(i){return i?parseFloat(i).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatDate(i){return i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"}):"N/A"},getStatusText(i){return{P:"Pending",O:"Open",A:"Approved",C:"Closed",X:"Canceled",R:"Rejected",FA:"For Approval",FD:"For Disbursement",FL:"For Liquidation"}[i]||"Unknown"},closeDrawer(){this.$emit("triggerTopRightButton","lists")},downloadPDF(){const i=document.getElementById("exportPDF"),e=i.querySelector(".pdf-header");e&&e.classList.remove("hidden-on-screen");const c=`${this.data.form.frm_no||"FRM"}_${this.data.form.branch_name||"Branch"}.pdf`,m={margin:[10,10,10,10],filename:c,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};F().from(i).set(m).toPdf().get("pdf").then(s=>{const r=s.internal.getNumberOfPages();for(let d=1;d<=r;d++)s.setPage(d),s.setFontSize(10),s.text(`Page ${d} of ${r}`,s.internal.pageSize.getWidth()-30,s.internal.pageSize.getHeight()-10)}).output("bloburl").then(s=>{window.open(s,"_blank"),e&&e.classList.add("hidden-on-screen")})}}},q={id:"exportPDF"},P={key:0,class:"p-6"},k={key:1},w={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},R={class:"text-sm"},A={class:"text-sm"},T={class:"text-sm"},N={class:"text-sm"},j={class:"text-sm"},z={class:"text-sm"},E={class:"text-sm"},O={key:0},U={class:"text-sm"},V={key:1},W={class:"text-sm"},I={key:2},H={class:"text-sm"},M={class:"mt-4"},Q={class:"overflow-x-auto border rounded"},J={class:"min-w-full text-sm"},X={class:"px-2 py-1"},G={class:"px-2 py-1"},K={class:"px-2 py-1"},Y={class:"px-2 py-1"},Z={class:"px-2 py-1 text-right"},$={class:"px-2 py-1 text-right"},tt={class:"px-2 py-1 text-right"},et={class:"border-t"},st={class:"px-2 py-1 text-right font-bold"};function ot(i,e,c,m,s,r){const d=x("BaseButton"),_=x("SectionTitleLineWithButton"),y=x("CardBox");return l(),n("div",null,[u(_,{icon:"mdiReceiptText",title:"Disbursement Details",main:""},{default:g(()=>[t("div",null,[u(d,{class:"mr-2",onClick:e[0]||(e[0]=a=>i.$emit("triggerTopRightButton","lists")),icon:"mdiViewList",label:"Request Lists",color:"contrast","rounded-full":"",small:""}),u(d,{onClick:r.downloadPDF,icon:"mdiFile",label:"PDF",color:"danger","rounded-full":"",small:""},null,8,["onClick"])])]),_:1}),t("div",q,[u(y,{class:"mb-6"},{default:g(()=>[e[14]||(e[14]=t("div",{class:"pdf-header hidden-on-screen mb-6"},[t("div",{class:"flex justify-between items-center mb-4"},[t("div",{class:"text-left flex items-center"},[t("div",null,[t("h2",{class:"text-2xl font-bold leading-tight",style:{color:"#003399","font-family":"Arial, sans-serif"}}," Fund Request and "),t("h3",{class:"text-lg font-normal leading-tight",style:{color:"#4a6b9c","font-family":"Arial, sans-serif"}}," Liquidation System ")])]),t("img",{src:"/asset/logo.png",alt:"Logo",class:"h-20"})]),t("div",{class:"text-center"},[t("h1",{class:"text-2xl font-bold uppercase tracking-wide decoration-double underline"},"Disbursement Report")])],-1)),s.loading?(l(),n("div",P,"Loading...")):(l(),n("div",k,[t("div",w,[t("div",null,[e[1]||(e[1]=t("div",{class:"text-xs text-gray-500 uppercase"},"FRM No",-1)),t("div",R,o(s.data.form.frm_no),1)]),t("div",null,[e[2]||(e[2]=t("div",{class:"text-xs text-gray-500 uppercase"},"Purpose",-1)),t("div",A,o(s.data.form.purpose),1)]),t("div",null,[e[3]||(e[3]=t("div",{class:"text-xs text-gray-500 uppercase"},"Request Date",-1)),t("div",T,o(r.formatDate(s.data.form.request_date)),1)]),t("div",null,[e[4]||(e[4]=t("div",{class:"text-xs text-gray-500 uppercase"},"Site",-1)),t("div",N,o(s.data.form.branch_name),1)]),t("div",null,[e[5]||(e[5]=t("div",{class:"text-xs text-gray-500 uppercase"},"Expected Liquidation",-1)),t("div",j,o(r.formatDate(s.data.form.expectedliquidation_date)),1)]),t("div",null,[e[6]||(e[6]=t("div",{class:"text-xs text-gray-500 uppercase"},"Status",-1)),t("div",z,o(r.getStatusText(s.data.form.status_request)),1)]),t("div",null,[e[7]||(e[7]=t("div",{class:"text-xs text-gray-500 uppercase"},"Employee",-1)),t("div",E,o(s.data.form.employee_name),1)]),s.data.disbursement?(l(),n("div",O,[e[8]||(e[8]=t("div",{class:"text-xs text-gray-500 uppercase"},"Disbursement No",-1)),t("div",U,o(s.data.disbursement.disbursement_no),1)])):f("",!0),s.data.disbursement?(l(),n("div",V,[e[9]||(e[9]=t("div",{class:"text-xs text-gray-500 uppercase"},"Disbursement Date",-1)),t("div",W,o(r.formatDate(s.data.disbursement.actual_liquidation_date)),1)])):f("",!0),s.data.disbursement?(l(),n("div",I,[e[10]||(e[10]=t("div",{class:"text-xs text-gray-500 uppercase"},"Disbursement Status",-1)),t("div",H,o(r.getStatusText(s.data.disbursement.status)),1)])):f("",!0)]),t("div",M,[e[13]||(e[13]=t("div",{class:"text-xs text-gray-500 uppercase mb-2"},"Items",-1)),t("div",Q,[t("table",J,[e[12]||(e[12]=t("thead",{class:"bg-info"},[t("tr",null,[t("th",{class:"px-2 py-1 text-left"},"No."),t("th",{class:"px-2 py-1 text-left"},"Account Code"),t("th",{class:"px-2 py-1 text-left"},"Frequency"),t("th",{class:"px-2 py-1 text-left"},"Description"),t("th",{class:"px-2 py-1 text-right"},"Qty"),t("th",{class:"px-2 py-1 text-right"},"Unit Price"),t("th",{class:"px-2 py-1 text-right"},"Amount")])],-1)),t("tbody",null,[(l(!0),n(C,null,S(s.data.items,(a,p)=>(l(),n("tr",{key:p,class:"border-t even:bg-gray-50 dark:even:bg-slate-800"},[t("td",X,o(p+1),1),t("td",G,o(a.account_code_title),1),t("td",K,o(a.frequency_label),1),t("td",Y,o(a.description),1),t("td",Z,o(a.qty),1),t("td",$,o(r.formatCurrency(a.unit_price)),1),t("td",tt,o(r.formatCurrency(a.amount)),1)]))),128))]),t("tfoot",null,[t("tr",et,[e[11]||(e[11]=t("td",{colspan:"6",class:"px-2 py-1 text-right font-semibold"},"Total Amount:",-1)),t("td",st,"â‚±"+o(r.formatCurrency(s.data.items.reduce((a,p)=>a+(parseFloat(p.amount)||0),0))),1)])])])])])]))]),_:1})])])}const Ht=B(L,[["render",ot],["__scopeId","data-v-7b8b530b"]]);export{Ht as default};
