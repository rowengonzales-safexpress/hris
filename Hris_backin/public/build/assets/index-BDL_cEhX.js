import{a as X,h as J}from"./@inertiajs-DE7H7qLl.js";import{_ as Z}from"./SessionIdle.vue_vue_type_script_setup_true_lang-0Er72HTu.js";import{A as tt,a as et}from"./AdminPanelNavbar-Bdvrohd_.js";import{_ as st}from"./Footer-D5LPszYR.js";import{d as at,r as w,b as A,o as B,x as y,y as h,H as D,D as t,I as G,S as ot,B as z,w as E,C,M as T,L as u,F as I,z as Y,J as lt}from"./@vue-DhfKueGL.js";import{_ as nt}from"./app-VaUb3FJr.js";import{a as j}from"./axios-ngrFHoWO.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./FormField-Cnx0pd2b.js";import"./FormControl-C_nPUmK8.js";import"./pinia-DPcN--oA.js";import"./BaseButton-YqB03AwT.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";const rt={class:"min-h-screen bg-backgroundPrimary dark:bg-backgroundPrimary"},it={class:"flex-1 p-6 overflow-auto"},dt=at({__name:"SqdcmLayout",setup(k){const _=w(!1),i=w(!1),p=X();A(()=>{var a;return(a=p.props.auth)==null?void 0:a.user}),A(()=>p.props.userMenus||[]);const r=()=>{i.value=!i.value},e=()=>{_.value=!_.value},s=()=>{_.value=!1};return B(()=>{const a=document.querySelector(".admin-sidebar");a&&a.classList.add("animate-slide-in")}),(a,v)=>{var d;return h(),y("div",rt,[D(Z,{lifetime:Number(((d=G(p).props.session)==null?void 0:d.lifetime)??15),"warning-seconds":30},null,8,["lifetime"]),D(tt,{"sidebar-open":_.value,"sidebar-collapsed":i.value,title:"SQDCM",subtitle:"Safety, Quality, Delivery, Cost, and Morale.","home-route":a.route("sqdcm.dashboard"),onToggleSidebar:r,onCloseSidebar:s,class:"admin-sidebar"},null,8,["sidebar-open","sidebar-collapsed","home-route"]),t("div",{class:z(["transition-all duration-300 ease-in-out",i.value?"lg:ml-20":"lg:ml-72"])},[D(et,{"sidebar-collapsed":i.value,onToggleMobileSidebar:e,onToggleCollapse:r},null,8,["sidebar-collapsed"]),t("main",it,[ot(a.$slots,"default",{},void 0,!0)]),D(st)],2)])}}}),ct=nt(dt,[["__scopeId","data-v-eaf6b3df"]]),ut={class:"w-full"},pt={__name:"KpiUtilizationChart",props:{data:{type:Array,default:()=>[]}},setup(k){const _=k,i=w(null),p=()=>{if(!i.value)return;i.value.innerHTML="";const r=document.createElement("canvas");r.width=500,r.height=300,i.value.appendChild(r);const e=r.getContext("2d"),s=_.data;if(!s||s.length===0){e.fillStyle="#9CA3AF",e.font="16px Arial",e.textAlign="center",e.fillText("No data available",r.width/2,r.height/2);return}const a=60,v=r.width-a*2,d=r.height-a*2,f=Math.max(100,Math.max(...s.map(x=>x.utilization)));e.strokeStyle="#F3F4F6",e.lineWidth=1;for(let x=0;x<=5;x++){const b=a+d/5*x;e.beginPath(),e.moveTo(a,b),e.lineTo(a+v,b),e.stroke();const m=f-f/5*x;e.fillStyle="#6B7280",e.font="12px Arial",e.textAlign="right",e.fillText(Math.round(m)+"%",a-10,b+4)}if(e.strokeStyle="#374151",e.lineWidth=2,e.beginPath(),e.moveTo(a,a),e.lineTo(a,a+d),e.moveTo(a,a+d),e.lineTo(a+v,a+d),e.stroke(),s.length===1){const x=a+v/2,b=a+d-s[0].utilization/f*d;e.fillStyle="#10B981",e.beginPath(),e.arc(x,b,6,0,2*Math.PI),e.fill(),e.fillStyle="#374151",e.font="12px Arial",e.textAlign="center",e.fillText(s[0].date,x,a+d+20);return}const g=v/(s.length-1);e.strokeStyle="#10B981",e.lineWidth=3,e.beginPath(),s.forEach((x,b)=>{const m=a+g*b,o=a+d-x.utilization/f*d;b===0?e.moveTo(m,o):e.lineTo(m,o)}),e.stroke(),s.forEach((x,b)=>{const m=a+g*b,o=a+d-x.utilization/f*d;e.fillStyle="#10B981",e.beginPath(),e.arc(m,o,4,0,2*Math.PI),e.fill(),e.strokeStyle="#FFFFFF",e.lineWidth=2,e.beginPath(),e.arc(m,o,4,0,2*Math.PI),e.stroke(),e.fillStyle="#6B7280",e.font="11px Arial",e.textAlign="center";const n=new Date(x.date).toLocaleDateString("en-US",{month:"short",day:"numeric"});e.fillText(n,m,a+d+20),e.fillStyle="#374151",e.font="10px Arial",e.textAlign="center",e.fillText(Math.round(x.utilization)+"%",m,o-10)}),e.fillStyle="#1F2937",e.font="bold 14px Arial",e.textAlign="left",e.fillText("3 Months Perspective",a,25)};return E(()=>_.data,()=>{p()},{deep:!0}),B(()=>{p()}),(r,e)=>(h(),y("div",ut,[t("div",{ref_key:"chartContainer",ref:i,class:"flex justify-center items-center min-h-[300px]"},null,512)]))}},mt={class:"w-full"},gt={__name:"KpiStandingChart",props:{data:{type:Array,default:()=>[]}},setup(k){const _=k,i=w(null),p=()=>{if(!i.value)return;i.value.innerHTML="";const r=_.data||[];if(r.length===0){const n=document.createElement("div");n.className="text-gray-500 text-sm text-center py-8",n.textContent="No data available",i.value.appendChild(n);return}const e=document.createElement("canvas");e.width=600,e.height=350,e.className="w-full h-auto",i.value.appendChild(e);const s=e.getContext("2d"),a=80,v=e.width-a*2,d=e.height-a*2;s.fillStyle="#374151",s.font="bold 16px Arial",s.textAlign="left",s.fillText("KPI Standing",a,30),s.font="12px Arial",s.fillStyle="#6B7280",s.fillText("HIT vs MISS Per Week",a,50);const f=Math.max(...r.map(n=>Math.max(n.hit||0,n.miss||0))),g=Math.ceil(f*1.1),b=v/r.length*.8/2*.8,m=v/r.length*.2;s.strokeStyle="#F3F4F6",s.lineWidth=.5;for(let n=0;n<=5;n++){const S=a+d/5*n;s.beginPath(),s.moveTo(a,S),s.lineTo(a+v,S),s.stroke();const $=g-g/5*n;s.fillStyle="#6B7280",s.font="12px Arial",s.textAlign="right",s.fillText(Math.round($),a-10,S+4)}s.strokeStyle="#374151",s.lineWidth=2,s.beginPath(),s.moveTo(a,a),s.lineTo(a,a+d),s.moveTo(a,a+d),s.lineTo(a+v,a+d),s.stroke(),r.forEach((n,S)=>{const $=a+v/r.length*S+m/2,M=(n.hit||0)/g*d,P=a+d-M;s.fillStyle="#10B981",s.fillRect($,P,b,M);const F=(n.miss||0)/g*d,c=a+d-F;s.fillStyle="#EF4444",s.fillRect($+b+5,c,b,F),s.fillStyle="#374151",s.font="12px Arial",s.textAlign="center";const l=$+b+2.5;s.fillText(n.category||`W${S+1}`,l,a+d+20),s.fillStyle="#FFFFFF",s.font="bold 10px Arial",s.textAlign="center",M>20&&s.fillText(n.hit||0,$+b/2,P+M/2+3),F>20&&s.fillText(n.miss||0,$+b+5+b/2,c+F/2+3)});const o=a+d+45;s.fillStyle="#10B981",s.fillRect(a,o,15,15),s.fillStyle="#374151",s.font="12px Arial",s.textAlign="left",s.fillText("HIT",a+20,o+12),s.fillStyle="#EF4444",s.fillRect(a+80,o,15,15),s.fillStyle="#374151",s.fillText("MISS",a+105,o+12)};return B(()=>{p()}),E(()=>_.data,()=>{p()},{deep:!0}),(r,e)=>(h(),y("div",mt,[t("div",{ref_key:"chartContainer",ref:i,class:"flex justify-center items-center min-h-[350px]"},null,512)]))}},xt={class:"bg-white rounded-lg shadow"},vt={key:0,class:"p-6 text-center"},ft={key:1,class:"p-6 text-center text-gray-500"},yt={key:2,class:"overflow-x-auto"},ht={class:"min-w-full divide-y divide-gray-200"},bt={class:"bg-gray-50"},_t={key:0,class:"ml-1"},wt={key:0,class:"ml-1"},kt={key:0,class:"ml-1"},St={key:0,class:"ml-1"},$t={key:0,class:"ml-1"},Ct={key:0,class:"ml-1"},Dt={key:0,class:"ml-1"},At={key:0,class:"ml-1"},Tt={key:0,class:"ml-1"},Mt={class:"bg-white divide-y divide-gray-200"},Pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},jt={class:"px-6 py-4 whitespace-nowrap"},It={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ht={class:"px-6 py-4 whitespace-nowrap"},Wt={key:0,class:"px-6 py-3 border-t border-gray-200 bg-gray-50"},Nt={class:"flex items-center justify-between"},Vt={class:"text-sm text-gray-700"},Kt={class:"flex space-x-2"},Rt=["disabled"],qt={class:"px-3 py-1 text-sm text-gray-700"},Ot=["disabled"],Ut={__name:"AttendancePerformanceTable",props:{data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(k){const _=k,i=w("date"),p=w("desc"),r=w(1),e=w(10),s=A(()=>_.data.length?[..._.data].sort((o,n)=>{let S=o[i.value],$=n[i.value];return i.value==="date"&&(S=new Date(S),$=new Date($)),typeof S=="string"&&(S=S.toLowerCase(),$=$.toLowerCase()),p.value==="asc"?S>$?1:-1:S<$?1:-1}):[]),a=A(()=>{const m=(r.value-1)*e.value,o=m+e.value;return s.value.slice(m,o)}),v=A(()=>Math.ceil(s.value.length/e.value)),d=m=>{i.value===m?p.value=p.value==="asc"?"desc":"asc":(i.value=m,p.value="asc")},f=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=m=>`${Math.round(m)}%`,x=m=>m>=90?"text-green-600 bg-green-100":m>=75?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",b=m=>m>=95?"text-green-600 bg-green-100":m>=85?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return(m,o)=>(h(),y("div",xt,[o[21]||(o[21]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Attendance & Performance Details")],-1)),k.loading?(h(),y("div",vt,[...o[11]||(o[11]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-500"},"Loading data...",-1)])])):k.data.length?(h(),y("div",yt,[t("table",ht,[t("thead",bt,[t("tr",null,[t("th",{onClick:o[0]||(o[0]=n=>d("date")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[o[12]||(o[12]=T(" Date ",-1)),i.value==="date"?(h(),y("span",_t,u(p.value==="asc"?"↑":"↓"),1)):C("",!0)]),t("th",{onClick:o[1]||(o[1]=n=>d("site_code")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[o[13]||(o[13]=T(" Site ",-1)),i.value==="site_code"?(h(),y("span",wt,u(p.value==="asc"?"↑":"↓"),1)):C("",!0)]),t("th",{onClick:o[2]||(o[2]=n=>d("department_code")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[o[14]||(o[14]=T(" Department ",-1)),i.value==="department_code"?(h(),y("span",kt,u(p.value==="asc"?"↑":"↓"),1)):C("",!0)]),t("th",{onClick:o[3]||(o[3]=n=>d("total_employees")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[o[15]||(o[15]=T(" Total Emp ",-1)),i.value==="total_employees"?(h(),y("span",St,u(p.value==="asc"?"↑":"↓"),1)):C("",!0)]),t("th",{onClick:o[4]||(o[4]=n=>d("present_employees")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[o[16]||(o[16]=T(" Present ",-1)),i.value==="present_employees"?(h(),y("span",$t,u(p.value==="asc"?"↑":"↓"),1)):C("",!0)]),t("th",{onClick:o[5]||(o[5]=n=>d("attendance_perc")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[o[17]||(o[17]=T(" Attendance % ",-1)),i.value==="attendance_perc"?(h(),y("span",Ct,u(p.value==="asc"?"↑":"↓"),1)):C("",!0)]),t("th",{onClick:o[6]||(o[6]=n=>d("performance_perc")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[o[18]||(o[18]=T(" Performance % ",-1)),i.value==="performance_perc"?(h(),y("span",Dt,u(p.value==="asc"?"↑":"↓"),1)):C("",!0)]),t("th",{onClick:o[7]||(o[7]=n=>d("overall_score")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[o[19]||(o[19]=T(" Score ",-1)),i.value==="overall_score"?(h(),y("span",At,u(p.value==="asc"?"↑":"↓"),1)):C("",!0)]),t("th",{onClick:o[8]||(o[8]=n=>d("grade")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"},[o[20]||(o[20]=T(" Grade ",-1)),i.value==="grade"?(h(),y("span",Tt,u(p.value==="asc"?"↑":"↓"),1)):C("",!0)])])]),t("tbody",Mt,[(h(!0),y(I,null,Y(a.value,n=>(h(),y("tr",{key:`${n.date}-${n.site_code}-${n.department_code}`,class:"hover:bg-gray-50"},[t("td",Pt,u(f(n.date)),1),t("td",Ft,u(n.site_code),1),t("td",Et,u(n.department_code),1),t("td",zt,u(n.total_employees),1),t("td",Bt,u(n.present_employees),1),t("td",jt,[t("span",{class:z(`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(n.attendance_perc)}`)},u(g(n.attendance_perc)),3)]),t("td",It,[t("span",{class:z(`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x(n.performance_perc)}`)},u(g(n.performance_perc)),3)]),t("td",Lt,u(Math.round(n.overall_score)),1),t("td",Ht,[t("span",{class:z(`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${n.grade==="A"?"text-green-600 bg-green-100":n.grade==="B"?"text-blue-600 bg-blue-100":n.grade==="C"?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"}`)},u(n.grade),3)])]))),128))])]),v.value>1?(h(),y("div",Wt,[t("div",Nt,[t("div",Vt," Showing "+u((r.value-1)*e.value+1)+" to "+u(Math.min(r.value*e.value,s.value.length))+" of "+u(s.value.length)+" results ",1),t("div",Kt,[t("button",{onClick:o[9]||(o[9]=n=>r.value=Math.max(1,r.value-1)),disabled:r.value===1,class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Rt),t("span",qt," Page "+u(r.value)+" of "+u(v.value),1),t("button",{onClick:o[10]||(o[10]=n=>r.value=Math.min(v.value,r.value+1)),disabled:r.value===v.value,class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Ot)])])])):C("",!0)])):(h(),y("div",ft," No data available "))]))}},Qt={class:"relative"},Gt=["value"],Yt=["value"],Xt={__name:"SiteSelector",props:{sites:{type:Array,default:()=>[]},selected:{type:String,default:""}},emits:["change"],setup(k,{emit:_}){const i=k,p=_,r=w(i.selected);E(()=>i.selected,s=>{r.value=s});const e=s=>{r.value=s.target.value,p("change",s.target.value)};return(s,a)=>(h(),y("div",Qt,[a[1]||(a[1]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Site",-1)),t("select",{value:r.value,onChange:e,class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[a[0]||(a[0]=t("option",{value:""},"All Sites",-1)),(h(!0),y(I,null,Y(k.sites,v=>(h(),y("option",{key:v.site_code,value:v.site_code},u(v.site_name)+" ("+u(v.site_code)+") ",9,Yt))),128))],40,Gt)]))}},Jt={class:"flex flex-col space-y-2"},Zt={class:"flex space-x-2"},te=["value"],ee=["value"],se={class:"flex space-x-2"},ae={__name:"DateRangePicker",props:{startDate:{type:String,default:""},endDate:{type:String,default:""}},emits:["change"],setup(k,{emit:_}){const i=k,p=_,r=w(i.startDate),e=w(i.endDate);E(()=>i.startDate,f=>{r.value=f}),E(()=>i.endDate,f=>{e.value=f});const s=f=>{r.value=f.target.value,v()},a=f=>{e.value=f.target.value,v()},v=()=>{p("change",{start:r.value,end:e.value})},d=f=>{const g=new Date,x=new Date(g.getTime()-f*24*60*60*1e3);r.value=x.toISOString().split("T")[0],e.value=g.toISOString().split("T")[0],v()};return(f,g)=>(h(),y("div",Jt,[g[4]||(g[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date Range",-1)),t("div",Zt,[t("input",{type:"date",value:r.value,onChange:s,class:"block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Start Date"},null,40,te),g[3]||(g[3]=t("span",{class:"flex items-center text-gray-500"},"to",-1)),t("input",{type:"date",value:e.value,onChange:a,class:"block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"End Date"},null,40,ee)]),t("div",se,[t("button",{onClick:g[0]||(g[0]=x=>d(7)),class:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700"}," Last 7 days "),t("button",{onClick:g[1]||(g[1]=x=>d(30)),class:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700"}," Last 30 days "),t("button",{onClick:g[2]||(g[2]=x=>d(90)),class:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700"}," Last 90 days ")])]))}},oe={class:"space-y-6"},le={class:"flex justify-between items-center"},ne={class:"flex space-x-4"},re={key:0,class:"flex justify-center items-center py-8"},ie={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},de={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500"},ce={class:"flex items-center"},ue={class:"flex-1"},pe={class:"text-3xl font-bold text-blue-600"},me={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500"},ge={class:"flex items-center"},xe={class:"flex-1"},ve={class:"text-3xl font-bold text-green-600"},fe={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500"},ye={class:"flex items-center"},he={class:"flex-1"},be={class:"text-3xl font-bold text-purple-600"},_e={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-orange-500"},we={class:"flex items-center"},ke={class:"flex-1"},Se={class:"text-3xl font-bold text-orange-600"},$e={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ce={class:"bg-white rounded-xl shadow-lg p-6"},De={class:"bg-white rounded-xl shadow-lg p-6"},Ae={class:"grid grid-cols-1 gap-6"},Te={class:"bg-white rounded-xl shadow-lg p-6"},Me={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Pe={class:"bg-white rounded-xl shadow-lg p-6"},Fe={class:"space-y-2"},Ee={class:"flex justify-between"},ze={class:"text-sm font-medium"},Be={class:"flex justify-between"},je={class:"text-sm font-medium"},Ie={class:"flex justify-between"},Le={class:"text-sm font-medium"},He={class:"bg-white rounded-xl shadow-lg p-6"},We={class:"space-y-2"},Ne={class:"flex justify-between"},Ve={class:"text-sm font-medium"},Ke={class:"flex justify-between"},Re={class:"text-sm font-medium"},qe={class:"flex justify-between"},Oe={class:"text-sm font-medium"},Ue={class:"bg-white rounded-xl shadow-lg p-6"},Qe={class:"space-y-2"},Ge={class:"flex justify-between"},Ye={class:"text-sm font-medium"},Xe={class:"flex justify-between"},Je={class:"text-sm font-medium"},Ze={class:"flex justify-between"},ts={class:"text-sm font-medium"},Us={__name:"index",props:{sites:{type:Array,default:()=>[]}},setup(k){const _=k,i=w(!1),p=w(""),r=w(""),e=w(""),s=w({}),a=w([]),v=w([]),d=A(()=>{var c;return((c=s.value)==null?void 0:c.kpi_utilization)||0}),f=A(()=>{var c;return((c=s.value)==null?void 0:c.total_entries)||{}}),g=A(()=>{var c;return((c=s.value)==null?void 0:c.attendance_summary)||{}}),x=A(()=>{var c;return((c=s.value)==null?void 0:c.performance_summary)||{}}),b=A(()=>{var c;return((c=s.value)==null?void 0:c.kpi_utilization_chart)||[]}),m=A(()=>{var c;return((c=s.value)==null?void 0:c.kpi_standing_chart)||[]}),o=async()=>{i.value=!0;try{const c={site_code:p.value,start_date:r.value,end_date:e.value},l=await j.get("sqdcm/api/dashboard",{params:c});s.value=l.data.data}catch(c){console.error("Error fetching dashboard data:",c)}finally{i.value=!1}},n=async()=>{try{const c={site_code:p.value,start_date:r.value,end_date:e.value,level:"site"},l=await j.get("sqdcm/api/attendance-performance",{params:c});a.value=l.data.data}catch(c){console.error("Error fetching attendance data:",c)}},S=async()=>{try{const c={site_code:p.value,start_date:r.value,end_date:e.value},l=await j.get("sqdcm/api/kpi-values",{params:c});v.value=l.data.data}catch(c){console.error("Error fetching KPI data:",c)}},$=c=>{p.value=c,P()},M=c=>{r.value=c.start,e.value=c.end,P()},P=()=>{o(),n(),S()},F=()=>{const c=new Date,l=new Date(c.getTime()-30*24*60*60*1e3);e.value=c.toISOString().split("T")[0],r.value=l.toISOString().split("T")[0]};return B(()=>{F(),_.sites.length>0&&(p.value=_.sites[0].site_code),P()}),(c,l)=>(h(),y(I,null,[D(G(J),{title:"SQDCM Dashboard"}),D(ct,null,{default:lt(()=>{var L,H,W,N,V,K,R,q,O,U,Q;return[t("div",oe,[t("div",le,[l[0]||(l[0]=t("h1",{class:"text-3xl font-bold text-gray-900"},"SQDCM Dashboard",-1)),t("div",ne,[D(Xt,{sites:k.sites,selected:p.value,onChange:$},null,8,["sites","selected"]),D(ae,{"start-date":r.value,"end-date":e.value,onChange:M},null,8,["start-date","end-date"])])]),i.value?(h(),y("div",re,[...l[1]||(l[1]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):C("",!0),t("div",ie,[t("div",de,[t("div",ce,[t("div",ue,[l[2]||(l[2]=t("p",{class:"text-sm font-medium text-gray-600"},"KPI Utilization",-1)),t("p",pe,u(d.value)+"%",1)]),l[3]||(l[3]=t("div",{class:"p-3 bg-blue-100 rounded-full"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1))])]),t("div",me,[t("div",ge,[t("div",xe,[l[4]||(l[4]=t("p",{class:"text-sm font-medium text-gray-600"},"Average Attendance",-1)),t("p",ve,u(((L=g.value)==null?void 0:L.average_attendance)||0)+"%",1)]),l[5]||(l[5]=t("div",{class:"p-3 bg-green-100 rounded-full"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])]),t("div",fe,[t("div",ye,[t("div",he,[l[6]||(l[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Average Performance",-1)),t("p",be,u(((H=x.value)==null?void 0:H.average_performance)||0)+"%",1)]),l[7]||(l[7]=t("div",{class:"p-3 bg-purple-100 rounded-full"},[t("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1))])]),t("div",_e,[t("div",we,[t("div",ke,[l[8]||(l[8]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Entries",-1)),t("p",Se,u(f.value.total||0),1)]),l[9]||(l[9]=t("div",{class:"p-3 bg-orange-100 rounded-full"},[t("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])])]),t("div",$e,[t("div",Ce,[l[10]||(l[10]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"KPI Utilization Trend",-1)),D(pt,{data:b.value},null,8,["data"])]),t("div",De,[l[11]||(l[11]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"KPI Standing by Category",-1)),D(gt,{data:m.value},null,8,["data"])])]),t("div",Ae,[t("div",Te,[l[12]||(l[12]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Attendance & Performance Overview",-1)),D(Ut,{data:a.value},null,8,["data"])])]),t("div",Me,[t("div",Pe,[l[16]||(l[16]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Attendance Statistics",-1)),t("div",Fe,[t("div",Ee,[l[13]||(l[13]=t("span",{class:"text-sm text-gray-600"},"Max Attendance:",-1)),t("span",ze,u(((W=g.value)==null?void 0:W.max_attendance)||0)+"%",1)]),t("div",Be,[l[14]||(l[14]=t("span",{class:"text-sm text-gray-600"},"Min Attendance:",-1)),t("span",je,u(((N=g.value)==null?void 0:N.min_attendance)||0)+"%",1)]),t("div",Ie,[l[15]||(l[15]=t("span",{class:"text-sm text-gray-600"},"Avg Present Employees:",-1)),t("span",Le,u(((V=g.value)==null?void 0:V.average_present_employees)||0),1)])])]),t("div",He,[l[20]||(l[20]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Performance Statistics",-1)),t("div",We,[t("div",Ne,[l[17]||(l[17]=t("span",{class:"text-sm text-gray-600"},"Max Performance:",-1)),t("span",Ve,u(((K=x.value)==null?void 0:K.max_performance)||0)+"%",1)]),t("div",Ke,[l[18]||(l[18]=t("span",{class:"text-sm text-gray-600"},"Min Performance:",-1)),t("span",Re,u(((R=x.value)==null?void 0:R.min_performance)||0)+"%",1)]),t("div",qe,[l[19]||(l[19]=t("span",{class:"text-sm text-gray-600"},"Overall Achievement:",-1)),t("span",Oe,u(((q=x.value)==null?void 0:q.overall_achievement)||0)+"%",1)])])]),t("div",Ue,[l[24]||(l[24]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Entry Breakdown",-1)),t("div",Qe,[t("div",Ge,[l[21]||(l[21]=t("span",{class:"text-sm text-gray-600"},"Site Entries:",-1)),t("span",Ye,u(((O=f.value)==null?void 0:O.site_entries)||0),1)]),t("div",Xe,[l[22]||(l[22]=t("span",{class:"text-sm text-gray-600"},"Department Entries:",-1)),t("span",Je,u(((U=f.value)==null?void 0:U.department_entries)||0),1)]),t("div",Ze,[l[23]||(l[23]=t("span",{class:"text-sm text-gray-600"},"Employee Entries:",-1)),t("span",ts,u(((Q=f.value)==null?void 0:Q.employee_entries)||0),1)])])])])])]}),_:1})],64))}};export{Us as default};
