import{r as $}from"./@inertiajs-DE7H7qLl.js";import{_ as B}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as p}from"./BaseButton-YqB03AwT.js";import{_ as N}from"./CardBox-B8VuaoGy.js";import{_ as S}from"./AsideDrawer-DLoyHTrP.js";import{_ as f}from"./FormField-Cnx0pd2b.js";import{_ as c}from"./FormControl-C_nPUmK8.js";import{_ as y}from"./BaseButtons--tE85GFf.js";import{_ as T}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import{s as U}from"./service-CLgXUwp_.js";import{_ as E}from"./SwalConfirm.vue_vue_type_script_setup_true_lang-DKkGdSL9.js";import{a as O}from"./axios-ngrFHoWO.js";import{r as i,b as H,x,y as n,H as a,J as s,K as _,D as M,B as X,L as h,C,F as z}from"./@vue-DhfKueGL.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./app-VaUb3FJr.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./moment-T1pcntrQ.js";/* empty css                                              */import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";const I={key:1,class:"text-gray-500"},Xe={__name:"List",props:{masterlist:{type:Array,default:()=>[]}},emits:["triggerTopRightButton"],setup(w,{emit:g}){let A=U();const V=w,v=g,m=i(!1),u=i(V.masterlist??[]),r=i(!1),o=i({}),q=H(()=>{const l=o.value.status_request;switch(l){case"FA":return"Approved";case"FD":return"Disbursement";case"FL":return"Liquidation";case"A":return"Approved";case"C":return"Closed";case"X":return"Canceled";default:return l}}),k=l=>{o.value=l,r.value=!0},F=l=>{r.value=!1,v("triggerTopRightButton",l,o.value)},D=async()=>{if(!o.value.id){r.value=!1;return}m.value=!0;try{await O.delete(`/frls/form/destroy/${o.value.id}`),u.value=(u.value||[]).filter(l=>l.id!==o.value.id),r.value=!1,A.success("Form record successfully deleted!"),await b()}finally{m.value=!1}},d=i(!1),R=()=>{d.value=!0,r.value=!1},L=()=>{d.value=!1},P=[{label:"Requestno",fieldName:"frm_no",type:"link"},{label:"Request Date",fieldName:"request_date",type:"date"},{label:"Expected Liquidation",fieldName:"expectedliquidation_date",type:"date"},{label:"Status",fieldName:"status_request",type:"slot"}],b=async()=>{m.value=!0;try{await $.visit(route("frls.form.index"),{preserveScroll:!0,replace:!0,onSuccess:l=>{var t;u.value=((t=l==null?void 0:l.props)==null?void 0:t.masterlist)??[]}})}finally{m.value=!1}};return(l,t)=>(n(),x(z,null,[a(B,{icon:"mdiListBox",title:"Fund Requests",main:""},{default:s(()=>[a(p,{onClick:t[0]||(t[0]=e=>v("triggerTopRightButton","Add")),icon:"mdiFileDocumentPlus",label:"Add Request",color:"contrast","rounded-full":"",small:""})]),_:1}),a(N,{class:"flex-1 p-6","has-table":""},{default:s(()=>[u.value.length>0?(n(),_(T,{key:0,"table-rows":u.value,"table-header":P,"table-name":"fundrequests","searchable-fields":"frm_no,request_date,expectedliquidation_date,status_request","is-paginated":!0,onOpenLink:k},{"table-action":s(()=>[a(y,null,{default:s(()=>[a(p,{icon:"mdiCloudDownloadOutline",title:"Retrieve Records",color:"whiteDark",onClick:b})]),_:1})]),"row-action":s(e=>[M("span",{class:X({"text-yellow-500":e.slotProp.status_request==="FA","text-blue-500":e.slotProp.status_request==="FD","text-red-500":e.slotProp.status_request==="FL","text-green-500":e.slotProp.status_request==="A"})},h(e.slotProp.status_request==="FA"?"Approval":e.slotProp.status_request==="FD"?"Disbursement":e.slotProp.status_request==="FL"?"Liquidation":e.slotProp.status_request==="A"?"Approved":e.slotProp.status_request==="C"?"Close":e.slotProp.status_request==="X"?"Cancel":e.slotProp.status_request==="FR"?"Review":e.slotProp.status_request),3)]),_:1},8,["table-rows"])):(n(),x("div",I,"Click Add Request button to create your first record"))]),_:1}),a(S,{title:"Request Info","is-open":r.value,onCloseDrawer:t[6]||(t[6]=e=>r.value=!1),class:"shadow-lg shadow-blue-500/50"},{default:s(()=>[a(f,{label:"Request No"},{default:s(()=>[a(c,{modelValue:o.value.frm_no,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.frm_no=e),name:"frm_no",disabled:!0},null,8,["modelValue"])]),_:1}),a(f,{label:"Request Date"},{default:s(()=>[a(c,{modelValue:o.value.request_date,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.request_date=e),name:"request_date",disabled:!0},null,8,["modelValue"])]),_:1}),a(f,{label:"Expected Liquidation"},{default:s(()=>[a(c,{modelValue:o.value.expectedliquidation_date,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.expectedliquidation_date=e),name:"expectedliquidation_date",disabled:!0},null,8,["modelValue"])]),_:1}),a(f,{label:"Status"},{default:s(()=>[a(c,{modelValue:q.value,"onUpdate:modelValue":t[4]||(t[4]=e=>q.value=e),name:"status_request",disabled:!0},null,8,["modelValue"])]),_:1}),a(y,{class:"mt-2"},{default:s(()=>[o.value.status_request==="FA"?(n(),_(p,{key:0,color:"info",onClick:t[5]||(t[5]=e=>F("Manage")),label:"Manage",icon:"mdiAccountBoxEditOutline"})):C("",!0),o.value.status_request==="FA"?(n(),_(p,{key:1,color:"danger",label:"Delete",onClick:R,icon:"mdiClose"})):C("",!0)]),_:1})]),_:1},8,["is-open"]),a(E,{modelValue:d.value,"onUpdate:modelValue":t[7]||(t[7]=e=>d.value=e),type:"warning",title:"Are you sure?",text:`You want to delete ${o.value.frm_no} ? Once submitted, you cannot undo this action!`,confirmText:"Submit",cancelText:"Cancel",onConfirm:D,onCancel:L},null,8,["modelValue","text"])],64))}};export{Xe as default};
