import{r as c,b as O,o as P,x as v,y as p,H as o,J as n,C as L,F as V,z as U,L as B,I as u,O as I,D as y,P as j,K as C}from"./@vue-DhfKueGL.js";import{a as M,u as z,r as H}from"./@inertiajs-DE7H7qLl.js";import{s as J}from"./service-CLgXUwp_.js";import{_ as K}from"./CardBox-B8VuaoGy.js";import{_ as R}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import{_ as T}from"./AsideDrawer-DLoyHTrP.js";import{_ as b}from"./FormField-Cnx0pd2b.js";import{_ as g}from"./FormControl-C_nPUmK8.js";import{_ as $}from"./BaseButtons--tE85GFf.js";import{_}from"./BaseButton-YqB03AwT.js";import{a as A}from"./axios-ngrFHoWO.js";import{_ as q}from"./SwalConfirm.vue_vue_type_script_setup_true_lang-DKkGdSL9.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";/* empty css                                              */import"./app-VaUb3FJr.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./@mdi-Ds8bXjTD.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./moment-T1pcntrQ.js";import"./SectionTitleLineWithButton-CvP-kldM.js";import"./BaseIcon-BVVkr6PJ.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";const G={key:0,class:"mb-3 text-red-600 text-sm"},Te={__name:"Warehouse",setup(Q){const k=c([]),i=c(!1),r=c(!1),E=M(),l=z({_token:E.props.csrf_token,id:null,branch_code:"",branch_name:"",fulladdress:"",status:"A"}),s=c([]);let d=J();const h=c(!1),m=c(""),S=O(()=>m.value==="Add"?"Add Warehouse":m.value==="Edit"?"Edit Warehouse":"Warehouse"),D=[{label:"Code",fieldName:"branch_code",type:"link"},{label:"Name",fieldName:"branch_name"},{label:"Address",fieldName:"fulladdress"},{label:"Status",fieldName:"status",type:"activeinactive"}],w=async()=>{var e;r.value=!0;const t=await A.get("/frls/core-branch/list");k.value=((e=t==null?void 0:t.data)==null?void 0:e.data)??[],r.value=!1},x=async t=>{m.value="Edit",r.value=!0;try{const e=await A.get(`/frls/core-branch/${t.id}`),a=(e==null?void 0:e.data)||t;l.id=a.id??t.id,l.branch_code=a.branch_code??t.branch_code??"",l.branch_name=a.branch_name??t.branch_name??"",l.fulladdress=a.fulladdress??t.fulladdress??"",l.status=a.status??"A",i.value=!0}finally{r.value=!1}},N=()=>{m.value="Add",l.id=null,l.branch_code="",l.branch_name="",l.fulladdress="",l.status="A",i.value=!0},W=async()=>{r.value=!0;try{m.value==="Edit"&&l.id?await new Promise((t,e)=>{l.put(`/frls/core-branch/${l.id}`,{preserveScroll:!0,onSuccess:()=>{d.success("Warehouse updated"),t()},onError:a=>{s.value=Object.values(a||{});const f=s.value.length>0?s.value[0]:"Failed to update warehouse";d.error(f),e(a)}})}):await new Promise((t,e)=>{l.post("/frls/core-branch",{preserveScroll:!0,onSuccess:()=>{d.success("Warehouse created"),t()},onError:a=>{s.value=Object.values(a||{});const f=s.value.length>0?s.value[0]:"Failed to create warehouse";d.error(f),e(a)}})}),await w(),i.value=!1}finally{r.value=!1}},F=async()=>{if(!l.id){i.value=!1;return}r.value=!0;try{await new Promise((t,e)=>{H.delete(`/frls/core-branch/${l.id}`,{preserveScroll:!0,onSuccess:()=>{d.success("Warehouse deleted"),t()},onError:a=>{s.value=Object.values(a||{}),d.error("Failed to delete warehouse"),e(a)}})}),await w(),i.value=!1}finally{r.value=!1}};return P(w),(t,e)=>(p(),v(V,null,[o(K,{class:"flex-1 p-6","has-table":""},{default:n(()=>[o(R,{"table-rows":k.value,"table-header":D,"table-name":"Warehouses","searchable-fields":"code,name,description","is-paginated":!0,loading:r.value,onOpenLink:x},{"table-action":n(()=>[o($,null,{default:n(()=>[o(_,{icon:"mdiFileDocumentPlus",disabled:r.value,color:"info","rounded-full":"",small:"",label:"Add",onClick:N},null,8,["disabled"])]),_:1})]),_:1},8,["table-rows","loading"])]),_:1}),o(T,{title:S.value,"is-open":i.value,onCloseDrawer:e[7]||(e[7]=a=>i.value=!1),class:"shadow-lg shadow-blue-500/50"},{default:n(()=>[s.value.length?(p(),v("div",G,[(p(!0),v(V,null,U(s.value,(a,f)=>(p(),v("div",{key:f},B(a),1))),128))])):L("",!0),o(b,{label:"Code"},{default:n(()=>[o(g,{modelValue:u(l).branch_code,"onUpdate:modelValue":e[0]||(e[0]=a=>u(l).branch_code=a)},null,8,["modelValue"])]),_:1}),o(b,{label:"Name"},{default:n(()=>[o(g,{modelValue:u(l).branch_name,"onUpdate:modelValue":e[1]||(e[1]=a=>u(l).branch_name=a)},null,8,["modelValue"])]),_:1}),o(b,{label:"Address"},{default:n(()=>[o(g,{modelValue:u(l).fulladdress,"onUpdate:modelValue":e[2]||(e[2]=a=>u(l).fulladdress=a)},null,8,["modelValue"])]),_:1}),o(b,{label:"Status"},{default:n(()=>[I(y("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>u(l).status=a),class:"w-full rounded border-gray-300"},[...e[8]||(e[8]=[y("option",{value:"A"},"Active",-1),y("option",{value:"I"},"Inactive",-1)])],512),[[j,u(l).status]])]),_:1}),o($,null,{default:n(()=>[o(_,{icon:"mdiContentSave",disabled:r.value,color:"info","rounded-full":"",small:"",label:"Save",onClick:W},null,8,["disabled"]),m.value==="Edit"?(p(),C(_,{key:0,icon:"mdiDelete",color:"danger","rounded-full":"",small:"",label:"Delete",onClick:e[4]||(e[4]=a=>h.value=!0)})):(p(),C(_,{key:1,icon:"mdiClose",color:"error","rounded-full":"",small:"",label:"Cancel",onClick:e[5]||(e[5]=a=>i.value=!1)}))]),_:1}),o(q,{modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=a=>h.value=a),type:"warning",title:"Delete Record",text:"Are you sure you want to delete this record?",onConfirm:F},null,8,["modelValue"])]),_:1},8,["title","is-open"])],64))}};export{Te as default};
