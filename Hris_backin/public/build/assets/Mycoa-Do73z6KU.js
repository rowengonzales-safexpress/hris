import{a as nt,h as rt}from"./@inertiajs-DE7H7qLl.js";import{h as u}from"./moment-T1pcntrQ.js";import O from"./html2canvas-CBrSDip1.js";import{_ as U}from"./FormControl-C_nPUmK8.js";import{_ as j}from"./CardBox-B8VuaoGy.js";import{_ as dt}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import{_ as W}from"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import{W as it}from"./WeeklyTaskLayout-DXTc1r_Z.js";import{_ as z}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as F}from"./BaseButton-YqB03AwT.js";import{_ as ct}from"./app-VaUb3FJr.js";import{b as N,r as l,w as G,o as ut,Q as mt,x as i,y as r,H as n,I as A,J as c,D as o,K as gt,F as M,z as L,A as R,M as pt,L as d,C as _t,B as T}from"./@vue-DhfKueGL.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./axios-ngrFHoWO.js";import"./lodash-es-BU332SBD.js";import"./html2pdf.js-p1DVm4cu.js";import"./pinia-DPcN--oA.js";import"./@mdi-Ds8bXjTD.js";import"./BaseIcon-BVVkr6PJ.js";import"./BaseButtons--tE85GFf.js";import"./SessionIdle.vue_vue_type_script_setup_true_lang-0Er72HTu.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./FormField-Cnx0pd2b.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./laravel-vite-plugin-DEL3ZhID.js";const ft={class:"flex justify-between items-center mb-2"},vt={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},bt={class:"text-center py-2 border-b-2 border-gray-200"},kt={class:"text-black text-xl font-bold flex justify-center items-center"},yt={class:"bg-white text-black text-sm border-t border-b border-gray-300 mx-4 mt-1 py-1 font-semibold"},ht={class:"p-3 flex-grow flex flex-col text-white"},xt={class:"mb-3 font-medium"},wt={key:0},Ct={key:1},Ft={key:2},Mt={key:0,class:"bg-white text-gray-800 rounded p-3 shadow-sm mt-auto"},Tt={class:"list-none m-0 p-0 space-y-2"},Dt=["checked"],St={class:"text-sm leading-snug"},$t={class:"flex justify-end mt-4 text-gray-500"},Yt={class:"overflow-x-auto"},Bt={class:"mt-2 border-t-2 border-gray-300 pt-4 px-4 bg-gray-50 dark:bg-slate-800"},Nt={class:"grid grid-cols-2 md:grid-cols-6 gap-4 font-bold text-sm items-center"},At={class:"md:text-center text-gray-700 dark:text-gray-300"},Lt={class:"md:text-center text-gray-700 dark:text-gray-300"},Rt={class:"flex justify-end mt-4 text-gray-500"},It={class:"p-6"},Vt={class:"fromtocenter space-y-4"},Et={class:"flex justify-end gap-2 mt-6"},Ht={class:"p-6"},Ot={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Ut=["onClick"],jt={class:"flex rounded overflow-hidden shadow border"},Wt={class:"flex justify-end mt-6"},K="My Coa",zt={__name:"Mycoa",setup(Gt){const J=nt(),D=N(()=>{var e;return((e=J.props.auth)==null?void 0:e.user)||{}}),y=N(()=>{var s,t;const e=((s=D.value)==null?void 0:s.first_name)??"",a=((t=D.value)==null?void 0:t.last_name)??"";return`${e} ${a}`.trim()}),m=l(!1),I=l(0),V=l(0),S=l(0),h=l([{background:"#B98D65",active_background:"#72461F",font_background:"#F8F9FA"},{background:"#2196F3",active_background:"#1769AA",font_background:"#F8F9FA"},{background:"#FFC400",active_background:"#B28900",font_background:"#F8F9FA"},{background:"#9C27B0",active_background:"#6D1B7B",font_background:"#F8F9FA"},{background:"#009688",active_background:"#00695F",font_background:"#F8F9FA"},{background:"#607d8b",active_background:"#37474f",font_background:"#F8F9FA"}]),$=l((()=>{const e={month:"long",day:"numeric",year:"numeric"};return new Date().toLocaleString("en-US",e)})()),Q=e=>u(e.taskdate).format("MMMM D, YYYY")===$.value?e.active_background==""?"#72461F":e.active_background:e.background==""?"#B98D65":e.background,q=()=>{const e=document.getElementById("captureVSCContainer");O(e).then(a=>{const s=a.toDataURL(),t=document.createElement("a");t.href=s,t.download=`${y.value} - ${K}.png`,t.click()})},P=()=>{const e=document.getElementById("captureHitRateContainer");O(e).then(a=>{const s=a.toDataURL(),t=document.createElement("a");t.href=s,t.download=`${y.value} - My HIT RATE.png`,t.click()})};l(null),l("today");const x=l({data:[]}),g=l({data:[]}),b=l(!1),k=l(!1),X=()=>{m.value=!0,axios.get("/weekly-task-schedule/api/myvsc").then(e=>{m.value=!1,x.value=e.data.dailyTasks,g.value=e.data.TaskList,I.value=e.data.totaltasklist,V.value=e.data.totalcomplettask,S.value=e.data.totalpercentcomplete})},Z=()=>{b.value=!0},p=l({start_date:"",end_date:""}),w=l(""),C=l("");G([w],()=>{const e=new Date(w.value),a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");p.value.start_date=`${a}-${s}-${t}`}),G([C],()=>{const e=new Date(C.value),a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");p.value.end_date=`${a}-${s}-${t}`});const tt=(e,a,s)=>{const t=u(a),_=u(s),Y=[];let H={background:h.value[0].background,active_background:h.value[0].active_background,font_background:h.value[0].font_background};e&&e.length>0&&(H={background:e[0].background,active_background:e[0].active_background,font_background:e[0].font_background});const B={};e&&e.forEach(f=>{const v=u(f.taskdate).format("YYYY-MM-DD");B[v]=f});for(let f=u(t);f.isSameOrBefore(_);f.add(1,"days")){const v=f.format("YYYY-MM-DD");B[v]?Y.push(B[v]):Y.push({id:"placeholder_"+v,taskdate:v,site_name:"No Schedule",tasktype:null,task_lists:[],...H})}return Y},et=()=>{m.value=!0,axios.get("/weekly-task-schedule/api/filter-vsc",{params:{start_date:p.value.start_date,end_date:p.value.end_date}}).then(e=>{m.value=!1,x.value=tt(e.data.dailyTasks,p.value.start_date,p.value.end_date),g.value=e.data.TaskList}).catch(e=>{console.error(e)}).finally(()=>{b.value=!1})},at=()=>{k.value=!0},ot=e=>{if(e){const a=D.value.id;axios.post("/weekly-task-schedule/api/changethemes",{userid:a,background:e.background,active_background:e.active_background,font_background:e.font_background}).then(s=>{k.value=!1,m.value=!0,axios.get("/weekly-task-schedule/api/myvsc").then(t=>{m.value=!1,x.value=t.data.dailyTasks,g.value=t.data.TaskList})}).catch(s=>{console.error(s)})}else console.error("Invalid item:",e)},E=e=>{const a=parseFloat(e);return a>=100?"bg-green-600":a>=51?"bg-orange-500":"bg-red-600"},st=[{label:"Planed Date",fieldName:"taskdate_text",type:"html"},{label:"Total Todos",fieldName:"task_lists_count"},{label:"Complete",fieldName:"completed_task_count",type:"slot",slotName:"complete"},{label:"Remarks",fieldName:"remarks"},{label:"Status",fieldName:"status_text",type:"slot",slotName:"status"},{label:"Percentage Todos",fieldName:"percentage_completed",type:"slot",slotName:"percentage"}],lt=N(()=>{var a;return(Array.isArray(g.value)?g.value:((a=g.value)==null?void 0:a.data)??[]).map(s=>({...s,taskdate_text:u(s.taskdate).format("MMMM D, YYYY"),status_text:s.status===null||s.status===""?"On Going!":s.status}))});return ut(()=>{X()}),(e,a)=>{const s=mt("SkeletonLoader");return r(),i(M,null,[n(A(rt),{title:"Weekly Task Dashboard"}),n(it,null,{default:c(()=>[n(j,{id:"captureVSCContainer"},{default:c(()=>[n(z,{icon:"mdiListBox",title:`${y.value}
                            - My COA`},{default:c(()=>[n(F,{icon:"mdiPalette","rounded-full":"",small:"",onClick:at})]),_:1},8,["title"]),o("div",null,[o("div",ft,[n(F,{icon:"mdiCamera","rounded-full":"",small:"",onClick:q}),n(F,{icon:"mdiFilter","rounded-full":"",small:"",onClick:Z})]),m.value?(r(),gt(s,{key:0,type:"card","item-count":8,columns:4})):(r(),i("div",vt,[(r(!0),i(M,null,L(x.value,t=>(r(),i("div",{class:"h-full",key:t.id},[o("div",{class:"rounded-lg shadow-md overflow-hidden h-full flex flex-col",style:R({backgroundColor:Q(t)})},[o("div",bt,[o("div",kt,[pt(d(A(u)(t.taskdate).format("dddd"))+" ",1),a[6]||(a[6]=o("img",{src:"/img/calindar_logo.png",class:"w-6 h-6 ml-2 opacity-80",draggable:"false"},null,-1))]),o("div",yt,d(A(u)(t.taskdate).format("MMMM D, YYYY")),1)]),o("div",ht,[o("div",xt,[t.tasktype==5?(r(),i("span",wt,"WORK FROM HOME")):t.tasktype==6?(r(),i("span",Ct,"Holiday")):(r(),i("span",Ft,d(t.site_name),1))]),t.task_lists&&t.task_lists.length>0?(r(),i("div",Mt,[a[7]||(a[7]=o("div",{class:"text-xs font-bold text-gray-500 uppercase mb-2"},"Todos",-1)),o("ul",Tt,[(r(!0),i(M,null,L(t.task_lists,_=>(r(),i("li",{key:_.id,class:"flex items-center"},[o("input",{type:"checkbox",checked:_.status==1,disabled:"",class:"h-4 w-4 mr-2 accent-black border-gray-400 rounded"},null,8,Dt),o("span",St,d(_.task_name),1)]))),128))])])):_t("",!0)])],4)]))),128))])),o("div",$t,d($.value),1)])]),_:1}),n(j,{id:"captureHitRateContainer",class:"mt-6"},{default:c(()=>[n(z,{icon:"mdiListBox",title:`${y.value} - My HIT RATE`},{default:c(()=>[n(F,{icon:"mdiCamera","rounded-full":"",small:"",onClick:P})]),_:1},8,["title"]),o("div",Yt,[n(dt,{"table-header":st,"table-rows":lt.value,tableName:"hitRateTable","is-paginated":!0},{status:c(({slotProp:t})=>[o("div",{class:T(["p-1 text-center rounded",{"bg-red-600 text-white":t.status_text==="MISS","bg-green-600 text-white":t.status_text==="HIT","text-gray-700":t.status_text!=="MISS"&&t.status_text!=="HIT"}])},d(t.status_text),3)]),complete:c(({slotProp:t})=>[o("div",{class:T(["p-1 text-center rounded",{"bg-green-600 text-white":t.completed_task_count>0&&t.completed_task_count===t.task_lists_count}])},d(t.completed_task_count),3)]),percentage:c(({slotProp:t})=>[o("div",{class:T(["p-1 text-center text-white font-bold rounded",E(t.percentage_completed)])},d(t.percentage_completed)+"% ",3)]),_:1},8,["table-rows"]),o("div",Bt,[o("div",Nt,[a[8]||(a[8]=o("div",{class:"md:text-left text-gray-700 dark:text-gray-300"},"OVERALL:",-1)),o("div",At,"Total Todos: "+d(I.value),1),o("div",Lt,"Complete: "+d(V.value),1),a[9]||(a[9]=o("div",{class:"hidden md:block"},null,-1)),a[10]||(a[10]=o("div",{class:"hidden md:block"},null,-1)),o("div",{class:T(["md:text-center text-white p-2 rounded shadow-sm",E(S.value)])},d(S.value)+"% ",3)])])]),o("div",Rt,d($.value),1)]),_:1})]),_:1}),n(W,{show:b.value,onClose:a[3]||(a[3]=t=>b.value=!1),maxWidth:"sm"},{default:c(()=>[o("div",It,[o("h5",{class:"text-lg font-semibold mb-4"},d(K)+" Summary Report"),o("div",Vt,[o("div",null,[a[11]||(a[11]=o("label",{for:"fromDate",class:"block text-sm font-medium text-gray-700"},"From:",-1)),n(U,{type:"date",modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t)},null,8,["modelValue"])]),o("div",null,[a[12]||(a[12]=o("label",{for:"toDate",class:"block text-sm font-medium text-gray-700"},"To:",-1)),n(U,{type:"date",modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=t=>C.value=t)},null,8,["modelValue"])])]),o("div",Et,[o("button",{type:"button",class:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-gray-800",onClick:a[2]||(a[2]=t=>b.value=!1)},"Cancel"),o("button",{onClick:et,type:"button",class:"px-3 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white"},"Generate")])])]),_:1},8,["show"]),n(W,{show:k.value,onClose:a[5]||(a[5]=t=>k.value=!1),maxWidth:"md"},{default:c(()=>[o("div",Ht,[a[13]||(a[13]=o("h5",{class:"text-lg font-semibold mb-4"},"Card Themes Picker",-1)),o("div",Ot,[(r(!0),i(M,null,L(h.value,t=>(r(),i("div",{key:t.background,onClick:_=>ot(t),class:"cursor-pointer"},[o("div",jt,[o("div",{class:"h-8 w-1/2",style:R({backgroundColor:t.background})},null,4),o("div",{class:"h-8 w-1/2",style:R({backgroundColor:t.active_background})},null,4)])],8,Ut))),128))]),o("div",Wt,[o("button",{type:"button",class:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-gray-800",onClick:a[4]||(a[4]=t=>k.value=!1)},"Cancel")])])]),_:1},8,["show"])],64)}}},ze=ct(zt,[["__scopeId","data-v-fc8ae6e2"]]);export{ze as default};
