import{d as Y,r as p,b as S,K as Z,y as a,J as D,D as e,x as o,C as c,L as n,B as g,O as F,P as T,F as b,z as _,N as V,H as C}from"./@vue-DhfKueGL.js";import{r as M}from"./@inertiajs-DE7H7qLl.js";import{F as q}from"./FRMSLayout-snJua142.js";import{_ as E}from"./BaseButton-YqB03AwT.js";import{_ as G}from"./BaseButtons--tE85GFf.js";import{a as A}from"./axios-ngrFHoWO.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./SessionIdle.vue_vue_type_script_setup_true_lang-0Er72HTu.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./app-VaUb3FJr.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./FormField-Cnx0pd2b.js";import"./FormControl-C_nPUmK8.js";import"./Footer-D5LPszYR.js";const Q={class:"max-w-7xl mx-auto"},X={class:"mb-6"},ee={class:"flex items-center justify-between"},te={class:"flex items-center space-x-3"},se=["disabled"],re={key:0},ae={key:1},oe=["disabled"],le={class:"mb-6 flex flex-wrap items-center gap-4"},ie={class:"flex items-center space-x-2"},ne={class:"flex items-center space-x-2"},de={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},ce={key:0,class:"p-8 text-center"},ue={key:1,class:"p-8 text-center"},pe={key:2,class:"divide-y divide-gray-200 dark:divide-gray-700"},me=["onClick"],ge={class:"flex items-start space-x-4"},ye={class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},ve={key:0,d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},xe={key:1,d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"},fe={key:2,d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"},be={key:3,d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"},_e={class:"flex-1 min-w-0"},he={class:"flex items-center justify-between"},ke={class:"text-sm font-medium text-gray-900 dark:text-white"},we={class:"flex items-center space-x-2"},Ce={key:0,class:"w-2 h-2 bg-blue-500 rounded-full"},Me={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},Ae={class:"flex items-center justify-between mt-3"},Le={class:"text-xs text-gray-500 dark:text-gray-400"},ze={class:"flex items-center space-x-2"},Ne=["onClick"],je=["onClick"],$e={key:3,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700"},Be={class:"flex items-center justify-between"},He={class:"text-sm text-gray-700 dark:text-gray-300"},Re={class:"flex items-center space-x-2"},Se=["onClick","disabled","innerHTML"],De={key:0,class:"fixed inset-0 z-50"},Fe={class:"relative mx-auto my-10 max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700"},Te={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Ve={class:"flex items-center justify-between"},Ee={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ie={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},Ue={class:"px-6 py-5 space-y-4"},Oe={class:"text-sm text-gray-700 dark:text-gray-300"},Pe={key:0,class:"bg-gray-50 dark:bg-gray-900/40 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},Je={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ke={class:"text-xs text-gray-500 dark:text-gray-400 capitalize"},We={key:0,class:"text-sm font-medium text-gray-900 dark:text-white"},Ye={key:1,class:"space-y-3"},Ze={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},qe=["src"],Ge={class:"px-6 pb-6"},Wt=Y({__name:"Index",props:{notifications:{}},setup(I){const i=p(I.notifications),l=p(null),h=p(!1),m=p(!1),y=p(!1),v=p("all"),x=p(""),L=S(()=>{var s;return(s=i.value)!=null&&s.data?i.value.data.filter(t=>!t.is_read).length:0}),U=async()=>{m.value=!0;try{M.reload({only:["notifications"]})}finally{m.value=!1}},O=async()=>{y.value=!0;try{await A.patch("/frls/notifications/mark-all-as-read"),i.value.data.forEach(s=>s.is_read=!0)}catch(s){console.error("Error marking all as read:",s)}finally{y.value=!1}},k=async s=>{if(!s.is_read)try{await A.patch(`/frls/notifications/${s.id}/mark-as-read`),s.is_read=!0}catch(t){console.error("Error marking as read:",t)}},z=async s=>{if(confirm("Are you sure you want to delete this notification?"))try{await A.delete(`/frls/notifications/${s.id}`);const t=i.value.data.findIndex(u=>u.id===s.id);t>-1&&i.value.data.splice(t,1),w()}catch(t){console.error("Error deleting notification:",t)}},P=async s=>{s.is_read||await k(s),l.value=s,h.value=!0},w=()=>{h.value=!1,l.value=null},N=()=>{const s=new URLSearchParams;v.value!=="all"&&s.append("filter",v.value),x.value&&s.append("type",x.value);const t=s.toString()?`/frls/notifications?${s.toString()}`:"/frls/notifications";M.visit(t)},J=s=>{s&&M.visit(s)},K=s=>{const t={success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-600",error:"bg-red-100 text-red-600",info:"bg-blue-100 text-blue-600"};return t[s]||t.info},W=s=>{const t={success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"};return t[s]||t.info},j=s=>new Date(s).toLocaleString(),$=S(()=>{var u;const s=((u=l.value)==null?void 0:u.data)||{},t=[];return typeof(s==null?void 0:s.image_url)=="string"&&t.push(s.image_url),typeof(s==null?void 0:s.document_url)=="string"&&t.push(s.document_url),Array.isArray(s==null?void 0:s.images)&&t.push(...s.images),Array.isArray(s==null?void 0:s.files)&&t.push(...s.files),t.filter(f=>typeof f=="string")});return(s,t)=>(a(),Z(q,null,{default:D(()=>{var u,f,B,H,R;return[e("div",Q,[e("div",X,[e("div",ee,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Notifications"),e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"}," Manage your notifications and stay updated ")],-1)),e("div",te,[L.value>0?(a(),o("button",{key:0,onClick:O,disabled:y.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[y.value?(a(),o("span",re,"Marking...")):(a(),o("span",ae,"Mark All Read ("+n(L.value)+")",1))],8,se)):c("",!0),e("button",{onClick:U,disabled:m.value,class:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"},[(a(),o("svg",{class:g(["w-5 h-5",{"animate-spin":m.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],8,oe)])])]),e("div",le,[e("div",ie,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Filter:",-1)),F(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>v.value=r),onChange:N,class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[6]||(t[6]=[e("option",{value:"all"},"All Notifications",-1),e("option",{value:"unread"},"Unread Only",-1),e("option",{value:"read"},"Read Only",-1)])],544),[[T,v.value]])]),e("div",ne,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Type:",-1)),F(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>x.value=r),onChange:N,class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[8]||(t[8]=[e("option",{value:""},"All Types",-1),e("option",{value:"info"},"Info",-1),e("option",{value:"success"},"Success",-1),e("option",{value:"warning"},"Warning",-1),e("option",{value:"error"},"Error",-1)])],544),[[T,x.value]])])]),e("div",de,[m.value&&i.value.data.length===0?(a(),o("div",ce,[...t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"text-gray-500 mt-2"},"Loading notifications...",-1)])])):i.value.data.length===0?(a(),o("div",ue,[...t[11]||(t[11]=[e("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5zM10.5 3.75a6 6 0 0 1 6 6v2.25a2.25 2.25 0 0 0 2.25 2.25H21a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h2.25A2.25 2.25 0 0 0 7.5 12V9.75a6 6 0 0 1 6-6Z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"No notifications",-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"You're all caught up! No notifications to display.",-1)])])):(a(),o("div",pe,[(a(!0),o(b,null,_(i.value.data,r=>(a(),o("div",{key:r.id,class:g(["p-6 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",r.is_read?"":"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500"]),onClick:d=>P(r)},[e("div",ge,[e("div",{class:g(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",K(r.type)])},[(a(),o("svg",ye,[r.type==="success"?(a(),o("path",ve)):r.type==="warning"?(a(),o("path",xe)):r.type==="error"?(a(),o("path",fe)):(a(),o("path",be))]))],2),e("div",_e,[e("div",he,[e("h3",ke,n(r.title),1),e("div",we,[e("span",{class:g(["px-2 py-1 text-xs font-medium rounded-full",W(r.type)])},n(r.type.charAt(0).toUpperCase()+r.type.slice(1)),3),r.is_read?c("",!0):(a(),o("div",Ce))])]),e("p",Me,n(r.message),1),e("div",Ae,[e("p",Le,n(j(r.created_at)),1),e("div",ze,[r.is_read?c("",!0):(a(),o("button",{key:0,onClick:V(d=>k(r),["stop"]),class:"text-xs text-blue-600 hover:text-blue-800 font-medium"}," Mark as read ",8,Ne)),e("button",{onClick:V(d=>z(r),["stop"]),class:"text-xs text-red-600 hover:text-red-800 font-medium"}," Delete ",8,je)])])])])],10,me))),128))])),i.value.data.length>0?(a(),o("div",$e,[e("div",Be,[e("div",He," Showing "+n(i.value.from)+" to "+n(i.value.to)+" of "+n(i.value.total)+" notifications ",1),e("div",Re,[(a(!0),o(b,null,_(i.value.links,r=>(a(),o("button",{key:r.label,onClick:d=>J(r.url),disabled:!r.url,class:g(["px-3 py-2 text-sm rounded-lg transition-colors",r.active?"bg-blue-600 text-white":r.url?"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600":"text-gray-400 cursor-not-allowed"]),innerHTML:r.label},null,10,Se))),128))])])])):c("",!0)])]),h.value&&l.value?(a(),o("div",De,[e("div",{class:"fixed inset-0 bg-black/40",onClick:w}),e("div",Fe,[e("div",Te,[e("div",Ve,[e("h3",Ee,n((u=l.value)==null?void 0:u.title),1),e("button",{class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",onClick:w},[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ie,n(j(((f=l.value)==null?void 0:f.created_at)||"")),1)]),e("div",Ue,[e("div",Oe,n((B=l.value)==null?void 0:B.message),1),(H=l.value)!=null&&H.data&&Object.keys(l.value.data).length?(a(),o("div",Pe,[e("div",Je,[(a(!0),o(b,null,_((R=l.value)==null?void 0:R.data,(r,d)=>(a(),o("div",{key:d,class:"flex items-center justify-between"},[e("div",Ke,n(d.replace("_"," ")),1),Array.isArray(r)||typeof r=="object"?c("",!0):(a(),o("div",We,n(r),1))]))),128))])])):c("",!0),$.value.length?(a(),o("div",Ye,[t[13]||(t[13]=e("div",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Attachments",-1)),e("div",Ze,[(a(!0),o(b,null,_($.value,(r,d)=>(a(),o("img",{key:d,src:r,class:"w-full h-32 object-cover rounded-md border border-gray-200 dark:border-gray-700"},null,8,qe))),128))])])):c("",!0)]),e("div",Ge,[C(G,null,{default:D(()=>{var r;return[C(E,{label:(r=l.value)!=null&&r.is_read?"Read":"Mark as Read",color:"info",onClick:t[2]||(t[2]=d=>l.value&&k(l.value))},null,8,["label"]),C(E,{label:"Delete",color:"danger",onClick:t[3]||(t[3]=d=>l.value&&z(l.value))})]}),_:1})])])])):c("",!0)]}),_:1}))}});export{Wt as default};
