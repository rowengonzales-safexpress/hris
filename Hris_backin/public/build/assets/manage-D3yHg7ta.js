import{a as R,u as S,h as P}from"./@inertiajs-DE7H7qLl.js";import{T as w}from"./TrackingLayout-BvqHPuz-.js";import{_ as z}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as I}from"./CardBox-B8VuaoGy.js";import{_ as s}from"./FormField-Cnx0pd2b.js";import{_ as d}from"./FormControl-C_nPUmK8.js";import{_ as f}from"./BaseButton-YqB03AwT.js";import{_ as H}from"./Checkbox-DBVwD7bY.js";import{s as J}from"./service-CLgXUwp_.js";import{b as G,r as K,w as Q,x as p,y as c,H as o,I as l,J as m,C as W,D as v,F as T,z as X,L as Y}from"./@vue-DhfKueGL.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./axios-ngrFHoWO.js";import"./lodash-es-BU332SBD.js";import"./SessionIdle.vue_vue_type_script_setup_true_lang-0Er72HTu.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./app-VaUb3FJr.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./Footer-D5LPszYR.js";/* empty css                                              */const Z={key:0,class:"mb-4 text-red-600"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"mt-6 flex justify-end gap-2"},et={__name:"manage",props:{action:String,formdata:Object},emits:["triggerTopRightButton"],setup(B,{emit:j}){var y,k,x,C,L,h,E,$,A,D,F,N,U;const r=B,b=j,g=R(),u=(y=g.props.auth)==null?void 0:y.user,q=G(()=>{var a;return(a=r.formdata)!=null&&a.id?"Manage":"Add"}),e=S({_token:g.props.csrf_token,id:((k=r.formdata)==null?void 0:k.id)||null,branch_id:((x=r.formdata)==null?void 0:x.branch_id)??(u==null?void 0:u.branch_id)??null,driver_code:((C=r.formdata)==null?void 0:C.driver_code)||"",first_name:((L=r.formdata)==null?void 0:L.first_name)||"",last_name:((h=r.formdata)==null?void 0:h.last_name)||"",mobile_no:((E=r.formdata)==null?void 0:E.mobile_no)||"",email:(($=r.formdata)==null?void 0:$.email)||"",license_no:((A=r.formdata)==null?void 0:A.license_no)||"",license_type:((D=r.formdata)==null?void 0:D.license_type)||"",license_expiry:((F=r.formdata)==null?void 0:F.license_expiry)||"",emergency_contact_no:((N=r.formdata)==null?void 0:N.emergency_contact_no)||"",is_active:((U=r.formdata)==null?void 0:U.is_active)!==void 0?r.formdata.is_active:!0}),n=K([]),V=a=>a===!0||a===1||a==="1"||a==="A"||a==="ACTIVE";e.is_active=V(e.is_active),Q(()=>r.formdata,a=>{a&&Object.keys(a).forEach(t=>{Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=t==="is_active"?V(a[t]):a[t])})},{immediate:!0});const M=()=>{if(n.value=[],e.branch_id||(e.branch_id=(u==null?void 0:u.branch_id)??null),e.driver_code||n.value.push("Driver code is required"),e.first_name||n.value.push("First name is required"),e.last_name||n.value.push("Last name is required"),e.mobile_no||n.value.push("Mobile no is required"),e.license_no||n.value.push("License no is required"),n.value.length>0)return;const a=e.id?`/tracking/driver/${e.id}`:"/tracking/driver",t=e.id?"put":"post",i=J();e[t](a,{preserveScroll:!0,onSuccess:()=>{i.success(`Driver successfully ${e.id?"updated":"created"}!`),b("triggerTopRightButton","lists")},onError:_=>{n.value=Object.values(_||{}),i.error("Failed to save driver")}})},O=()=>{e.clearErrors(),e.reset()};return(a,t)=>(c(),p(T,null,[o(l(P),{title:"Driver Management"}),o(w,null,{default:m(()=>[o(z,{icon:"mdiFileDocumentPlus",title:(r.action==="Add"?"Add":"Manage")+" Driver",main:""},{default:m(()=>[o(f,{onClick:t[0]||(t[0]=i=>b("triggerTopRightButton","lists")),icon:"mdiViewList",label:"Driver Lists",color:"contrast","rounded-full":"",small:""})]),_:1},8,["title"]),o(I,null,{default:m(()=>[n.value.length?(c(),p("div",Z,[v("ul",null,[(c(!0),p(T,null,X(n.value,(i,_)=>(c(),p("li",{key:_},Y(i),1))),128))])])):W("",!0),v("div",ee,[o(s,{label:"Driver Code"},{default:m(()=>[o(d,{modelValue:l(e).driver_code,"onUpdate:modelValue":t[1]||(t[1]=i=>l(e).driver_code=i)},null,8,["modelValue"])]),_:1}),o(s,{label:"First Name"},{default:m(()=>[o(d,{modelValue:l(e).first_name,"onUpdate:modelValue":t[2]||(t[2]=i=>l(e).first_name=i)},null,8,["modelValue"])]),_:1}),o(s,{label:"Last Name"},{default:m(()=>[o(d,{modelValue:l(e).last_name,"onUpdate:modelValue":t[3]||(t[3]=i=>l(e).last_name=i)},null,8,["modelValue"])]),_:1}),o(s,{label:"Mobile No"},{default:m(()=>[o(d,{modelValue:l(e).mobile_no,"onUpdate:modelValue":t[4]||(t[4]=i=>l(e).mobile_no=i)},null,8,["modelValue"])]),_:1}),o(s,{label:"Email"},{default:m(()=>[o(d,{modelValue:l(e).email,"onUpdate:modelValue":t[5]||(t[5]=i=>l(e).email=i),type:"email"},null,8,["modelValue"])]),_:1}),o(s,{label:"License No"},{default:m(()=>[o(d,{modelValue:l(e).license_no,"onUpdate:modelValue":t[6]||(t[6]=i=>l(e).license_no=i)},null,8,["modelValue"])]),_:1}),o(s,{label:"License Type"},{default:m(()=>[o(d,{modelValue:l(e).license_type,"onUpdate:modelValue":t[7]||(t[7]=i=>l(e).license_type=i)},null,8,["modelValue"])]),_:1}),o(s,{label:"License Expiry"},{default:m(()=>[o(d,{modelValue:l(e).license_expiry,"onUpdate:modelValue":t[8]||(t[8]=i=>l(e).license_expiry=i),type:"date"},null,8,["modelValue"])]),_:1}),o(s,{label:"Emergency Contact No"},{default:m(()=>[o(d,{modelValue:l(e).emergency_contact_no,"onUpdate:modelValue":t[9]||(t[9]=i=>l(e).emergency_contact_no=i)},null,8,["modelValue"])]),_:1}),o(s,{label:"Active"},{default:m(()=>[o(H,{checked:l(e).is_active,"onUpdate:checked":t[10]||(t[10]=i=>l(e).is_active=i)},null,8,["checked"])]),_:1})]),v("div",te,[o(f,{onClick:O,icon:"mdiRefresh",color:"contrast","rounded-full":"",small:"",label:"Reset"}),o(f,{onClick:M,icon:"mdiContentSave",color:"info","rounded-full":"",small:"",label:q.value==="Add"?"Create Driver":"Update Driver"},null,8,["label"])])]),_:1})]),_:1})],64))}};export{et as default};
