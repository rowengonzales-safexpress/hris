import{a as w}from"./axios-ngrFHoWO.js";import{_ as C}from"./FormField-Cnx0pd2b.js";import{_ as P}from"./FormControl-C_nPUmK8.js";/* empty css                                              */import{_ as V}from"./app-VaUb3FJr.js";import"./moment-T1pcntrQ.js";/* empty css                                                                            */import{l as S}from"./lodash-B2PBWGQw.js";import{_ as E}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import{_ as F}from"./CardBox-B8VuaoGy.js";import A from"./html2canvas-CBrSDip1.js";import{W as I}from"./WeeklyTaskLayout-DXTc1r_Z.js";import{a as R,h as T}from"./@inertiajs-DE7H7qLl.js";import{_ as U}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as W}from"./BaseButton-YqB03AwT.js";import{r as i,b as m,w as H,o as O,Q,x,y as _,H as s,D as e,I as j,J as d,K as q,F as z}from"./@vue-DhfKueGL.js";import"./pinia-DPcN--oA.js";import"./@mdi-Ds8bXjTD.js";import"./BaseIcon-BVVkr6PJ.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./html2pdf.js-p1DVm4cu.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./es-errors-CFxpeikN.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./object-inspect-CiOUnV34.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./BaseButtons--tE85GFf.js";import"./SessionIdle.vue_vue_type_script_setup_true_lang-0Er72HTu.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";const G={class:"container-fluid"},J={class:"card",id:"capturePrioContainer"},K={class:"card-body"},Y={key:1,class:"content"},X={class:"container-fluid"},Z={class:"modal fade",id:"FormModalfilterDate","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},tt={class:"modal-dialog modal-sm",role:"document"},at={class:"modal-content"},et={class:"modal-body"},ot={class:"fromtocenter"},lt={__name:"MyClosePrioList",setup(st){const r=i(!1),b=i({data:[]}),n=i([]),c=i(10),D=i(1),u=i(""),p=i(""),v=R(),y=m(()=>{var a;return((a=v.props.auth)==null?void 0:a.user)||{}});m(()=>v.props.branchName||"Main Branch");const L=m(()=>{var o,l;const a=((o=y.value)==null?void 0:o.first_name)??"",t=((l=y.value)==null?void 0:l.last_name)??"";return`${a} ${t}`.trim()}),f=(a=1)=>{D.value=a;const t=(a-1)*c.value,o=t+c.value;b.value={data:n.value.slice(t,o)}},k=()=>{r.value=!0,w.get("/weekly-task-schedule/mycloseprio",{params:{query:g.value}}).then(a=>{var t;r.value=!1,n.value=Array.isArray(a.data)?a.data:((t=a==null?void 0:a.data)==null?void 0:t.data)??[],f(1)}).catch(()=>{r.value=!1,n.value=[],f(1)})},h=()=>{const a=document.getElementById("capturePrioContainer");A(a).then(t=>{const o=t.toDataURL(),l=document.createElement("a");l.href=o,l.download="MY CLOSED PRIO.png",l.click()})},N=()=>{r.value=!0,w.get("/weekly-task-schedule/filter-closeprio",{params:{start_date:u.value,end_date:p.value}}).then(a=>{var t;r.value=!1,n.value=Array.isArray(a.data)?a.data:((t=a==null?void 0:a.data)==null?void 0:t.data)??[],f(1)}).catch(a=>{console.error(a)}).finally(()=>{$("#FormModalfilterDate").modal("hide")})},g=i(null),M=[{label:"Site",fieldName:"sitename"},{label:"Planned Date",fieldName:"taskdate",type:"date"},{label:"Start Date",fieldName:"startdate",type:"datetime"},{label:"End Date",fieldName:"enddate",type:"datetime"},{label:"Task",fieldName:"tasktype.listtask"},{label:"Status",fieldName:"status"},{label:"Remark",fieldName:"remarks"}],B=m(()=>{var t;return(((t=b.value)==null?void 0:t.data)??[]).map(o=>{var l;return{...o,task:((l=o==null?void 0:o.tasktype)==null?void 0:l.listtask)??""}})});return H(g,S.debounce(()=>{k()},300)),O(()=>{k()}),(a,t)=>{const o=Q("SkeletonLoader");return _(),x(z,null,[s(j(T),{title:"Weekly Task Dashboard"}),s(I,null,{default:d(()=>[s(F,null,{default:d(()=>[s(U,{icon:"mdiListBox",title:`${L.value}
                            - My Closed Prio`},{default:d(()=>[s(W,{icon:"mdiCamera",color:"danger","rounded-full":"",small:"",onClick:h})]),_:1},8,["title"]),e("div",G,[e("div",J,[e("div",K,[r.value?(_(),q(o,{key:0,type:"table","item-count":8})):(_(),x("div",Y,[e("div",X,[e("div",{class:"d-flex justify-content-between"},[e("div",{class:"d-flex"},[e("button",{onClick:h,type:"button",class:"mb-2 btn btn-sm btn-success"},[...t[2]||(t[2]=[e("i",{class:"fa fa-camera"},null,-1)])])])]),e("div",null,[s(E,{"table-rows":B.value,"table-header":M,"table-name":"MyClosedPrio","is-paginated":!0,"rows-per-page":c.value,loading:r.value,"searchable-fields":"sitename,task,remarks,status","show-download-csv":!0,"show-page-info":!0,"show-total":!0},null,8,["table-rows","rows-per-page","loading"])])])]))])])])]),_:1})]),_:1}),e("div",Z,[e("div",tt,[e("div",at,[t[4]||(t[4]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"staticBackdropLabel"},[e("span",null,"My Close Prio")]),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"Ã—")])],-1)),e("div",et,[e("div",ot,[s(C,{label:"From"},{default:d(()=>[s(P,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),type:"date"},null,8,["modelValue"])]),_:1}),s(C,{label:"To"},{default:d(()=>[s(P,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=l=>p.value=l),type:"date"},null,8,["modelValue"])]),_:1})])]),e("div",{class:"modal-footer"},[t[3]||(t[3]=e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Cancel ",-1)),e("button",{onClick:N,type:"button",class:"btn btn-primary"}," Generate ")])])])])],64)}}},sa=V(lt,[["__scopeId","data-v-191de4ab"]]);export{sa as default};
