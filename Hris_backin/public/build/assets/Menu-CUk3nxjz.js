import{A as D}from"./AdminLayout-8Nvj6Q27.js";import{u as F,h as j}from"./@inertiajs-DE7H7qLl.js";import{_ as P}from"./BaseButtons--tE85GFf.js";import{_ as u}from"./FormField-Cnx0pd2b.js";import{_}from"./FormControl-C_nPUmK8.js";import{a as k}from"./axios-ngrFHoWO.js";import{_ as I}from"./AsideDrawer-DLoyHTrP.js";import{_ as T}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as f}from"./BaseButton-YqB03AwT.js";import{_ as h}from"./CardBox-B8VuaoGy.js";import{_ as H}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import{_ as w}from"./Checkbox-DBVwD7bY.js";import{d as J,r as A,b as v,w as K,x as N,y as V,H as l,I as n,J as d,D as b,K as q,F as z}from"./@vue-DhfKueGL.js";import{_ as G}from"./app-VaUb3FJr.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./Footer-D5LPszYR.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./pinia-DPcN--oA.js";import"./moment-T1pcntrQ.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./laravel-vite-plugin-DEL3ZhID.js";const Q={class:"menu-list-container"},W={class:"main-content"},X={key:1,class:"text-gray-500"},Y={class:"space-y-4"},Z=J({__name:"Menu",props:{masterlist:{type:[Array,Object],default:()=>[]},app:{type:Object,default:()=>null}},emits:["triggerTopRightButton"],setup(y,{emit:x}){var M;const r=y,B=x,p=A(!1),m=A("Add"),e=F({id:null,app_id:((M=r.app)==null?void 0:M.id)||null,group:"",name:"",route:"",icon:"",sort_order:0,is_active:!0,parent_id:null}),C=v(()=>m.value==="Add"?"Add Menu":"Edit Menu"),O=v(()=>{let t=[];return Array.isArray(r.masterlist)?t=r.masterlist:r.masterlist&&typeof r.masterlist=="object"&&(t=r.masterlist.data||[]),Array.isArray(t)?t.map(a=>{var s,i,o;return{id:a.id||"",name:a.name||"",route:a.route||"",icon:a.icon||"",sort_order:a.sort_order||0,is_active:a.is_active||!1,app_id:a.app_id||null,parent_id:a.parent_id||null,app_name:((s=a.app)==null?void 0:s.name)||((i=r.app)==null?void 0:i.name)||"",parent_name:((o=a.parent)==null?void 0:o.name)||"Root"}}).filter(Boolean):[]}),c=A([]);K(O,t=>{c.value=Array.isArray(t)?t:[]},{immediate:!0});const g=v(()=>c.value),R=async t=>{var a,s;m.value="Edit";try{const o=(await k.get(`/admin/menu/${t.id}`)).data||{};e.id=o.id||t.id,e.app_id=o.app_id||((a=r.app)==null?void 0:a.id)||t.app_id||null,e.group=o.group||"",e.name=o.name||t.name||"",e.route=o.route||t.route||"",e.icon=o.icon||t.icon||"",e.sort_order=o.sort_order||t.sort_order||0,e.is_active=!!(o.is_active??t.is_active),e.parent_id=o.parent_id??t.parent_id??null}catch{e.id=t.id,e.app_id=((s=r.app)==null?void 0:s.id)||t.app_id||null,e.name=t.name||"",e.route=t.route||"",e.icon=t.icon||"",e.sort_order=t.sort_order||0,e.is_active=!!t.is_active,e.parent_id=t.parent_id||null}p.value=!0},U=[{label:"Name",fieldName:"name",type:"link"},{label:"Route",fieldName:"route"},{label:"Application",fieldName:"app_name"},{label:"Parent",fieldName:"parent_name"},{label:"Order",fieldName:"sort_order"},{label:"Active",fieldName:"is_active"}],E=()=>{var t;m.value="Add",e.id=null,e.app_id=((t=r.app)==null?void 0:t.id)||null,e.name="",e.route="",e.icon="",e.sort_order=0,e.is_active=!0,e.parent_id=null,p.value=!0},L=v(()=>(c.value||[]).filter(a=>(a.parent_id??0)===0).map(a=>({value:a.id,label:a.name}))),$=async()=>{var s;if(!((s=r.app)!=null&&s.id))return;const t=await k.get(`/admin/menus/app/${r.app.id}`),a=Array.isArray(t.data)?t.data:[];c.value=a.map(i=>{var o;return{id:i.id||"",name:i.name||"",route:i.route||"",icon:i.icon||"",sort_order:i.sort_order||0,is_active:i.is_active||!1,app_id:i.app_id||null,parent_id:i.parent_id||null,app_name:((o=r.app)==null?void 0:o.name)||"",parent_name:"Root"}})},S=()=>{m.value==="Add"?e.post("/admin/menu",{preserveScroll:!0,onSuccess:async()=>{p.value=!1,await $()},onError:()=>{}}):e.put(`/admin/menu/${e.id}`,{preserveScroll:!0,onSuccess:async()=>{p.value=!1,await $()},onError:()=>{}})};return(t,a)=>{var s;return V(),N(z,null,[l(n(j),{title:`Menus - ${((s=y.app)==null?void 0:s.name)||""}`},null,8,["title"]),l(D,null,{default:d(()=>{var i;return[b("div",Q,[b("div",W,[l(T,{icon:"mdiListBox",title:`Menus for ${((i=y.app)==null?void 0:i.name)||""}`,main:""},{default:d(()=>[b("div",null,[l(f,{onClick:E,icon:"mdiFileDocumentPlus",label:"Add Menu",color:"contrast","rounded-full":"",small:"",class:"mr-1"}),l(f,{onClick:a[0]||(a[0]=o=>B("triggerTopRightButton","lists")),icon:"mdiViewList",label:"Back to List",color:"contrast","rounded-full":"",small:""})])]),_:1},8,["title"]),l(h,{class:"flex-1 p-6","has-table":""},{default:d(()=>[g.value.length>0?(V(),q(H,{key:0,"table-rows":g.value,"table-header":U,"table-name":"menus","searchable-fields":"name,route,app_name,parent_name,sort_order,is_active","is-paginated":!0,onOpenLink:R},null,8,["table-rows"])):(V(),N("div",X,"No menus found for this application"))]),_:1})])]),l(I,{title:C.value,"is-open":p.value,onCloseDrawer:a[8]||(a[8]=o=>p.value=!1),class:"shadow-lg shadow-blue-500/50"},{default:d(()=>[b("div",Y,[l(u,{label:"Menu Name"},{default:d(()=>[l(_,{modelValue:n(e).name,"onUpdate:modelValue":a[1]||(a[1]=o=>n(e).name=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"Route"},{default:d(()=>[l(_,{modelValue:n(e).route,"onUpdate:modelValue":a[2]||(a[2]=o=>n(e).route=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"Icon"},{default:d(()=>[l(_,{modelValue:n(e).icon,"onUpdate:modelValue":a[3]||(a[3]=o=>n(e).icon=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"Sort Order"},{default:d(()=>[l(_,{modelValue:n(e).sort_order,"onUpdate:modelValue":a[4]||(a[4]=o=>n(e).sort_order=o),type:"number"},null,8,["modelValue"])]),_:1}),l(u,{label:"Parent Menu"},{default:d(()=>[l(_,{modelValue:n(e).parent_id,"onUpdate:modelValue":a[5]||(a[5]=o=>n(e).parent_id=o),options:L.value},null,8,["modelValue","options"])]),_:1}),l(u,{label:"Active"},{default:d(()=>[l(w,{modelValue:n(e).is_active,"onUpdate:modelValue":a[6]||(a[6]=o=>n(e).is_active=o)},null,8,["modelValue"])]),_:1}),l(P,{class:"pt-2 justify-end"},{default:d(()=>[l(f,{icon:m.value==="Add"?"mdiFileDocumentPlus":"mdiAccountBoxEditOutline",label:m.value==="Add"?"Save":"Update",color:"info",onClick:S},null,8,["icon","label"]),l(f,{label:"Cancel",color:"danger",onClick:a[7]||(a[7]=o=>p.value=!1),icon:"mdiClose"})]),_:1})])]),_:1},8,["title","is-open"])]}),_:1})],64)}}}),Ze=G(Z,[["__scopeId","data-v-2439894d"]]);export{Ze as default};
