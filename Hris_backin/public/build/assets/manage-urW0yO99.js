import{d as ie,b as p,r as z,w as le,o as ae,x as c,y as _,H as l,I as a,J as d,D as n,L as J,N as ne,C as de,F as K,z as se}from"./@vue-DhfKueGL.js";import{a as me,u as ue,h as pe}from"./@inertiajs-DE7H7qLl.js";import{s as ce}from"./service-CLgXUwp_.js";import{T as _e}from"./TrackingLayout-BvqHPuz-.js";import{_ as ge}from"./CardBox-B8VuaoGy.js";import{_ as f}from"./BaseButton-YqB03AwT.js";import{_ as s}from"./FormField-Cnx0pd2b.js";import{_ as m}from"./FormControl-C_nPUmK8.js";import{_ as fe}from"./app-VaUb3FJr.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./axios-ngrFHoWO.js";import"./lodash-es-BU332SBD.js";/* empty css                                              */import"./SessionIdle.vue_vue_type_script_setup_true_lang-0Er72HTu.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./Footer-D5LPszYR.js";import"./pinia-DPcN--oA.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";const be={class:"flex justify-between items-center mb-6"},ke={class:"text-2xl font-bold dark:text-white"},ve={class:"grid grid-cols-1 gap-6"},ye={key:0,class:"mb-4 text-red-600"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xe={class:"mt-6 flex justify-end gap-2"},De=ie({__name:"manage",props:{action:String,data:Object,formdata:Object,trackingHeaders:{type:Array,default:()=>[]},trackingClients:{type:Array,default:()=>[]},trackingClientStores:{type:Array,default:()=>[]},errors:Object},emits:["triggerTopRightButton"],setup(Q,{emit:W}){var y,V,S,C,x,D,E,N,h,q,T,U,I,O,A,P,R,B,L,j,$,H,M,G;const i=Q,b=ce(),X=me(),k=p(()=>{var r;return(r=i.data)!=null&&r.id?"Edit":"Add"}),Y=z([{label:"Pending",id:"PENDING"},{label:"In Progress",id:"IN_PROGRESS"},{label:"Completed",id:"COMPLETED"},{label:"Cancelled",id:"CANCELLED"}]),Z=p(()=>(i.trackingHeaders||[]).map(r=>({id:r.id,label:r.tracking_number}))),w=p(()=>(i.trackingClients||[]).map(r=>({id:r.id,label:r.client_name}))),F=p(()=>e.trackingclient_id?(i.trackingClientStores||[]).filter(r=>r.client_id===e.trackingclient_id).map(r=>({id:r.id,label:r.store_name})):[]),u=r=>r?r.replace(" ","T").slice(0,16):"",e=ue({_token:X.props.csrf_token,id:((y=i.formdata)==null?void 0:y.id)||((V=i.data)==null?void 0:V.id)||null,trackingheader_id:((S=i.formdata)==null?void 0:S.trackingheader_id)||((C=i.data)==null?void 0:C.trackingheader_id)||"",trackingclient_id:((x=i.formdata)==null?void 0:x.trackingclient_id)||((D=i.data)==null?void 0:D.trackingclient_id)||"",trackingclient_store_id:((E=i.formdata)==null?void 0:E.trackingclient_store_id)||((N=i.data)==null?void 0:N.trackingclient_store_id)||"",sqno:((h=i.formdata)==null?void 0:h.sqno)||((q=i.data)==null?void 0:q.sqno)||"",drsino:((T=i.formdata)==null?void 0:T.drsino)||((U=i.data)==null?void 0:U.drsino)||"",store_time_in:u(((I=i.formdata)==null?void 0:I.store_time_in)||((O=i.data)==null?void 0:O.store_time_in)),unloading_start:u(((A=i.formdata)==null?void 0:A.unloading_start)||((P=i.data)==null?void 0:P.unloading_start)),unloading_end:u(((R=i.formdata)==null?void 0:R.unloading_end)||((B=i.data)==null?void 0:B.unloading_end)),store_time_out:u(((L=i.formdata)==null?void 0:L.store_time_out)||((j=i.data)==null?void 0:j.store_time_out)),receiver_name:(($=i.formdata)==null?void 0:$.receiver_name)||((H=i.data)==null?void 0:H.receiver_name)||"",delivery_status:((M=i.formdata)==null?void 0:M.delivery_status)||((G=i.data)==null?void 0:G.delivery_status)||"PENDING"}),g=z([]),v=W;le(()=>i.formdata,r=>{r&&(e.id=r.id||null,e.trackingheader_id=r.trackingheader_id||"",e.trackingclient_id=r.trackingclient_id||"",e.trackingclient_store_id=r.trackingclient_store_id||"",e.sqno=r.sqno||"",e.drsino=r.drsino||"",e.store_time_in=u(r.store_time_in),e.unloading_start=u(r.unloading_start),e.unloading_end=u(r.unloading_end),e.store_time_out=u(r.store_time_out),e.receiver_name=r.receiver_name||"",e.delivery_status=r.delivery_status||"PENDING")},{immediate:!0});const ee=()=>{e.trackingclient_store_id=""},te=async()=>{const r=e.id?route("tracking.droptrip.update",e.id):route("tracking.droptrip.store"),o=e.id?"put":"post";e.transform(t=>({...t,store_time_in:t.store_time_in?t.store_time_in.replace("T"," ")+":00":null,unloading_start:t.unloading_start?t.unloading_start.replace("T"," ")+":00":null,unloading_end:t.unloading_end?t.unloading_end.replace("T"," ")+":00":null,store_time_out:t.store_time_out?t.store_time_out.replace("T"," ")+":00":null})),e.submit(o,r,{preserveScroll:!0,onSuccess:()=>{b.success(`Droptrip ${e.id?"updated":"created"} successfully!`),v("triggerTopRightButton","lists")},onError:t=>{g.value=Object.values(t||{}),b.error("Please check the form for errors")}})},re=()=>{e.reset()};return ae(()=>{console.log("Droptrip manage component mounted")}),(r,o)=>(_(),c(K,null,[l(a(pe),{title:"Droptrip Management"}),l(_e,null,{default:d(()=>[n("div",be,[n("h1",ke,J(k.value==="Add"?"Add New Droptrip":"Droptrip Information"),1),l(f,{onClick:o[0]||(o[0]=t=>v("triggerTopRightButton","lists")),color:"secondary",icon:"mdiArrowLeft",label:"Back",outline:""})]),l(ge,null,{default:d(()=>[n("form",{onSubmit:ne(te,["prevent"])},[n("div",ve,[g.value.length?(_(),c("div",ye,[n("ul",null,[(_(!0),c(K,null,se(g.value,(t,oe)=>(_(),c("li",{key:oe},J(t),1))),128))])])):de("",!0),o[12]||(o[12]=n("div",{class:"col-span-1"},[n("h3",{class:"text-lg font-semibold text-blue-600 dark:text-blue-400 border-b border-gray-200 dark:border-gray-700 pb-2 mb-4"},"Basic Information")],-1)),n("div",Ve,[l(s,{label:"Tracking Header"},{default:d(()=>[l(m,{modelValue:a(e).trackingheader_id,"onUpdate:modelValue":o[1]||(o[1]=t=>a(e).trackingheader_id=t),options:Z.value,type:"select",placeholder:"Select tracking header",required:""},null,8,["modelValue","options"])]),_:1}),l(s,{label:"Client"},{default:d(()=>[l(m,{modelValue:a(e).trackingclient_id,"onUpdate:modelValue":[o[2]||(o[2]=t=>a(e).trackingclient_id=t),ee],options:w.value,type:"select",placeholder:"Select client",required:""},null,8,["modelValue","options"])]),_:1}),l(s,{label:"Client Store"},{default:d(()=>[l(m,{modelValue:a(e).trackingclient_store_id,"onUpdate:modelValue":o[3]||(o[3]=t=>a(e).trackingclient_store_id=t),options:F.value,type:"select",placeholder:"Select client store",required:""},null,8,["modelValue","options"])]),_:1}),l(s,{label:"Sequence Number"},{default:d(()=>[l(m,{modelValue:a(e).sqno,"onUpdate:modelValue":o[4]||(o[4]=t=>a(e).sqno=t),type:"number",placeholder:"Enter sequence number",required:""},null,8,["modelValue"])]),_:1}),l(s,{label:"DRS Number"},{default:d(()=>[l(m,{modelValue:a(e).drsino,"onUpdate:modelValue":o[5]||(o[5]=t=>a(e).drsino=t),placeholder:"Enter DRS number",required:""},null,8,["modelValue"])]),_:1}),l(s,{label:"Receiver Name"},{default:d(()=>[l(m,{modelValue:a(e).receiver_name,"onUpdate:modelValue":o[6]||(o[6]=t=>a(e).receiver_name=t),placeholder:"Enter receiver name"},null,8,["modelValue"])]),_:1})]),o[13]||(o[13]=n("div",{class:"col-span-1 mt-4"},[n("h3",{class:"text-lg font-semibold text-blue-600 dark:text-blue-400 border-b border-gray-200 dark:border-gray-700 pb-2 mb-4"},"Delivery Status")],-1)),n("div",Se,[l(s,{label:"Delivery Status"},{default:d(()=>[l(m,{modelValue:a(e).delivery_status,"onUpdate:modelValue":o[7]||(o[7]=t=>a(e).delivery_status=t),options:Y.value,type:"select",placeholder:"Select delivery status",required:""},null,8,["modelValue","options"])]),_:1})]),o[14]||(o[14]=n("div",{class:"col-span-1 mt-4"},[n("h3",{class:"text-lg font-semibold text-blue-600 dark:text-blue-400 border-b border-gray-200 dark:border-gray-700 pb-2 mb-4"},"Time Information")],-1)),n("div",Ce,[l(s,{label:"Store Time In"},{default:d(()=>[l(m,{modelValue:a(e).store_time_in,"onUpdate:modelValue":o[8]||(o[8]=t=>a(e).store_time_in=t),type:"datetime-local",placeholder:"Select store time in"},null,8,["modelValue"])]),_:1}),l(s,{label:"Unloading Start"},{default:d(()=>[l(m,{modelValue:a(e).unloading_start,"onUpdate:modelValue":o[9]||(o[9]=t=>a(e).unloading_start=t),type:"datetime-local",placeholder:"Select unloading start time"},null,8,["modelValue"])]),_:1}),l(s,{label:"Unloading End"},{default:d(()=>[l(m,{modelValue:a(e).unloading_end,"onUpdate:modelValue":o[10]||(o[10]=t=>a(e).unloading_end=t),type:"datetime-local",placeholder:"Select unloading end time"},null,8,["modelValue"])]),_:1}),l(s,{label:"Store Time Out"},{default:d(()=>[l(m,{modelValue:a(e).store_time_out,"onUpdate:modelValue":o[11]||(o[11]=t=>a(e).store_time_out=t),type:"datetime-local",placeholder:"Select store time out"},null,8,["modelValue"])]),_:1})])]),n("div",xe,[l(f,{onClick:re,color:"info",outline:"",label:"Reset"}),l(f,{type:"submit",color:"info",loading:a(e).processing,label:k.value==="Add"?"Create Droptrip":"Update Droptrip"},null,8,["loading","label"])])],32)]),_:1})]),_:1})],64))}}),St=fe(De,[["__scopeId","data-v-57b2cf17"]]);export{St as default};
