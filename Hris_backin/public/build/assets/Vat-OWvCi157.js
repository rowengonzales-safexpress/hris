import{a as O,u as P,r as L}from"./@inertiajs-DE7H7qLl.js";import{_ as U}from"./CardBox-B8VuaoGy.js";import{_ as j}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import{_ as B}from"./AsideDrawer-DLoyHTrP.js";import{_ as v}from"./FormField-Cnx0pd2b.js";import{_}from"./FormControl-C_nPUmK8.js";import{_ as k}from"./BaseButtons--tE85GFf.js";import{_ as V}from"./BaseButton-YqB03AwT.js";import{a as T}from"./axios-ngrFHoWO.js";import{_ as M}from"./SwalConfirm.vue_vue_type_script_setup_true_lang-DKkGdSL9.js";import{s as R}from"./service-CLgXUwp_.js";import{r as p,b as I,o as z,x as b,y as c,H as o,J as i,C as H,F as C,z as J,L as K,I as n,K as $}from"./@vue-DhfKueGL.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./app-VaUb3FJr.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./@mdi-Ds8bXjTD.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./moment-T1pcntrQ.js";import"./SectionTitleLineWithButton-CvP-kldM.js";import"./BaseIcon-BVVkr6PJ.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";/* empty css                                              */const Y={key:0,class:"mb-3 text-red-600 text-sm"},Je={__name:"Vat",setup(q){const w=p([]),r=p(!1),s=p(!1),S=O(),a=P({_token:S.props.csrf_token,id:null,transaction_name:"FRMS-Vat",transaction_key:"TYPE",identitycode:"",description:"",sortorder:0,trans_value:0,isactive:!0}),f=p([]);let u=R();const y=p(!1),m=p(""),g=I(()=>m.value==="Add"?"Add VAT":m.value==="Edit"?"Edit VAT":"VAT"),E=[{label:"VAT Code",fieldName:"identitycode",type:"link"},{label:"Description",fieldName:"description"},{label:"VAT Value",fieldName:"trans_value"},{label:"Sort Order",fieldName:"sortorder"},{label:"Active",fieldName:"isactive",type:"boolean"}],A=async()=>{var e;r.value=!0;const l=await T.get("/frls/transaction-code/frls-vat");w.value=((e=l==null?void 0:l.data)==null?void 0:e.data)??[],r.value=!1},D=async l=>{var e;m.value="Edit",r.value=!0;try{const t=await T.get(`/frls/transaction-codes/${l.id}`),d=((e=t==null?void 0:t.data)==null?void 0:e.data)||l;a.id=d.id??l.id,a.identitycode=d.identitycode??"",a.description=d.description??l.description??"",a.sortorder=d.sortorder??0,a.trans_value=d.trans_value??l.trans_value??0,a.isactive=!0,s.value=!0}finally{r.value=!1}},x=()=>{m.value="Add",a.id=null,a.identitycode="",a.description="",a.sortorder=0,a.trans_value=0,a.isactive=!0,s.value=!0},F=async()=>{r.value=!0;try{m.value==="Edit"&&a.id?await new Promise((l,e)=>{a.put(`/frls/transaction-codes/${a.id}`,{preserveScroll:!0,onSuccess:()=>{u.success("VAT updated"),l()},onError:t=>{f.value=Object.values(t||{}),u.error("Failed to update VAT"),e(t)}})}):await new Promise((l,e)=>{a.post("/frls/transaction-codes",{preserveScroll:!0,onSuccess:()=>{u.success("VAT created"),l()},onError:t=>{f.value=Object.values(t||{}),u.error("Failed to create VAT"),e(t)}})}),await A(),s.value=!1}finally{r.value=!1}},N=async()=>{if(!a.id){s.value=!1;return}r.value=!0;try{await new Promise((l,e)=>{L.delete(`/frls/transaction-codes/${a.id}`,{preserveScroll:!0,onSuccess:()=>{u.success("VAT deleted"),l()},onError:t=>{f.value=Object.values(t||{}),u.error("Failed to delete VAT"),e(t)}})}),await A(),s.value=!1}finally{r.value=!1}};return z(A),(l,e)=>(c(),b(C,null,[o(U,{class:"flex-1 p-6","has-table":""},{default:i(()=>[o(j,{"table-rows":w.value,"table-header":E,"table-name":"FRMS VAT","searchable-fields":"description,trans_value","is-paginated":!0,onOpenLink:D},{"table-action":i(()=>[o(k,null,{default:i(()=>[o(V,{icon:"mdiFileDocumentPlus",disabled:r.value,color:"info","rounded-full":"",small:"",label:"Add",onClick:x},null,8,["disabled"])]),_:1})]),_:1},8,["table-rows"])]),_:1}),o(B,{title:g.value,"is-open":s.value,onCloseDrawer:e[7]||(e[7]=t=>s.value=!1),class:"shadow-lg shadow-blue-500/50"},{default:i(()=>[f.value.length?(c(),b("div",Y,[(c(!0),b(C,null,J(f.value,(t,d)=>(c(),b("div",{key:d},K(t),1))),128))])):H("",!0),o(v,{label:"VAT Code"},{default:i(()=>[o(_,{modelValue:n(a).identitycode,"onUpdate:modelValue":e[0]||(e[0]=t=>n(a).identitycode=t)},null,8,["modelValue"])]),_:1}),o(v,{label:"Description"},{default:i(()=>[o(_,{modelValue:n(a).description,"onUpdate:modelValue":e[1]||(e[1]=t=>n(a).description=t)},null,8,["modelValue"])]),_:1}),o(v,{label:"Sort Order"},{default:i(()=>[o(_,{modelValue:n(a).sortorder,"onUpdate:modelValue":e[2]||(e[2]=t=>n(a).sortorder=t)},null,8,["modelValue"])]),_:1}),o(v,{label:"VAT Value"},{default:i(()=>[o(_,{modelValue:n(a).trans_value,"onUpdate:modelValue":e[3]||(e[3]=t=>n(a).trans_value=t)},null,8,["modelValue"])]),_:1}),o(k,null,{default:i(()=>[o(V,{icon:"mdiContentSave",disabled:r.value,color:"info","rounded-full":"",small:"",label:"Save",onClick:F},null,8,["disabled"]),m.value==="Edit"?(c(),$(V,{key:0,icon:"mdiDelete",color:"danger","rounded-full":"",small:"",label:"Delete",onClick:e[4]||(e[4]=t=>y.value=!0)})):(c(),$(V,{key:1,icon:"mdiClose",color:"error","rounded-full":"",small:"",label:"Cancel",onClick:e[5]||(e[5]=t=>s.value=!1)}))]),_:1}),o(M,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=t=>y.value=t),type:"warning",title:"Delete Record",text:"Are you sure you want to delete this record?",onConfirm:N},null,8,["modelValue"])]),_:1},8,["title","is-open"])],64))}};export{Je as default};
