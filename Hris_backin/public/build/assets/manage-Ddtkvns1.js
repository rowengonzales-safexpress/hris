import{d as lt,r as k,b as f,w as U,o as at,x as p,y as _,D as t,H as o,J as c,I as r,C as x,F as Ne,z as Le,O as st,_ as it,L as d}from"./@vue-DhfKueGL.js";import{a as ot,u as rt}from"./@inertiajs-DE7H7qLl.js";import{s as nt}from"./service-CLgXUwp_.js";import{_ as g}from"./FormField-Cnx0pd2b.js";import{_ as y}from"./FormControl-C_nPUmK8.js";import{_ as N}from"./BaseButton-YqB03AwT.js";import{_ as $e}from"./BaseIcon-BVVkr6PJ.js";import{_ as dt}from"./SectionTitleLineWithButton-CvP-kldM.js";import{C as ut}from"./ClientSelectionModal-KfDprvJG.js";import{_ as ct}from"./CardBox-B8VuaoGy.js";import{_ as mt,a as D}from"./TabContent.vue_vue_type_script_setup_true_lang-q9K3_bPd.js";import{a as je}from"./axios-ngrFHoWO.js";import{h as pt}from"./moment-T1pcntrQ.js";import{_ as _t}from"./app-VaUb3FJr.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";/* empty css                                              */import"./pinia-DPcN--oA.js";import"./@mdi-Ds8bXjTD.js";import"./mini-toastr-ZJ-XgUIA.js";import"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import"./BaseButtons--tE85GFf.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./Dropdown-5dMGiR8k.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./laravel-vite-plugin-DEL3ZhID.js";const gt={class:"tracking-create p-4"},yt={class:"flex flex-col gap-6"},ft={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vt={class:"md:col-span-1"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bt={class:"md:col-span-2"},kt={class:"flex justify-between items-center mb-4 mt-6"},ht={class:"md:col-span-2"},Vt={key:0,class:"store-table-container"},St={class:"overflow-x-auto"},wt={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},Ct={class:"px-6 py-4"},Dt=["onUpdate:modelValue","max","onInput"],Tt={class:"px-6 py-4"},Et={key:0,class:"flex flex-col items-center"},qt={class:"px-6 py-4"},It={class:"px-6 py-4"},Ut={class:"px-6 py-4"},Nt={key:0,class:"flex flex-col items-center"},Lt={class:"font-semibold text-lg text-green-700"},$t={class:"text-sm text-gray-600 dark:text-gray-400"},jt={class:"px-6 py-4 text-center"},Mt={key:0,class:"package-info bg-gray-50 dark:bg-gray-800 p-3 rounded mt-4"},Ot={class:"grid grid-cols-3 gap-4 text-sm"},Pt={class:"ml-2 font-medium dark:text-white"},At={key:0},Ft={class:"ml-2 font-medium dark:text-white"},Rt={key:1},Bt={class:"ml-2 font-medium dark:text-white"},Ht={key:1,class:"no-customer-selected text-center py-8 border border-gray-200 dark:border-gray-700 rounded-lg"},zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wt={key:0,class:"md:col-span-2"},Yt={class:"driver-info bg-blue-50 dark:bg-blue-900/20 p-3 rounded mt-2"},Gt={class:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm"},Jt={class:"ml-2 font-medium dark:text-gray-200"},Qt={class:"ml-2 font-medium dark:text-gray-200"},Kt={key:0},Xt={class:"ml-2 font-medium dark:text-gray-200"},Zt={key:1},el={class:"ml-2 font-medium dark:text-gray-200"},tl={key:2},ll={class:"ml-2 font-medium dark:text-gray-200"},al={class:"md:col-span-2"},sl={class:"space-y-6"},il={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},ol={class:"ml-2 font-medium dark:text-white"},rl={class:"ml-2 font-medium dark:text-white"},nl={class:"ml-2 font-medium dark:text-white"},dl={class:"ml-2 font-medium dark:text-white"},ul={class:"ml-2 font-medium dark:text-white"},cl={key:0,class:"store-table-container"},ml={class:"overflow-x-auto"},pl={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},_l={class:"px-6 py-4"},gl={class:"px-6 py-4"},yl={class:"px-6 py-4"},fl={key:0,class:"flex flex-col items-center"},vl={class:"px-6 py-4"},xl={key:0,class:"flex flex-col items-center"},bl={class:"font-semibold text-lg text-green-700"},kl={class:"text-sm text-gray-600 dark:text-gray-400"},hl={key:1,class:"no-customer-selected text-center py-8 border border-gray-200 dark:border-gray-700 rounded-lg"},Vl={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},Sl={class:"ml-2 font-medium dark:text-white"},wl={class:"ml-2 font-medium dark:text-white"},Cl={class:"ml-2 font-medium dark:text-white"},Dl={class:"ml-2 font-medium dark:text-white"},Tl={class:"ml-2 font-medium dark:text-white"},El={class:"md:col-span-3"},ql={class:"ml-2 font-medium dark:text-white"},Il=lt({__name:"manage",props:{action:String,data:Object,formdata:Object,errors:Object,clients:Array,trackingTypes:{type:Array,default:()=>[]},trackingStatuses:{type:Array,default:()=>[]}},emits:["triggerTopRightButton"],setup(Me,{emit:Oe}){var P,A,F,R,B,H,z,W,Y,G,J,Q,K,X,Z,ee,te,le,ae,se,ie,oe,re,ne,de,ue,ce,me,pe,_e,ge,ye,fe,ve,xe,be,ke,he,Ve,Se,we,Ce,De,Te,Ee,qe,Ie,Ue;const i=Me,w=nt(),Pe=ot(),L=Oe,T=k(!1),Ae=f(()=>{const s=!!a.tracking_type_id,e=!!a.client_id,l=m.value.length>0;return s&&e&&l}),$=f(()=>(i.clients||[]).map(s=>({id:s.id,label:s.client_name}))),S=k(null);U(S,s=>{s&&typeof s=="object"?a.client_id=s.id:a.client_id=s});const a=rt({_token:Pe.props.csrf_token,id:((P=i.formdata)==null?void 0:P.id)||((A=i.data)==null?void 0:A.id)||null,branch_id:((F=i.formdata)==null?void 0:F.branch_id)||((R=i.data)==null?void 0:R.branch_id)||"",tracking_number:((B=i.formdata)==null?void 0:B.tracking_number)||((H=i.data)==null?void 0:H.tracking_number)||"",reference_number:((z=i.formdata)==null?void 0:z.reference_number)||((W=i.data)==null?void 0:W.reference_number)||"",client_id:((Y=i.formdata)==null?void 0:Y.client_id)||((G=i.data)==null?void 0:G.client_id)||null,tracking_type_id:((J=i.formdata)==null?void 0:J.tracking_type_id)||((Q=i.data)==null?void 0:Q.tracking_type_id)||null,estimated_delivery_date:((K=i.formdata)==null?void 0:K.estimated_delivery_date)||((X=i.data)==null?void 0:X.estimated_delivery_date)||"",actual_delivery_date:((Z=i.formdata)==null?void 0:Z.actual_delivery_date)||((ee=i.data)==null?void 0:ee.actual_delivery_date)||"",current_status_id:((te=i.formdata)==null?void 0:te.current_status_id)||((le=i.data)==null?void 0:le.current_status_id)||null,current_location:((ae=i.formdata)==null?void 0:ae.current_location)||((se=i.data)==null?void 0:se.current_location)||"",priority_level:((ie=i.formdata)==null?void 0:ie.priority_level)||((oe=i.data)==null?void 0:oe.priority_level)||"Medium",total_weight:((re=i.formdata)==null?void 0:re.total_weight)||((ne=i.data)==null?void 0:ne.total_weight)||null,total_volume:((de=i.formdata)==null?void 0:de.total_volume)||((ue=i.data)==null?void 0:ue.total_volume)||null,package_count:((ce=i.formdata)==null?void 0:ce.package_count)||((me=i.data)==null?void 0:me.package_count)||null,special_instructions:((pe=i.formdata)==null?void 0:pe.special_instructions)||((_e=i.data)==null?void 0:_e.special_instructions)||"",driver_id:((ge=i.formdata)==null?void 0:ge.driver_id)||((ye=i.data)==null?void 0:ye.driver_id)||null,helper_name:((fe=i.formdata)==null?void 0:fe.helper_name)||((ve=i.data)==null?void 0:ve.helper_name)||"",call_time:((xe=i.formdata)==null?void 0:xe.call_time)||((be=i.data)==null?void 0:be.call_time)||"",whse_in:((ke=i.formdata)==null?void 0:ke.whse_in)||((he=i.data)==null?void 0:he.whse_in)||"",loading_start:((Ve=i.formdata)==null?void 0:Ve.loading_start)||((Se=i.data)==null?void 0:Se.loading_start)||"",loading_end:((we=i.formdata)==null?void 0:we.loading_end)||((Ce=i.data)==null?void 0:Ce.loading_end)||"",whse_out:((De=i.formdata)==null?void 0:De.whse_out)||((Te=i.data)==null?void 0:Te.whse_out)||"",is_active:((Ee=i.formdata)==null?void 0:Ee.is_active)!==void 0?i.formdata.is_active:((qe=i.data)==null?void 0:qe.is_active)!==void 0?i.data.is_active:!0,customer_id:null,customer_name:"",customer_phone:"",customer_email:"",customer_address:"",droptrips:((Ie=i.formdata)==null?void 0:Ie.droptrips)||((Ue=i.data)==null?void 0:Ue.droptrips)||[]}),Fe=k([]),Re=()=>{if(console.log("openCustomerModal called, form.client_id:",a.client_id),!a.client_id){w.error("Please select a client first");return}console.log("Opening modal with client_id:",a.client_id),q.value=!0},j=k([{id:"Low",label:"Low"},{id:"Medium",label:"Medium"},{id:"High",label:"High"},{id:"Urgent",label:"Urgent"}]),E=f(()=>(i.trackingTypes||[]).map(s=>({id:s.id,label:s.type_name}))),M=f(()=>(i.trackingStatuses||[]).map(s=>({id:s.id,label:s.status_name}))),Be=f(()=>{const s=a.tracking_type_id;let e="";if(s&&typeof s=="object")e=s.label||"";else{const u=E.value.find(n=>n.id===s);e=(u==null?void 0:u.label)||""}const l=e?e.replace(/\s*Tracking\s*$/i,""):"";return l?`${l} Location`:"Current Location"}),He=f(()=>{var e;const s=a.tracking_type_id;return s&&typeof s=="object"?s.label||"":((e=E.value.find(l=>l.id===s))==null?void 0:e.label)||""}),ze=f(()=>{var e;const s=a.current_status_id;return s&&typeof s=="object"?s.label||"":((e=M.value.find(l=>l.id===s))==null?void 0:e.label)||String(s||"")}),We=f(()=>{var e;const s=a.priority_level;return s&&typeof s=="object"?s.label||"":((e=j.value.find(l=>l.id===s))==null?void 0:e.label)||String(s||"")}),Ye=f(()=>{if(S.value&&typeof S.value=="object")return S.value.label;const s=$.value.find(e=>e.id===a.client_id);return(s==null?void 0:s.label)||""}),Ge=f(()=>{const s=h.value;if(s&&typeof s=="object")return s.label||"";const e=C.value.find(l=>(l.value??l.id)===s);return(e==null?void 0:e.text)??(e==null?void 0:e.full_name)??String(s||"")}),Je=f(()=>{const s=a.estimated_delivery_date;if(!s)return"";const e=pt(s);return e.isValid()?e.format("MMMM DD, YYYY"):String(s)}),O=f(()=>{const s=[],e=new Map;return m.value.forEach((l,u)=>{const n=l.city||"Unknown";e.has(n)||e.set(n,[]),e.get(n).push({...l,originalIndex:u})}),e.forEach((l,u)=>{l.forEach((n,v)=>{s.push({...n,cityRowspan:v===0?l.length:0,cityCount:l.length,isFirstInCity:v===0})})}),s}),C=k([]),h=k(null),Qe=f(()=>C.value.map(s=>({id:s.value??s.id,label:s.text??s.full_name}))),m=k([]),q=k(!1),V=k({quantity:null,weight:null,value:null}),Ke=s=>{const e=s.stores.filter(n=>!m.value.some(v=>v.id===n.id)),l=e.map((n,v)=>({...n,sequence:m.value.length+v+1}));m.value=[...m.value,...l];const u=l.map((n,v)=>({trackingclient_id:a.client_id,trackingclient_store_id:n.id,sqno:m.value.length+v+1,drsino:"",store_time_in:"",unloading_start:"",unloading_end:"",store_time_out:"",receiver_name:"",delivery_status:"PENDING"}));if(a.droptrips=[...a.droptrips,...u],m.value.length>0){const n=m.value[0];a.customer_id=n.id,a.customer_name=n.customer_name,a.customer_phone=n.phone||"",a.customer_email=n.email||"",a.customer_address=`${n.address_line1||""} ${n.address_line2||""}`.trim()}if(e.length<s.stores.length){const n=s.stores.length-e.length;w.info(`${n} duplicate store(s) were not added as they already exist in the list.`)}},Xe=(s,e)=>{const l=m.value[s],u=l.sequence;if(e<1||e>m.value.length){l.sequence=u;return}const n=m.value.find((v,I)=>I!==s&&v.sequence===e);n&&(n.sequence=u),l.sequence=e,m.value.sort((v,I)=>v.sequence-I.sequence)},Ze=s=>{m.value=m.value.filter(e=>e.id!==s),a.droptrips=a.droptrips.filter(e=>e.trackingclient_store_id!==s),m.value.forEach((e,l)=>{e.sequence=l+1}),a.droptrips.forEach((e,l)=>{e.sqno=l+1})},b=k({id:null,full_name:"",mobile_no:"",license_no:"",license_type:"",vehicle_name:"",current_vehicle_id:null}),et=async()=>{try{const s=await je.get("/tracking/tracker/api/drivers");console.log("Raw drivers response:",s.data),C.value=s.data.map(e=>({value:e.id,text:e.full_name,id:e.id,full_name:e.full_name,mobile_no:e.mobile_no,license_no:e.license_no,license_type:e.license_type,vehicle_name:e.vehicle_name,current_vehicle_id:e.current_vehicle_id}))}catch(s){console.error("Error loading drivers:",s)}};U(h,s=>{let e=null;s&&typeof s=="object"?e=s.id:e=s;const l=C.value.find(u=>(u.value??u.id)===e);l&&(b.value={id:l.id||e||null,full_name:l.full_name||"",mobile_no:l.mobile_no||"",license_no:l.license_no||"",license_type:l.license_type||"",vehicle_name:l.vehicle_name||"",current_vehicle_id:l.current_vehicle_id||null}),a.driver_id=e});const tt=async()=>{var s,e;T.value=!0;try{const l=a.id?`/tracking/tracker/${a.id}`:"/tracking/tracker",u=a.id?"put":"post";a.client_id&&typeof a.client_id=="object"&&(a.client_id=a.client_id.id),a.priority_level&&typeof a.priority_level=="object"&&(a.priority_level=a.priority_level.id??a.priority_level.label),a.current_status_id&&typeof a.current_status_id=="object"&&(a.current_status_id=a.current_status_id.id??a.current_status_id.label),a.driver_id&&typeof a.driver_id=="object"&&(a.driver_id=a.driver_id.id),a[u](l,{preserveScroll:!0,onSuccess:()=>{w.success(`Tracking Header successfully ${a.id?"updated":"created"}!`),L("triggerTopRightButton","lists")},onError:n=>{Fe.value=Object.values(n||{}),w.error("Please check the form for errors")},onFinish:()=>{T.value=!1}})}catch(l){console.error("Error submitting form:",l),w.error(((e=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:e.message)||"Error submitting form"),T.value=!1}};return U(()=>i.formdata,s=>{s&&(Object.keys(s).forEach(e=>{a.hasOwnProperty(e)&&(a[e]=s[e])}),s.driver_id&&(h.value=s.driver_id,onDriverSelected(s.driver_id)))},{immediate:!0}),at(()=>{et(),a.driver_id&&(h.value=a.driver_id),a.id&&je.get(`/tracking/tracker/api/droptrip-summary/${a.id}`).then(s=>{const e=s.data||[];m.value=e.map((l,u)=>({id:l.store_id,store_name:l.ClientStore,address:l.Address,city:l.city,sequence:l.sqno??u+1})),a.droptrips=e.map((l,u)=>({id:l.id,trackingclient_id:l.trackingclient_id??a.client_id,trackingclient_store_id:l.store_id,sqno:l.sqno??u+1,drsino:"",store_time_in:"",unloading_start:"",unloading_end:"",store_time_out:"",receiver_name:"",delivery_status:"PENDING"}))}).catch(s=>{console.error("Failed loading droptrip summary:",s)})}),(s,e)=>(_(),p("div",gt,[t("div",yt,[o(dt,{icon:"mdiFileDocumentPlus",title:(i.action==="Add"?"Add":"Manage")+" Tracker",main:""},{default:c(()=>[o(N,{onClick:e[0]||(e[0]=l=>L("triggerTopRightButton","lists")),icon:"mdiViewList",label:"Request Lists",color:"contrast","rounded-full":"",small:""})]),_:1},8,["title"]),o(ct,null,{default:c(()=>[o(mt,{onOnComplete:tt,color:"#094899","step-size":"xs","finish-disabled":!Ae.value,"next-disabled":l=>l===0&&!(r(a).tracking_type_id&&r(a).client_id)},{default:c(()=>[o(D,{title:"Tracking Information",icon:"mdiFileDocumentPlus"},{default:c(()=>[t("div",ft,[o(g,{label:"Tracking Number"},{default:c(()=>[o(y,{name:"tracking_number",modelValue:r(a).tracking_number,"onUpdate:modelValue":e[1]||(e[1]=l=>r(a).tracking_number=l),placeholder:"Leave empty for auto-generation"},null,8,["modelValue"])]),_:1}),o(g,{label:"Tracking Type"},{default:c(()=>[o(y,{modelValue:r(a).tracking_type_id,"onUpdate:modelValue":e[2]||(e[2]=l=>r(a).tracking_type_id=l),options:E.value,placeholder:"Select tracking type"},null,8,["modelValue","options"])]),_:1}),o(g,{label:Be.value},{default:c(()=>[o(y,{name:"current_location",modelValue:r(a).current_location,"onUpdate:modelValue":e[3]||(e[3]=l=>r(a).current_location=l),placeholder:"Enter current location"},null,8,["modelValue"])]),_:1},8,["label"]),o(g,{label:"Reference Number"},{default:c(()=>[o(y,{name:"reference_number",modelValue:r(a).reference_number,"onUpdate:modelValue":e[4]||(e[4]=l=>r(a).reference_number=l),placeholder:"Enter reference number"},null,8,["modelValue"])]),_:1}),t("div",vt,[o(g,{label:"Client"},{default:c(()=>[o(y,{options:$.value,modelValue:S.value,"onUpdate:modelValue":e[5]||(e[5]=l=>S.value=l),placeholder:"Select Client"},null,8,["options","modelValue"])]),_:1})])])]),_:1}),o(D,{title:"Stores & Delivery",icon:"mdiFormatListBulleted"},{default:c(()=>[t("div",xt,[t("div",bt,[t("div",kt,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold"},"Store Information",-1)),o(N,{onClick:Re,color:"info",icon:"mdiPlus",small:"",disabled:!r(a).client_id,label:m.value.length>0?"Change Stores":"Select Stores"},null,8,["disabled","label"])])]),t("div",ht,[m.value.length>0?(_(),p("div",Vt,[t("div",St,[t("table",wt,[e[20]||(e[20]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"},"Sequence"),t("th",{scope:"col",class:"px-6 py-3"},"Trip"),t("th",{scope:"col",class:"px-6 py-3"},"Store Name"),t("th",{scope:"col",class:"px-6 py-3"},"Address"),t("th",{scope:"col",class:"px-6 py-3"},"Drop"),t("th",{scope:"col",class:"px-6 py-3 text-center"},"Actions")])],-1)),t("tbody",null,[(_(!0),p(Ne,null,Le(O.value,(l,u)=>(_(),p("tr",{key:u,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",Ct,[st(t("input",{"onUpdate:modelValue":n=>l.sequence=n,type:"number",min:"1",max:m.value.length,onInput:n=>Xe(l.originalIndex,n),class:"w-20 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,40,Dt),[[it,l.sequence,void 0,{number:!0}]])]),t("td",Tt,[l.isFirstInCity?(_(),p("div",Et,[...e[19]||(e[19]=[t("span",{class:"font-semibold text-lg text-yellow-700"},"1",-1),t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"trip",-1)])])):x("",!0)]),t("td",qt,d(l.store_name),1),t("td",It,d(l.address),1),t("td",Ut,[l.isFirstInCity?(_(),p("div",Nt,[t("span",Lt,d(l.cityCount),1),t("span",$t,d(l.cityCount===1?"store":"stores"),1)])):x("",!0)]),t("td",jt,[o(N,{onClick:n=>Ze(l.id),icon:"mdiDelete",color:"danger",small:"",outline:"",label:"Remove"},null,8,["onClick"])])]))),128))])])]),V.value.quantity?(_(),p("div",Mt,[e[24]||(e[24]=t("h5",{class:"font-medium mb-2 dark:text-white"},"Package Information",-1)),t("div",Ot,[t("div",null,[e[21]||(e[21]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Quantity:",-1)),t("span",Pt,d(V.value.quantity),1)]),V.value.weight?(_(),p("div",At,[e[22]||(e[22]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Weight:",-1)),t("span",Ft,d(V.value.weight)+" kg",1)])):x("",!0),V.value.value?(_(),p("div",Rt,[e[23]||(e[23]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Value:",-1)),t("span",Bt,"$"+d(V.value.value),1)])):x("",!0)])])):x("",!0)])):(_(),p("div",Ht,[o($e,{path:"mdiStore",size:"48",class:"text-gray-400 mb-4 mx-auto"}),e[25]||(e[25]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-4"},"No stores selected",-1)),e[26]||(e[26]=t("p",{class:"text-sm text-gray-500 dark:text-gray-500"},'Click "Select Stores" to add stores to this tracking',-1))]))])])]),_:1}),o(D,{title:"Delivery Information",icon:"mdiTruckDelivery"},{default:c(()=>[t("div",zt,[o(g,{label:"Estimated Delivery Date"},{default:c(()=>[o(y,{modelValue:r(a).estimated_delivery_date,"onUpdate:modelValue":e[6]||(e[6]=l=>r(a).estimated_delivery_date=l),placeholder:"Select estimated delivery date",type:"datetime-local"},null,8,["modelValue"])]),_:1}),o(g,{label:"Current Status"},{default:c(()=>[o(y,{modelValue:r(a).current_status_id,"onUpdate:modelValue":e[7]||(e[7]=l=>r(a).current_status_id=l),options:M.value,placeholder:"Select current status"},null,8,["modelValue","options"])]),_:1}),o(g,{label:"Priority Level"},{default:c(()=>[o(y,{modelValue:r(a).priority_level,"onUpdate:modelValue":e[8]||(e[8]=l=>r(a).priority_level=l),options:j.value,placeholder:"Select priority level"},null,8,["modelValue","options"])]),_:1}),o(g,{label:"Assign Driver"},{default:c(()=>[o(y,{modelValue:h.value,"onUpdate:modelValue":e[9]||(e[9]=l=>h.value=l),options:Qe.value,placeholder:"Select driver (optional)"},null,8,["modelValue","options"])]),_:1}),h.value&&b.value.full_name?(_(),p("div",Wt,[t("div",Yt,[e[32]||(e[32]=t("h5",{class:"font-medium mb-2 text-blue-800 dark:text-blue-300"},"Driver Information",-1)),t("div",Gt,[t("div",null,[e[27]||(e[27]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Name:",-1)),t("span",Jt,d(b.value.full_name),1)]),t("div",null,[e[28]||(e[28]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Mobile:",-1)),t("span",Qt,d(b.value.mobile_no),1)]),b.value.license_no?(_(),p("div",Kt,[e[29]||(e[29]=t("span",{class:"text-gray-600 dark:text-gray-400"},"License:",-1)),t("span",Xt,d(b.value.license_no),1)])):x("",!0),b.value.license_type?(_(),p("div",Zt,[e[30]||(e[30]=t("span",{class:"text-gray-600 dark:text-gray-400"},"License Type:",-1)),t("span",el,d(b.value.license_type),1)])):x("",!0),b.value.vehicle_name?(_(),p("div",tl,[e[31]||(e[31]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Vehicle:",-1)),t("span",ll,d(b.value.vehicle_name),1)])):x("",!0)])])])):x("",!0),o(g,{label:"Helper Name"},{default:c(()=>[o(y,{modelValue:r(a).helper_name,"onUpdate:modelValue":e[10]||(e[10]=l=>r(a).helper_name=l),placeholder:"Enter helper name (optional)",type:"text"},null,8,["modelValue"])]),_:1}),e[33]||(e[33]=t("div",{class:"md:col-span-2"},[t("h3",{class:"text-lg font-semibold mb-4 mt-6 dark:text-white"},"Time Tracking")],-1)),o(g,{label:"Call Time"},{default:c(()=>[o(y,{modelValue:r(a).call_time,"onUpdate:modelValue":e[11]||(e[11]=l=>r(a).call_time=l),placeholder:"Select call time",type:"datetime-local"},null,8,["modelValue"])]),_:1}),o(g,{label:"Warehouse In"},{default:c(()=>[o(y,{modelValue:r(a).whse_in,"onUpdate:modelValue":e[12]||(e[12]=l=>r(a).whse_in=l),placeholder:"Select warehouse in time",type:"datetime-local"},null,8,["modelValue"])]),_:1}),o(g,{label:"Loading Start"},{default:c(()=>[o(y,{modelValue:r(a).loading_start,"onUpdate:modelValue":e[13]||(e[13]=l=>r(a).loading_start=l),placeholder:"Select loading start time",type:"datetime-local"},null,8,["modelValue"])]),_:1}),o(g,{label:"Loading End"},{default:c(()=>[o(y,{modelValue:r(a).loading_end,"onUpdate:modelValue":e[14]||(e[14]=l=>r(a).loading_end=l),placeholder:"Select loading end time",type:"datetime-local"},null,8,["modelValue"])]),_:1}),o(g,{label:"Warehouse Out"},{default:c(()=>[o(y,{modelValue:r(a).whse_out,"onUpdate:modelValue":e[15]||(e[15]=l=>r(a).whse_out=l),placeholder:"Select warehouse out time",type:"datetime-local"},null,8,["modelValue"])]),_:1}),t("div",al,[o(g,{label:"Special Instructions"},{default:c(()=>[o(y,{modelValue:r(a).special_instructions,"onUpdate:modelValue":e[16]||(e[16]=l=>r(a).special_instructions=l),placeholder:"Enter special instructions",type:"textarea"},null,8,["modelValue"])]),_:1})])])]),_:1}),o(D,{title:"Review",icon:"mdiEye"},{default:c(()=>[t("div",sl,[t("div",null,[e[39]||(e[39]=t("h3",{class:"text-lg font-semibold mb-4 dark:text-white"},"Tracking Information",-1)),t("div",il,[t("div",null,[e[34]||(e[34]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Tracking Number:",-1)),t("span",ol,d(r(a).tracking_number||"-"),1)]),t("div",null,[e[35]||(e[35]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Tracking Type:",-1)),t("span",rl,d(He.value||"-"),1)]),t("div",null,[e[36]||(e[36]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Current Location:",-1)),t("span",nl,d(r(a).current_location||"-"),1)]),t("div",null,[e[37]||(e[37]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Reference Number:",-1)),t("span",dl,d(r(a).reference_number||"-"),1)]),t("div",null,[e[38]||(e[38]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Client:",-1)),t("span",ul,d(Ye.value||"-"),1)])])]),t("div",null,[e[44]||(e[44]=t("h3",{class:"text-lg font-semibold mb-4 dark:text-white"},"Store & Delivery",-1)),m.value.length>0?(_(),p("div",cl,[t("div",ml,[t("table",pl,[e[41]||(e[41]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"},"Store Name"),t("th",{scope:"col",class:"px-6 py-3"},"Address"),t("th",{scope:"col",class:"px-6 py-3"},"Trip"),t("th",{scope:"col",class:"px-6 py-3"},"Drop")])],-1)),t("tbody",null,[(_(!0),p(Ne,null,Le(O.value,(l,u)=>(_(),p("tr",{key:u,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[t("td",_l,d(l.store_name),1),t("td",gl,d(l.address),1),t("td",yl,[l.isFirstInCity?(_(),p("div",fl,[...e[40]||(e[40]=[t("span",{class:"font-semibold text-lg text-yellow-700"},"1",-1),t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"trip",-1)])])):x("",!0)]),t("td",vl,[l.isFirstInCity?(_(),p("div",xl,[t("span",bl,d(l.cityCount),1),t("span",kl,d(l.cityCount===1?"store":"stores"),1)])):x("",!0)])]))),128))])])])])):(_(),p("div",hl,[o($e,{path:"mdiStore",size:"48",class:"text-gray-400 mb-4 mx-auto"}),e[42]||(e[42]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-4"},"No stores selected",-1)),e[43]||(e[43]=t("p",{class:"text-sm text-gray-500 dark:text-gray-500"},'Click "Select Stores" to add stores to this tracking',-1))]))]),t("div",null,[e[51]||(e[51]=t("h3",{class:"text-lg font-semibold mb-4 dark:text-white"},"Delivery Information",-1)),t("div",Vl,[t("div",null,[e[45]||(e[45]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Estimated Delivery:",-1)),t("span",Sl,d(Je.value||"-"),1)]),t("div",null,[e[46]||(e[46]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Status:",-1)),t("span",wl,d(ze.value||"-"),1)]),t("div",null,[e[47]||(e[47]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Priority:",-1)),t("span",Cl,d(We.value||"-"),1)]),t("div",null,[e[48]||(e[48]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Driver:",-1)),t("span",Dl,d(Ge.value||"-"),1)]),t("div",null,[e[49]||(e[49]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Helper:",-1)),t("span",Tl,d(r(a).helper_name||"-"),1)]),t("div",El,[e[50]||(e[50]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Special Instructions:",-1)),t("span",ql,d(r(a).special_instructions||"-"),1)])])])])]),_:1})]),_:1},8,["finish-disabled","next-disabled"])]),_:1})]),o(ut,{modelValue:q.value,"onUpdate:modelValue":e[17]||(e[17]=l=>q.value=l),"selected-customers":m.value,"package-info":V.value,"client-id":r(a).client_id,onStoresSelected:Ke},null,8,["modelValue","selected-customers","package-info","client-id"])]))}}),qa=_t(Il,[["__scopeId","data-v-4240b3d9"]]);export{qa as default};
