import{T}from"./TrackingLayout-BvqHPuz-.js";import{h as L}from"./@inertiajs-DE7H7qLl.js";import{_ as C}from"./CardBox-B8VuaoGy.js";import{_ as R}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import w from"./Details-EmN6lHft.js";import{_ as I}from"./AsideDrawer-DLoyHTrP.js";import"./moment-T1pcntrQ.js";import{_ as S}from"./app-VaUb3FJr.js";import{r as l,b as c,o as x,x as u,y as s,H as n,I as B,J as p,D as m,K as _,C as A,F as O}from"./@vue-DhfKueGL.js";import"./SessionIdle.vue_vue_type_script_setup_true_lang-0Er72HTu.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./axios-ngrFHoWO.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./FormField-Cnx0pd2b.js";import"./FormControl-C_nPUmK8.js";import"./pinia-DPcN--oA.js";import"./BaseButton-YqB03AwT.js";import"./Footer-D5LPszYR.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./BaseButtons--tE85GFf.js";import"./SectionTitleLineWithButton-CvP-kldM.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./laravel-vite-plugin-DEL3ZhID.js";const P={class:"droptrip-list-container"},q={class:"main-content"},G={key:1,class:"text-gray-500"},$={__name:"List",props:{masterlist:{type:[Array,Object],default:()=>[]}},emits:["triggerTopRightButton"],setup(f,{emit:g}){const o=f,v=g,i=l(!1),a=l(null);l(!1);const b=c(()=>{if(console.log("Raw masterlist:",o.masterlist),!o.masterlist)return console.error("Masterlist is undefined or null"),[];let e=[];if(Array.isArray(o.masterlist)?e=o.masterlist:o.masterlist&&typeof o.masterlist=="object"&&(e=o.masterlist.data||[]),!Array.isArray(e))return console.error("Data is not an array:",e),[];const r=e.map(t=>t?{id:t.id||"",trackingheader_id:t.trackingheader_id||"",trackingclient_id:t.trackingclient_id||"",trackingclient_store_id:t.trackingclient_store_id||"",sqno:t.sqno||"",drsino:t.drsino||"",store_time_in:t.store_time_in||"",unloading_start:t.unloading_start||"",unloading_end:t.unloading_end||"",store_time_out:t.store_time_out||"",receiver_name:t.receiver_name||"",delivery_status:t.delivery_status||"PENDING",created_at:t.created_at||"",tracking_header:t.tracking_header||null,tracking_client:t.tracking_client||null,tracking_client_store:t.tracking_client_store||null}:null).filter(t=>t!==null);return console.log("Transformed data:",r),r}),d=c(()=>b.value),y=e=>{a.value=e,i.value=!0},k=[{label:"DRS No",fieldName:"drsino",type:"link"},{label:"Sequence",fieldName:"sqno"},{label:"Receiver",fieldName:"receiver_name"},{label:"Time In",fieldName:"store_time_in",type:"datetime"},{label:"Time Out",fieldName:"store_time_out",type:"datetime"},{label:"Status",fieldName:"delivery_status",type:"status",enumerable:N},{label:"Created",fieldName:"created_at",type:"datetime"}],N={COMPLETED:"COMPLETED",IN_PROGRESS:"IN PROGRESS",PENDING:"PENDING",CANCELLED:"CANCELLED"},D=e=>{console.log("Saving droptrip:",e),i.value=!1},h=e=>{console.log("Updating droptrip:",e),i.value=!1},E=(e,r)=>{console.log("Triggering top right button:",e,r),i.value=!1,v("triggerTopRightButton",e,r)};return x(()=>{console.log("Droptrip List component mounted")}),(e,r)=>(s(),u(O,null,[n(B(L),{title:"Droptrip Info"}),n(T,null,{default:p(()=>[m("div",P,[m("div",q,[r[2]||(r[2]=m("h1",{class:"text-2xl font-bold mb-4"},"Droptrip List",-1)),n(C,{class:"flex-1 p-6","has-table":""},{default:p(()=>[d.value.length>0?(s(),_(R,{key:0,"table-rows":d.value,"table-header":k,"table-name":"droptrips","searchable-fields":"drsino,sqno,receiver_name,store_time_in,store_time_out,delivery_status,created_at","is-paginated":!0,onOpenLink:y},null,8,["table-rows"])):(s(),u("div",G,"No droptrips found"))]),_:1})]),n(I,{title:"Droptrip Details","is-open":i.value,onCloseDrawer:r[1]||(r[1]=t=>i.value=!1),class:"shadow-lg shadow-blue-500/50"},{default:p(()=>[a.value?(s(),_(w,{key:0,data:a.value,"is-new":a.value.id===0,onClose:r[0]||(r[0]=t=>i.value=!1),onSave:D,onUpdate:h,onTriggerTopRightButton:E},null,8,["data","is-new"])):A("",!0)]),_:1},8,["is-open"])])]),_:1})],64))}},Ut=S($,[["__scopeId","data-v-3b51208b"]]);export{Ut as default};
