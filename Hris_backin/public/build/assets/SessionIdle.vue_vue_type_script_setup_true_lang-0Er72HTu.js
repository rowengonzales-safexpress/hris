import{r as v}from"./@inertiajs-DE7H7qLl.js";import{d as M,r as x,o as I,e as S,x as _,C as k,y as T,D as o,M as p,L as C}from"./@vue-DhfKueGL.js";const E={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-40"},L={class:"bg-white rounded-lg shadow-xl w-full max-w-md p-6"},N={class:"text-sm text-gray-600 mb-4"},B={class:"font-bold"},j=M({__name:"SessionIdle",props:{lifetime:{},warningSeconds:{}},setup(w){const c=w,i=x(!1),s=x(0);let l=null,r=null,n=null;const u=()=>Math.max(1,c.lifetime??15)*60*1e3,m=()=>Math.min(Math.max(5,c.warningSeconds??30),Math.floor(u()/1e3))*1e3,h=e=>{s.value=e,n&&clearInterval(n),n=setInterval(()=>{s.value=Math.max(0,s.value-1),s.value===0&&clearInterval(n)},1e3)},b=()=>{i.value=!0,h(Math.floor(m()/1e3))},g=()=>{d(),v.post(route("logout"),{},{onFinish:()=>v.visit(route("login",{expired:1}))})},d=()=>{l&&clearTimeout(l),r&&clearTimeout(r),n&&clearInterval(n)},a=()=>{i.value=!1,d();const e=u(),t=m();l=setTimeout(b,Math.max(0,e-t)),r=setTimeout(g,e)},f=["mousemove","keydown","click","scroll","touchstart"];I(()=>{f.forEach(e=>window.addEventListener(e,a)),a()}),S(()=>{f.forEach(e=>window.removeEventListener(e,a)),d()});const y=()=>{a()};return(e,t)=>i.value?(T(),_("div",E,[o("div",L,[t[2]||(t[2]=o("div",{class:"text-lg font-semibold text-gray-800 mb-2"},"Session Expiring Soon",-1)),o("div",N,[t[0]||(t[0]=p("Your session will expire in ",-1)),o("span",B,C(s.value),1),t[1]||(t[1]=p(" seconds due to inactivity.",-1))]),o("div",{class:"flex justify-end gap-3"},[o("button",{onClick:g,class:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700"},"Log Out Now"),o("button",{onClick:y,class:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700"},"Stay Signed In")])])])):k("",!0)}});export{j as _};
