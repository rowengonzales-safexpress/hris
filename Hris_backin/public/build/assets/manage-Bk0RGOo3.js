import{r as f,o as O,w as x,x as m,y as a,D as t,H as n,J as v,L as p,N as P,C as k,F as y,z as R,I as i}from"./@vue-DhfKueGL.js";import{_ as U}from"./CardBox-B8VuaoGy.js";import{_ as g}from"./BaseButton-YqB03AwT.js";import{_ as A}from"./FormField-Cnx0pd2b.js";import{_ as V}from"./FormControl-C_nPUmK8.js";import{_ as F}from"./Checkbox-DBVwD7bY.js";import{s as N}from"./service-CLgXUwp_.js";import{a as T,u as j}from"./@inertiajs-DE7H7qLl.js";import{_ as I}from"./app-VaUb3FJr.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./pinia-DPcN--oA.js";import"./axios-ngrFHoWO.js";/* empty css                                              */import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";const L={class:"row"},z={class:"flex md12"},H={class:"p-4"},J={class:"card-title text-secondary mb-4"},q={key:0,class:"mb-4 text-danger"},G={class:"row"},K={class:"flex md6 sm12"},Q={class:"flex md6 sm12"},W={class:"flex md12"},X={class:"permissions-section"},Y={class:"permissions-grid"},Z={key:0,class:"error-message"},w={class:"row"},D={class:"flex"},ee={__name:"manage",props:{action:String,formdata:Object,roles:Array,menus:Array},emits:["triggerTopRightButton"],setup(B,{emit:C}){const l=B,c=C,M=T(),e=j({_token:M.props.csrf_token,id:null,role_id:null,menu_id:null,permissions:[]}),d=f([]),u=N(),S=[{text:"Create",value:"create"},{text:"Read",value:"read"},{text:"Update",value:"update"},{text:"Delete",value:"delete"}],h=f([]),b=f([]);O(()=>{l.roles&&(h.value=l.roles.map(s=>({text:s.name,value:s.id}))),l.menus&&(b.value=l.menus.map(s=>({text:s.name,value:s.id})))}),x(()=>l.formdata,s=>{s&&(e.id=s.id||null,e.role_id=s.role_id||null,e.menu_id=s.menu_id||null,e.permissions=s.permissions||[])},{immediate:!0});const E=()=>{l.action==="Manage"?e.put(route("admin.menu-role.update",e.id),{onSuccess:()=>{u.success("Role menu assignment updated successfully!"),c("triggerTopRightButton","lists")},onError:s=>{d.value=Object.values(s||{}),u.error("Please check the form for errors.")}}):e.post(route("admin.menu-role.store"),{onSuccess:()=>{u.success("Role menu assignment created successfully!"),c("triggerTopRightButton","lists")},onError:s=>{d.value=Object.values(s||{}),u.error("Please check the form for errors.")}})},$=()=>{e.reset(),e.clearErrors()};return x(()=>l.formdata,s=>{s&&(e.id=s.id||null,e.role_id=s.role_id||null,e.menu_id=s.menu_id||null,e.permissions=s.permissions||[])},{deep:!0}),(s,o)=>(a(),m("div",L,[t("div",z,[n(U,null,{default:v(()=>[t("div",H,[t("h1",J,p(l.action==="Add"?"Add Role Menu Assignment":"Edit Role Menu Assignment"),1),t("form",{onSubmit:P(E,["prevent"])},[d.value.length?(a(),m("div",q,[t("ul",null,[(a(!0),m(y,null,R(d.value,(r,_)=>(a(),m("li",{key:_},p(r),1))),128))])])):k("",!0),t("div",G,[t("div",K,[n(A,{label:"Role"},{default:v(()=>[n(V,{modelValue:i(e).role_id,"onUpdate:modelValue":o[0]||(o[0]=r=>i(e).role_id=r),options:h.value,type:"select",placeholder:"Select a role"},null,8,["modelValue","options"])]),_:1})]),t("div",Q,[n(A,{label:"Menu"},{default:v(()=>[n(V,{modelValue:i(e).menu_id,"onUpdate:modelValue":o[1]||(o[1]=r=>i(e).menu_id=r),options:b.value,type:"select",placeholder:"Select a menu"},null,8,["modelValue","options"])]),_:1})]),t("div",W,[t("div",X,[o[4]||(o[4]=t("h4",{class:"mb-3"},"Permissions",-1)),t("div",Y,[(a(),m(y,null,R(S,r=>t("label",{key:r.value,class:"flex items-center gap-2 permission-checkbox"},[n(F,{checked:i(e).permissions,value:r.value,"onUpdate:checked":o[2]||(o[2]=_=>i(e).permissions=_)},null,8,["checked","value"]),t("span",null,p(r.text),1)])),64))]),i(e).errors.permissions?(a(),m("div",Z,p(i(e).errors.permissions),1)):k("",!0)])])]),t("div",w,[t("div",D,[n(g,{type:"button",color:"lightDark",onClick:o[3]||(o[3]=r=>c("triggerTopRightButton","lists")),class:"mr-3",label:"Back"}),n(g,{type:"button",color:"lightDark",onClick:$,class:"mr-3",label:"Reset"}),n(g,{type:"submit",loading:i(e).processing,disabled:i(e).processing,label:l.action==="Add"?"Create Assignment":"Update Assignment"},null,8,["loading","disabled","label"])])])],32)])]),_:1})])]))}},Ge=I(ee,[["__scopeId","data-v-d163ec09"]]);export{Ge as default};
