import{a as I,u as M,h as z}from"./@inertiajs-DE7H7qLl.js";import{T as U}from"./TrackingLayout-BvqHPuz-.js";import{_ as D}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as H}from"./CardBox-B8VuaoGy.js";import{_ as u}from"./FormField-Cnx0pd2b.js";import{_ as c}from"./FormControl-C_nPUmK8.js";import{_ as h}from"./BaseButton-YqB03AwT.js";import{_ as J}from"./Checkbox-DBVwD7bY.js";import{s as W}from"./service-CLgXUwp_.js";import{r as E,b as G,w as v,x as p,y as _,H as l,I as a,J as m,C as K,D as b,F as P,z as Q,L as X}from"./@vue-DhfKueGL.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./axios-ngrFHoWO.js";import"./lodash-es-BU332SBD.js";import"./SessionIdle.vue_vue_type_script_setup_true_lang-0Er72HTu.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./app-VaUb3FJr.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./Footer-D5LPszYR.js";/* empty css                                              */const Y={key:0,class:"mb-4 text-red-600"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},F={class:"mt-6 flex justify-end gap-2"},Ze={__name:"manage",props:{action:String,data:Object,formdata:Object,errors:Object},emits:["triggerTopRightButton"],setup(R,{emit:S}){var k,C,$,A,O,j,T,x,B;const r=R,V=I(),s=(k=V.props.auth)==null?void 0:k.user,g=E(),L=G(()=>{var t;return(t=r.formdata)!=null&&t.id?"Manage":"Add"}),e=M({_token:V.props.csrf_token,id:((C=r.formdata)==null?void 0:C.id)||null,branch_id:(($=r.formdata)==null?void 0:$.branch_id)??(s==null?void 0:s.branch_id)??null,vehicle_code:((A=r.formdata)==null?void 0:A.vehicle_code)||"",plate_no:((O=r.formdata)==null?void 0:O.plate_no)||"",vehicle_type:((j=r.formdata)==null?void 0:j.vehicle_type)||"",current_status:((T=r.formdata)==null?void 0:T.current_status)||"",warehouse_id:((x=r.formdata)==null?void 0:x.warehouse_id)||null,is_active:((B=r.formdata)==null?void 0:B.is_active)!==void 0?r.formdata.is_active:!0}),d=E([]),y=S,n=t=>t===!0||t===1||t==="1"||t==="A"||t==="ACTIVE";e.is_active=n(e.is_active),v(()=>r.formdata,t=>{t&&Object.keys(t).forEach(i=>{Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=i==="is_active"?n(t[i]):t[i])})},{immediate:!0}),v(()=>r.formdata,t=>{t&&(e.id=t.id||null,e.branch_id=t.branch_id??(s==null?void 0:s.branch_id)??null,e.vehicle_code=t.vehicle_code||"",e.plate_no=t.plate_no||"",e.vehicle_type=t.vehicle_type||"",e.current_status=t.current_status||"",e.warehouse_id=t.warehouse_id||null,e.is_active=n(t.is_active))},{immediate:!0});const N=()=>{if(d.value=[],e.branch_id||(e.branch_id=(s==null?void 0:s.branch_id)??null),e.vehicle_code||d.value.push("Vehicle code is required"),e.plate_no||d.value.push("Plate number is required"),e.vehicle_type||d.value.push("Vehicle type is required"),d.value.length>0)return;const t=e.id?`/tracking/vehicle/${e.id}`:"/tracking/vehicle",i=e.id?"put":"post",o=W();e[i](t,{preserveScroll:!0,onSuccess:()=>{o.success(`Vehicle successfully ${e.id?"updated":"created"}!`),y("triggerTopRightButton","lists")},onError:f=>{d.value=Object.values(f||{}),o.error("Failed to save vehicle")}})},q=()=>{e.clearErrors(),e.reset(),g.value&&g.value.resetValidation()};return v(()=>r.formdata,(t,i)=>{if(t!=i&&t)for(let o in t)t.hasOwnProperty(o)&&(e[o]=o==="is_active"?n(t[o]):t[o])}),(t,i)=>(_(),p(P,null,[l(a(z),{title:"Vehicle Management"}),l(U,null,{default:m(()=>[l(D,{icon:"mdiFileDocumentPlus",title:(r.action==="Add"?"Add":"Manage")+" Vehicle",main:""},{default:m(()=>[l(h,{onClick:i[0]||(i[0]=o=>y("triggerTopRightButton","lists")),icon:"mdiViewList",label:"Vehicle Lists",color:"contrast","rounded-full":"",small:""})]),_:1},8,["title"]),l(H,null,{default:m(()=>[d.value.length?(_(),p("div",Y,[b("ul",null,[(_(!0),p(P,null,Q(d.value,(o,f)=>(_(),p("li",{key:f},X(o),1))),128))])])):K("",!0),b("div",Z,[l(u,{label:"Vehicle Code"},{default:m(()=>[l(c,{modelValue:a(e).vehicle_code,"onUpdate:modelValue":i[1]||(i[1]=o=>a(e).vehicle_code=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"Plate Number"},{default:m(()=>[l(c,{modelValue:a(e).plate_no,"onUpdate:modelValue":i[2]||(i[2]=o=>a(e).plate_no=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"Vehicle Type"},{default:m(()=>[l(c,{modelValue:a(e).vehicle_type,"onUpdate:modelValue":i[3]||(i[3]=o=>a(e).vehicle_type=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"Current Status"},{default:m(()=>[l(c,{modelValue:a(e).current_status,"onUpdate:modelValue":i[4]||(i[4]=o=>a(e).current_status=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"Warehouse ID"},{default:m(()=>[l(c,{modelValue:a(e).warehouse_id,"onUpdate:modelValue":i[5]||(i[5]=o=>a(e).warehouse_id=o),type:"number"},null,8,["modelValue"])]),_:1}),l(u,{label:"Active"},{default:m(()=>[l(J,{checked:a(e).is_active,"onUpdate:checked":i[6]||(i[6]=o=>a(e).is_active=o)},null,8,["checked"])]),_:1})]),b("div",F,[l(h,{onClick:q,icon:"mdiRefresh",color:"contrast","rounded-full":"",small:"",label:"Reset"}),l(h,{onClick:N,icon:"mdiContentSave",color:"info","rounded-full":"",small:"",label:L.value==="Add"?"Create Vehicle":"Update Vehicle"},null,8,["label"])])]),_:1})]),_:1})],64))}};export{Ze as default};
