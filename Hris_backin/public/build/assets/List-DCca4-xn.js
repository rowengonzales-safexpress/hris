import{T}from"./TrackingLayout-BvqHPuz-.js";import{a as F,u as S,h as B,r as L}from"./@inertiajs-DE7H7qLl.js";import{_ as P}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as c}from"./BaseButton-YqB03AwT.js";import{_ as D}from"./CardBox-B8VuaoGy.js";import{_ as z}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import{_ as O}from"./AsideDrawer-DLoyHTrP.js";import{_ as d}from"./FormField-Cnx0pd2b.js";import{_ as f}from"./FormControl-C_nPUmK8.js";import{_ as U}from"./BaseButtons--tE85GFf.js";import{_ as j}from"./Checkbox-DBVwD7bY.js";import{_ as v}from"./BaseIcon-BVVkr6PJ.js";import{s as H}from"./service-CLgXUwp_.js";import{r as C,b,x as k,y as r,H as a,I as s,J as o,K as p,F as R}from"./@vue-DhfKueGL.js";import"./SessionIdle.vue_vue_type_script_setup_true_lang-0Er72HTu.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./app-VaUb3FJr.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./es-errors-CFxpeikN.js";import"./axios-ngrFHoWO.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./@mdi-Ds8bXjTD.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./object-inspect-CiOUnV34.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./Footer-D5LPszYR.js";import"./moment-T1pcntrQ.js";/* empty css                                              */const J={key:1,class:"text-gray-500"},Me={__name:"List",props:{masterlist:{type:[Array,Object],default:()=>[]}},emits:["triggerTopRightButton"],setup(g,{emit:K}){const m=g,n=C(!1);C(!1);const h=F(),t=S({_token:h.props.csrf_token,id:null,client_code:"",client_name:"",branch_id:null,is_active:!0}),A=e=>e===!0||e===1||e==="A"||e==="ACTIVE"?"A":e===!1||e===0||e==="I"||e==="INACTIVE"?"I":e,u=b(()=>{var l;return(Array.isArray(m.masterlist)?m.masterlist:((l=m.masterlist)==null?void 0:l.data)??[]).map(i=>({...i,is_active:A((i==null?void 0:i.is_active)??(i==null?void 0:i.status))}))}),y=e=>{t.id=(e==null?void 0:e.id)??null,t.client_code=(e==null?void 0:e.client_code)??"",t.client_name=(e==null?void 0:e.client_name)??"";const l=e==null?void 0:e.is_active;t.is_active=l===!0||l===1||l==="ACTIVE"||l==="A",t.branch_id=(e==null?void 0:e.branch_id)??null,n.value=!0},$=[{label:"Code",fieldName:"client_code",type:"link"},{label:"Name",fieldName:"client_name"},{label:"Status",fieldName:"is_active",type:"slot"},{label:"Created At",fieldName:"created_at",type:"datetime"}],V=b(()=>!!(t.id&&t.id!==0)?"Edit Client":"Add Client"),x=()=>{t.id=null,t.client_code="",t.client_name="",t.is_active=!0,t.branch_id=null,n.value=!0},I=()=>{const e=t.id?`/tracking/client/${t.id}`:"/tracking/client",l=t.id?"put":"post",i=H();t[l](e,{preserveScroll:!0,onSuccess:()=>{i.success(`Client successfully ${t.id?"updated":"created"}!`),n.value=!1,L.visit("/tracking/client")},onError:N=>{const _=Object.values(N||{});_.length?i.error(_[0]):i.error("Failed to save client")},onFinish:()=>{t.reset()}})},E=()=>{n.value=!1,t.reset()};return(e,l)=>(r(),k(R,null,[a(s(B),{title:"Client Info"}),a(T,null,{default:o(()=>[a(P,{icon:"mdiListBox",title:"Clients",main:""},{default:o(()=>[a(c,{onClick:x,icon:"mdiFileDocumentPlus",label:"Add Client",color:"contrast","rounded-full":"",small:""})]),_:1}),a(D,{class:"flex-1 p-6","has-table":""},{default:o(()=>[u.value.length>0?(r(),p(z,{key:0,"table-rows":u.value,"table-header":$,"table-name":"clients","searchable-fields":"client_code,client_name,is_active,created_at","is-paginated":!0,onOpenLink:y},{"row-action":o(i=>[i.slotProp.is_active==="A"||i.slotProp.is_active===!0||i.slotProp.is_active===1?(r(),p(v,{key:0,path:"mdiCheckCircle",class:"text-green-500",size:"20",title:"Active"})):(r(),p(v,{key:1,path:"mdiCloseCircle",class:"text-red-500",size:"20",title:"Inactive"}))]),_:1},8,["table-rows"])):(r(),k("div",J,"Click Add Client button to create your first record"))]),_:1}),a(O,{title:V.value,"is-open":n.value,onCloseDrawer:l[3]||(l[3]=i=>n.value=!1),class:"shadow-lg shadow-blue-500/50"},{default:o(()=>[a(d,{label:"Client Name"},{default:o(()=>[a(f,{modelValue:s(t).client_name,"onUpdate:modelValue":l[0]||(l[0]=i=>s(t).client_name=i)},null,8,["modelValue"])]),_:1}),a(d,{label:"Client Code"},{default:o(()=>[a(f,{modelValue:s(t).client_code,"onUpdate:modelValue":l[1]||(l[1]=i=>s(t).client_code=i)},null,8,["modelValue"])]),_:1}),a(d,{label:"Active"},{default:o(()=>[a(j,{checked:s(t).is_active,"onUpdate:checked":l[2]||(l[2]=i=>s(t).is_active=i)},null,8,["checked"])]),_:1}),a(U,null,{default:o(()=>[a(c,{icon:"mdiContentSave",color:"info","rounded-full":"",small:"",label:"Save",onClick:I}),a(c,{icon:"mdiClose",color:"danger","rounded-full":"",small:"",label:"Cancel",onClick:E})]),_:1})]),_:1},8,["title","is-open"])]),_:1})],64))}};export{Me as default};
