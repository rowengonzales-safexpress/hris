import{x as d,y as i,S as O,M as Z,L as p,C as f,N as z,r as C,w as ee,K as b,J as F,D as y,O as xe,V as Re,U as Ne,d as te,h as W,T as Te,b as R,B as w,Q as Be,W as M,F as x,z as N,X as A,H,I as D,A as J,j as Me}from"./@vue-DhfKueGL.js";import{m as V}from"./moment-T1pcntrQ.js";import{_ as ae}from"./app-VaUb3FJr.js";import{_ as Ve}from"./BaseButtons--tE85GFf.js";import{_ as K}from"./BaseButton-YqB03AwT.js";import{_ as q}from"./FormControl-C_nPUmK8.js";import{b as Fe}from"./@mdi-Ds8bXjTD.js";const Q=["January","February","March","April","May","June","July","August","September","October","November","December"],Oe={I:"Inactive",A:"Active"};let X={};const Y={monthNames(){return Q},setAppConfig(e){X=e},getAppConfig(){return X},getDaysDifference(e,a){let t=a-e;return Math.ceil(t/(1e3*3600*24))},formatDate(e,a){return V(e).format(a)},formatDateToMonthDayYear(e){return V(e).format("MMMM Do YYYY, h:mm:ss a")},formatDateForDisplay(e,a=!1){return a?V(e).format("MMM DD, YYYY"):V(e).format("MM/DD/YYYY")},formatDateToYMD(e){return V(e).format("YYYY-MM-DD")},getYearFromDate(e){return new Date(e).getFullYear()},getCurrentDate(e="yyyy-mm-dd"){return e==="yyyy-mm-dd"?this.formatDateToYMD(new Date):e==="mm/dd/yyyy"?this.formatDateForDisplay(new Date):new Date},gotoElement(e,a="smooth"){document.getElementById(e)&&(document.getElementById(e).scrollIntoView({behavior:a}),document.getElementById(e).focus())},getRoundingNumber(e){let a="1";for(let t=1;t<=e;t++)a+="0";return parseInt(a)},mathRound(e,a=1){if(isNaN(parseFloat(e))||isNaN(parseInt(a)))return NaN;let t=Math.round(parseFloat(e)*this.getRoundingNumber(a))/this.getRoundingNumber(a),g=t,c=Math.floor(t);return c>0&&t-c<.02&&a==2&&(g=c),t-c>.98&&(g=Math.ceil(t)),g},isValidPositiveNumber(e){return e&&parseFloat(e)>=0&&isNaN(e)===!1},isValueWithinMinMax(e,a,t,g=""){if(!e)return!1;let c=!0;return a&&t?a===t?this.mathRound(e,4)!==this.mathRound(a,4)&&(c=!1):(e<a||e>t)&&(c=!1):a?g&&g===">"?c=!(e<=a):g&&g==="≥"?c=!(e<a):e<a&&(c=!1):t&&(g&&g==="<"?c=!(e>=t):g&&g==="≤"?c=!(e>t):e>t&&(c=!1)),c},cleanString(e){return e.replace(/[\s\/]/g,"")},formatDateTimeToPhraseOldSchool(e,a=!1){let t=new Date(e),g=new Intl.DateTimeFormat("en",{year:"numeric"}).format(t),c=new Intl.DateTimeFormat("en",{month:"short"}).format(t),o=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(t),s=new Intl.DateTimeFormat("en",{hour:"2-digit",minute:"2-digit"}).format(t);return a?`${c} ${o}, ${g}`:`${c} ${o}, ${g} ${s}`},formatDateForDisplayOldSchool(e,a=!1){let t=e.toString().length<=10?new Date(e+"T00:00:00"):new Date(e);return a?Q[t.getMonth()]+" "+("0"+t.getDate()).slice(-2)+", "+t.getFullYear():t.getFullYear()+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+("0"+t.getDate()).slice(-2)},formatDateToYMDOldSchool(e){let a=e.toString().length<=10?new Date(e+"T00:00:00"):new Date(e);return a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)},getStatusText(e,a){return a.hasOwnProperty(e)?a[e]:e},getActiveInactiveText(e){return Oe[e]},n2lbr(e){return e.split(`
`).reduce((a,t)=>a.length===0?t:a.concat("<br>",t),[])}},Ie={name:"SortLink",inject:["getCurrentSort","getSortIcon","sortBy"],props:{name:{type:String,required:!0,default:"id"}}},Le=["innerHTML"];function He(e,a,t,g,c,o){return i(),d("a",{href:"#",onClick:a[0]||(a[0]=z(s=>o.sortBy(t.name),["prevent"]))},[O(e.$slots,"default",{},()=>[Z(p(t.name),1)]),O(e.$slots,"icon",{},()=>[o.getCurrentSort()===t.name?(i(),d("span",{key:0,innerHTML:o.getSortIcon()},null,8,Le)):f("",!0)])])}const Ye=ae(Ie,[["render",He]]),_e={class:"checkbox"},G={__name:"TableCheckboxCell",props:{type:{type:String,default:"td"},isChecked:{type:Boolean,default:!1}},emits:["checked"],setup(e,{emit:a}){const t=e,g=a,c=C(t.isChecked);return ee(c,o=>{g("checked",o)}),(o,s)=>(i(),b(Ne(e.type),{class:"lg:w-1"},{default:F(()=>[y("label",_e,[xe(y("input",{"onUpdate:modelValue":s[0]||(s[0]=h=>c.value=h),type:"checkbox"},null,512),[[Re,c.value]]),s[1]||(s[1]=y("span",{class:"check"},null,-1))])]),_:1}))}},Ae=te({name:"BaseLevel",props:{mobile:Boolean,type:{type:String,default:"justify-between"}},render(){const e=[this.type,"items-center"],a=["flex"],t=["block","md:flex"],g=["flex","items-center","justify-center"];return W("div",{class:e.concat(this.mobile?a:t)},this.$slots.default().map((c,o)=>{const s=!this.mobile&&this.$slots.default().length>o+1?g.concat(["mb-6","md:mb-0"]):g;return W("div",{class:s},[c])}))}}),ze={class:"grid grid-cols-1 last:mb-0 mb-6 lg:gap-6 lg:grid-cols-5"},Ke=["for"],Ee={key:1,class:"text-xs text-gray-500 dark:text-slate-400 mt-1"},je={__name:"FormFieldHorizontal",props:{label:{type:String,default:null},labelFor:{type:String,default:null},help:{type:String,default:null}},setup(e){const a=Te(),t=R(()=>{const g=[],c=a.default().length;return c>1&&g.push("grid grid-cols-1 gap-3"),c===2&&g.push("md:grid-cols-2"),g});return(g,c)=>(i(),d("div",ze,[e.label?(i(),d("label",{key:0,for:e.labelFor,class:"block font-bold mb-2 lg:mb-0"},p(e.label),9,Ke)):f("",!0),y("div",{class:w(t.value)},[O(g.$slots,"default")],2),e.help?(i(),d("div",Ee,p(e.help),1)):f("",!0)]))}},$e={components:{BaseButton:K},data(){return{innerValue:0}},props:{modelValue:{type:Number},totalRecords:{type:Number},pageSize:{type:Number},initialPage:{type:Number,default:0},forcePage:{type:Number},clickHandler:{type:Function,default:()=>{}},pageRange:{type:Number,default:3},marginPages:{type:Number,default:1},firstButtonText:{type:String,default:"First"},lastButtonText:{type:String,default:"Last"},prevButtonText:{type:String,default:"Prior"},nextButtonText:{type:String,default:"Next"},breakViewText:{type:String,default:"…"},containerClass:{type:String,default:"pagination"},pageClass:{type:String,default:"page-item"},pageLinkClass:{type:String,default:"page-link"},prevClass:{type:String,default:"page-item"},prevLinkClass:{type:String,default:"page-link"},nextClass:{type:String,default:"page-item"},nextLinkClass:{type:String,default:"page-link"},firstLastButton:{type:Boolean,default:!1},showPageNumbers:{type:Boolean,default:!0}},computed:{currentPage:{get:function(){return this.modelValue||this.innerValue},set:function(e){this.innerValue=e}},pageCount:function(){return Math.ceil(this.totalRecords/this.pageSize)},pages:function(){let e={};if(this.pageCount<=this.pageRange)for(let a=0;a<this.pageCount;a++){let t={index:a,content:a+1,currentPage:a===this.currentPage-1};e[a]=t}else{const a=Math.floor(this.pageRange/2);let t=s=>{let h={index:s,content:s+1,currentPage:s===this.currentPage-1};e[s]=h},g=s=>{let h={disabled:!0,breakView:!0};e[s]=h};for(let s=0;s<this.marginPages;s++)t(s);let c=0;this.currentPage-a>0&&(c=this.currentPage-1-a);let o=c+this.pageRange-1;o>=this.pageCount&&(o=this.pageCount-1,c=o-this.pageRange+1);for(let s=c;s<=o&&s<=this.pageCount;s++)t(s);c>this.marginPages&&g(c-1),o+1<this.pageCount-this.marginPages&&g(o+1);for(let s=this.pageCount-1;s>=this.pageCount-this.marginPages;s--)t(s)}return e},firstPagecurrentPage:function(){return this.currentPage===0},lastPagecurrentPage:function(){return this.currentPage===this.pageCount-1||this.pageCount===0}},methods:{handlePagecurrentPage(e){this.currentPage!==e&&(this.innerValue=e,this.$emit("update:modelValue",e),this.clickHandler(e))},prevPage(){this.currentPage<=0||this.handlePagecurrentPage(this.currentPage-1)},nextPage(){this.currentPage>=this.pageCount||this.handlePagecurrentPage(this.currentPage+1)},selectFirstPage(){this.currentPage<=0||this.handlePagecurrentPage(0)},selectLastPage(){this.currentPage>=this.pageCount||this.handlePagecurrentPage(this.pageCount-1)}},beforeMount(){this.innerValue=this.initialPage},beforeUpdate(){this.forcePage!==void 0&&this.forcePage!==this.currentPage&&(this.currentPage=this.forcePage)},watch:{pageSize(e){this.pageCount<=this.currentPage&&parseInt(e)>0&&this.selectFirstPage()}}};function Ue(e,a,t,g,c,o){const s=Be("BaseButton");return i(),d("div",null,[o.pageCount-1>t.pageRange&&t.firstLastButton?(i(),b(s,{key:0,class:w([[t.prevClass],"mx-1"]),label:t.firstButtonText,color:"whiteDark",small:"",onClick:a[0]||(a[0]=h=>o.selectFirstPage()),onKeyup:a[1]||(a[1]=M(h=>o.selectFirstPage(),["enter"])),disabled:o.firstPagecurrentPage},null,8,["class","label","disabled"])):f("",!0),o.pageCount-1>t.pageRange?(i(),b(s,{key:1,class:w([[t.prevClass],"mx-1"]),label:t.prevButtonText,color:"whiteDark",small:"",onClick:o.prevPage,onKeyup:M(o.prevPage,["enter"]),disabled:o.firstPagecurrentPage},null,8,["class","label","onClick","onKeyup","disabled"])):f("",!0),o.pageCount-1>t.pageRange?(i(),b(s,{key:2,class:w([[t.nextClass],"mx-1"]),label:t.nextButtonText,color:"whiteDark",small:"",onClick:a[2]||(a[2]=h=>o.nextPage()),onKeyup:a[3]||(a[3]=M(h=>o.nextPage(),["enter"])),disabled:o.lastPagecurrentPage},null,8,["class","label","disabled"])):f("",!0),o.pageCount-1>t.pageRange&&t.firstLastButton?(i(),b(s,{key:3,class:w([[t.nextClass],"mx-1"]),label:t.lastButtonText,color:"whiteDark",small:"",onClick:a[4]||(a[4]=h=>o.selectLastPage()),onKeyup:a[5]||(a[5]=M(h=>o.selectLastPage(),["enter"])),disabled:o.lastPagecurrentPage},null,8,["class","label","disabled"])):f("",!0),t.showPageNumbers?(i(!0),d(x,{key:4},N(o.pages,h=>(i(),b(s,{key:h.index,label:h.breakView?t.breakViewText:h.content,color:h.index===o.currentPage?"lightDark":"whiteDark",small:"",onClick:T=>h.breakView?null:o.handlePagecurrentPage(h.index),onKeyup:M(T=>h.breakView?null:o.handlePagecurrentPage(h.index),["enter"]),class:"mx-1",disabled:h.breakView},null,8,["label","color","onClick","onKeyup","disabled"]))),128)):f("",!0)])}const We=ae($e,[["render",Ue]]),Je={class:"flex items-center justify-between"},qe={class:"overflow-x-auto"},Qe=["id"],Xe={key:0},Ge={key:1},Ze=["colspan"],et=["onClick"],tt=["data-label"],at=["innerHTML"],nt={key:1},lt={key:2},rt={key:3},st={key:4},ot={key:5},it=["onClick","innerHTML"],ut={key:7},ct={id:"table-footer",class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},gt={key:0},dt={key:1},ht={key:0},ft={key:0,class:"mr-2"},wt=te({__name:"CoreTable",props:{tableName:{},tableHeader:{},tableRows:{},isDownloadable:{type:Boolean},sortDefaultDir:{},rowsPerPage:{},sortDefaultColumn:{},isPaginated:{type:Boolean},isShowRowCheckbox:{type:Boolean},isRowFocusSelect:{type:Boolean},searchableFields:{},tableClass:{},rowsToDisplayOnOpen:{},rowFocusSelectIdentifier:{},filterFieldStatusLabel:{},filterFieldStatusField:{},showWhenVisible:{type:Boolean},showTotal:{type:Boolean},showPageInfo:{type:Boolean},showDownloadCsv:{type:Boolean},loading:{type:Boolean}},emits:["openLink","htmlClick","rowClick","checkRows"],setup(e,{emit:a}){const t=e,g=C(""),c=C(0),o=C(t.rowsPerPage??10),s=C(t.tableRows);let h=C(t.sortDefaultDir??"asc"),T=C(t.sortDefaultColumn),I=C(t.isPaginated??!1),B=C(t.rowsPerPage??10);const E=R(()=>t.showTotal??!0),ne=R(()=>t.showPageInfo??!0),le=R(()=>t.showDownloadCsv??!0),re=R(()=>c.value+1),_=C(t.rowsToDisplayOnOpen??(t.isPaginated?o.value:s.value.length)),j=R(()=>Math.ceil(s.value.length/o.value)),se=R(()=>t.showWhenVisible?t.tableRows:I.value&&!t.rowsToDisplayOnOpen?ie(s.value):oe());function oe(){return t.sortDefaultColumn&&t.sortDefaultDir&&s.value.sort((l,u)=>{let r=1;return t.sortDefaultDir.toLowerCase()==="desc"&&(r=-1),l[t.sortDefaultColumn]<u[t.sortDefaultColumn]?-1*r:l[t.sortDefaultColumn]>u[t.sortDefaultColumn]?r:0}),s.value.slice(0,_.value)}function ie(l){return l?l.slice(o.value*c.value,o.value*(c.value+1)):[]}const ue=l=>{c.value=l};A("getCurrentSort",ce),A("getSortIcon",ge),A("sortBy",de);function ce(){return T.value}function ge(){return h.value==="asc"?"<small class='text-gray-400'> ▲</small>":"<small class='text-gray-400'> ▼</small>"}function de(l){l===T.value&&(h.value=h.value==="asc"?"desc":"asc"),T.value=l,s.value.sort((u,r)=>{let n=1;return h.value==="desc"&&(n=-1),u[l]<r[l]?-1*n:u[l]>r[l]?n:0})}function he(){let l="",u=[],r=0,n="";t.tableHeader.forEach(function(){u.push(t.tableHeader[r].label),r++}),l+=u.join(","),l+=`
`;for(let P=0;P<s.value.length;P++){u=[],r=0;for(let v=0;v<t.tableHeader.length;v++)n=k(s.value[P],t.tableHeader[v].fieldName).toString(),n=n.replace(/,/g," "),u.push(n),r++;l+=u.join(","),l+=`
`}const m=document.createElement("a");m.href="data:text/csv;charset=utf-8,"+encodeURIComponent(l),m.target="_blank",m.download=(t.tableName?t.tableName:document.title)+".csv",m.click()}function k(l,u,r=""){let n="";if(u){const m=u.split(".");return m.length>1?l[m[0]]&&(n=l[m[0]][m[1]]):n=l[u],n||parseInt(n)===0?n+r:""}return r}function fe(l){if(l.hasOwnProperty("columnRowStyle"))return l.columnRowStyle}function me(l){if(l.hasOwnProperty("columnRowClass"))return l.columnRowClass}function ye(l){if(l.hasOwnProperty("columnRowValueClass"))return l.columnRowValueClass}function pe(l){if(l.hasOwnProperty("columnHeadStyle"))return l.columnHeadStyle}function be(l){if(l.hasOwnProperty("columnHeadClass"))return l.columnHeadClass}function $(){var r;const l=((r=t.searchableFields)==null?void 0:r.split(","))??[],u=n=>{if(!(g.value&&g.value.trim().length!==0&&l.length>0))return!0;let m=!1;for(let P=0;P<l.length;P++){let v=l[P].split(".");if(n.hasOwnProperty(v[0])&&!(v.length>1&&!n[v[0]].hasOwnProperty(v[1]))&&(m=((v.length>1?n[v[0]][v[1]]:n[l[P]])??"").toString().toLowerCase().includes(g.value.toLowerCase()),m))return m}return m};s.value=t.tableRows.filter(u),c.value=0}function ke(){_.value=s.value.length,I.value=!1}const L=a;function ve(l){L("openLink",l)}const Ce=l=>{L("htmlClick",l.target)},we=l=>{L("rowClick",l)},S=C([]),Pe=l=>{let u=!1;for(var r=0;r<S.value.length;r++)if(S.value[r]===l){u=!0;break}return u},De=(l,u)=>{const r=[];return l.forEach(n=>{u(n)||r.push(n)}),r},U=(l,u)=>{u==="all"?S.value=Se(l):l?S.value.push(u):S.value=De(S.value,r=>r===u),L("checkRows",S.value)};function Se(l){const u=[];l&&s.value.forEach(function(n){u.push(n)});const r=document.querySelectorAll('input[type^="checkbox"]');for(const n of Array.from(r))n.checked=l;return u}return ee(()=>t.tableRows,()=>{$()},{deep:!0}),(l,u)=>(i(),d(x,null,[y("div",Je,[e.searchableFields?(i(),b(je,{key:0,class:"print:hidden ml-2"},{default:F(()=>[H(q,{class:"w-64",modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=r=>g.value=r),icon:D(Fe),onChange:$,placeholder:"Search keyword.. "},null,8,["modelValue","icon"])]),_:1})):f("",!0),O(l.$slots,"table-action")]),y("div",qe,[y("table",{id:e.tableName,class:w(e.tableClass)},[y("thead",null,[y("tr",null,[e.isShowRowCheckbox?(i(),b(G,{key:0,"is-checked":s.value.length>0&&s.value.every(r=>S.value.includes(r)),onChecked:u[1]||(u[1]=r=>U(r,"all"))},null,8,["is-checked"])):f("",!0),(i(!0),d(x,null,N(e.tableHeader,(r,n)=>(i(),d("th",{key:n,style:J(pe(r))},[H(Ye,{name:r.fieldName,class:w(be(r))},{default:F(()=>[Z(p(r.label),1)]),_:2},1032,["name","class"])],4))),128))])]),y("tbody",null,[e.loading?(i(!0),d(x,{key:0},N(t.rowsPerPage??5,r=>(i(),d("tr",{key:`skeleton-${r}`,class:"animate-pulse"},[e.isShowRowCheckbox?(i(),d("td",Xe,[...u[4]||(u[4]=[y("div",{class:"h-4 w-4 bg-gray-200 rounded"},null,-1)])])):f("",!0),(i(!0),d(x,null,N(e.tableHeader,(n,m)=>(i(),d("td",{key:m,class:"py-4 px-6"},[...u[5]||(u[5]=[y("div",{class:"h-4 bg-gray-200 rounded w-3/4"},null,-1)])]))),128))]))),128)):s.value.length===0?(i(),d("tr",Ge,[y("td",{colspan:e.tableHeader.length+(e.isShowRowCheckbox?1:0),class:"text-center"},"No records found",8,Ze)])):(i(!0),d(x,{key:2},N(se.value,r=>(i(),d("tr",{key:r.id,class:w(e.isRowFocusSelect?"cursor-pointer":""),onClick:n=>e.isRowFocusSelect?we(r[e.rowFocusSelectIdentifier]):""},[e.isShowRowCheckbox?(i(),b(G,{key:0,"is-checked":Pe(r),onChecked:n=>U(n,r)},null,8,["is-checked","onChecked"])):f("",!0),(i(!0),d(x,null,N(e.tableHeader,(n,m)=>(i(),d("td",{key:m,class:w(["altoff",me(n)]),"data-label":n.label,style:J(fe(n))},[n.hasOwnProperty("type")&&n.type==="html"?(i(),d("span",{key:0,innerHTML:k(r,n.fieldName,n.appendText),onClick:z(Ce,["prevent"])},null,8,at)):n.hasOwnProperty("type")&&n.type==="date"?(i(),d("span",nt,p(D(Y).formatDateForDisplay(k(r,n.fieldName))),1)):n.hasOwnProperty("type")&&n.type==="datetime"?(i(),d("span",lt,p(D(Y).formatDateToMonthDayYear(k(r,n.fieldName))),1)):n.hasOwnProperty("type")&&n.type==="activeinactive"?(i(),d("span",rt,p(D(Y).getActiveInactiveText(k(r,n.fieldName))),1)):n.hasOwnProperty("type")&&n.type==="option"?(i(),d("span",st,p(n.options[k(r,n.fieldName)]),1)):n.hasOwnProperty("type")&&n.type==="status"?(i(),d("span",ot,p(n.hasOwnProperty("enumerable")?D(Y).getStatusText(k(r,n.fieldName),n.enumerable):k(r,n.fieldName)),1)):n.hasOwnProperty("type")&&n.type==="link"?(i(),d("span",{key:6,title:"Click to view",class:"get-started text-blue-500 cursor-pointer hover:text-green-500",onClick:P=>ve(r),innerHTML:k(r,n.fieldName)?k(r,n.fieldName,n.appendText):"_ _"},null,8,it)):n.hasOwnProperty("type")&&n.type==="slot"?(i(),d("div",ut,[O(l.$slots,n.slotName||"row-action",{slotProp:r})])):(i(),d("span",{key:8,class:w(k(r,n.fieldName)?ye(n):"")},p(k(r,n.fieldName,n.appendText)),3))],14,tt))),128))],10,et))),128))])],10,Qe)]),y("div",ct,[H(Ae,null,{default:F(()=>[_.value<s.value.length?(i(),b(Ve,{key:0},{default:F(()=>[E.value?(i(),d("small",gt,"Total : "+p(s.value.length),1)):f("",!0),e.showWhenVisible==!1?(i(),d("div",dt,[s.value.length>o.value?(i(),b(K,{key:0,label:"Show All",color:"lightDark",small:"",onClick:ke})):f("",!0)])):f("",!0),D(I)===!0&&!e.rowsToDisplayOnOpen?(i(),b(We,{key:2,"click-handler":ue,"total-records":s.value.length,"page-size":o.value>0?o.value:15,"container-class":"className",pageRange:5},null,8,["total-records","page-size"])):f("",!0),u[6]||(u[6]=y("small",null,"Page Size",-1)),H(q,{modelValue:D(B),"onUpdate:modelValue":u[2]||(u[2]=r=>Me(B)?B.value=r:B=r),type:"number",min:1,"input-class":"rows-per-page",onChange:u[3]||(u[3]=r=>o.value=D(B))},null,8,["modelValue"])]),_:1})):(i(),d(x,{key:1},[E.value?(i(),d("small",ht,"Total : "+p(s.value.length),1)):f("",!0)],64)),y("div",null,[D(I)===!0&&!e.rowsToDisplayOnOpen&&ne.value?(i(),d("small",ft," Page "+p(re.value)+" of "+p(j.value>0?j.value:1),1)):f("",!0),s.value.length>0&&le.value?(i(),b(K,{key:1,label:"Download CSV",small:"",color:"lightDark",onClick:z(he,["prevent"])})):f("",!0)])]),_:1})])],64))}});export{wt as _};
