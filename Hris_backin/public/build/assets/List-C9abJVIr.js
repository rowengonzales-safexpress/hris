import{A as w}from"./AdminLayout-8Nvj6Q27.js";import{h as B}from"./@inertiajs-DE7H7qLl.js";import x from"./Details-Bd4ONJM4.js";import{_ as D}from"./AsideDrawer-DLoyHTrP.js";import{_ as T}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as $}from"./BaseButton-YqB03AwT.js";import{_ as R}from"./CardBox-B8VuaoGy.js";import{_ as L}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import{_ as z}from"./app-VaUb3FJr.js";import{r as i,b as _,x as b,y as n,H as s,I as F,J as m,D as y,K as v,C as I,F as P}from"./@vue-DhfKueGL.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./axios-ngrFHoWO.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./FormField-Cnx0pd2b.js";import"./FormControl-C_nPUmK8.js";import"./pinia-DPcN--oA.js";import"./Footer-D5LPszYR.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./BaseButtons--tE85GFf.js";import"./moment-T1pcntrQ.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./laravel-vite-plugin-DEL3ZhID.js";const V={class:"store-list-container"},j={class:"main-content"},E={key:1,class:"text-gray-500"},H={__name:"List",props:{masterlist:{type:[Array,Object],default:()=>[]}},emits:["triggerTopRightButton"],setup(g,{emit:h}){const o=g,p=h,r=i(!1),l=i(null);i(!1),_(()=>{if(console.log("Raw masterlist:",o.masterlist),!o.masterlist)return console.error("Masterlist is undefined or null"),[];let t=[];if(Array.isArray(o.masterlist)?t=o.masterlist:o.masterlist&&typeof o.masterlist=="object"&&(t=o.masterlist.data||[]),!Array.isArray(t))return console.error("Data is not an array:",t),[];const a=t.map(e=>{var u,f;if(!e)return null;const c={id:e.id||"",store_code:e.store_code||"",store_name:e.store_name||"",client_name:((u=e.client)==null?void 0:u.client_name)||e.client_name||"",city:e.city||"",phone:e.phone||"",email:e.email||"",address:e.address||"",state_province:e.state_province||"",zip_code:e.zip_code||"",status:e.status||"A",client_id:e.client_id||((f=e.client)==null?void 0:f.id)||"",client:e.client||null};return console.log("Transformed store item:",c),c}).filter(e=>e!==null);return console.log("Final transformed list:",a),a});const k=()=>{r.value=!1,l.value=null},A=()=>{r.value=!1,l.value=null},C=(t,a)=>{r.value=!1,l.value=null,p("triggerTopRightButton",t,a)};i([{key:"store_code",label:"Store Code",sortable:!0},{key:"store_name",label:"Store Name",sortable:!0},{key:"client_name",label:"Client",sortable:!0},{key:"city",label:"City",sortable:!0},{key:"phone",label:"Phone",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1}]);const d=_(()=>{var t;return Array.isArray(o.masterlist)?o.masterlist:((t=o.masterlist)==null?void 0:t.data)??[]}),N=t=>{l.value=t,r.value=!0},S=[{label:"Code",fieldName:"store_code",type:"link"},{label:"Name",fieldName:"store_name"},{label:"Client",fieldName:"client_name"},{label:"City",fieldName:"city"},{label:"Phone",fieldName:"phone"},{label:"Email",fieldName:"email"},{label:"Address",fieldName:"address"},{label:"State",fieldName:"state_province"},{label:"Zip",fieldName:"zip_code"},{label:"Status",fieldName:"status",type:"activeinactive"}];return(t,a)=>(n(),b(P,null,[s(F(B),{title:"Store Management"}),s(w,null,{default:m(()=>[y("div",V,[y("div",j,[s(T,{icon:"mdiListBox",title:"Stores",main:""},{default:m(()=>[s($,{onClick:a[0]||(a[0]=e=>p("triggerTopRightButton","Add")),icon:"mdiFileDocumentPlus",label:"Add Store",color:"contrast","rounded-full":"",small:""})]),_:1}),s(R,{class:"flex-1 p-6","has-table":""},{default:m(()=>[d.value.length>0?(n(),v(L,{key:0,"table-rows":d.value,"table-header":S,"table-name":"stores","searchable-fields":"store_code,store_name,client_name,city,phone,email,address,state_province,zip_code,status","is-paginated":!0,onOpenLink:N},null,8,["table-rows"])):(n(),b("div",E,"Click Add Store button to create your first record"))]),_:1})]),s(D,{title:"Store Details","is-open":r.value,onCloseDrawer:a[2]||(a[2]=e=>r.value=!1),class:"shadow-lg shadow-blue-500/50"},{default:m(()=>[l.value?(n(),v(x,{key:0,data:l.value,"is-new":l.value.id===0,onClose:a[1]||(a[1]=e=>r.value=!1),onSave:k,onUpdate:A,onTriggerTopRightButton:C},null,8,["data","is-new"])):I("",!0)]),_:1},8,["is-open"])])]),_:1})],64))}},He=z(H,[["__scopeId","data-v-7aa97ef7"]]);export{He as default};
