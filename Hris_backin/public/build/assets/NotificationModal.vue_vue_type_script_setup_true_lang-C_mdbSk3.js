import{d as N,b as u,x as o,y as n,D as e,B as g,C as c,L as d,F as b,z as p,M as D}from"./@vue-DhfKueGL.js";const F={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},S={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},B={class:"relative inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},I={class:"absolute top-0 right-0 pt-4 pr-4"},O={class:"sm:flex sm:items-start"},R={class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true"},$={key:0,d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},V={key:1,d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"},H={key:2,d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"},T={key:3,d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"},U={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1"},J={class:"flex items-center justify-between mb-4"},q={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white",id:"modal-title"},E={class:"flex items-center space-x-2"},K={key:0,class:"w-2 h-2 bg-blue-500 rounded-full",title:"Unread"},P={class:"mt-2"},G={class:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed"},Q={key:0,class:"mt-4"},W={key:0,class:"space-y-4"},X={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden"},Y={class:"divide-y divide-gray-200 dark:divide-gray-600"},Z={class:"grid grid-cols-3 gap-4 items-center"},tt={class:"text-sm text-gray-900 dark:text-white"},et={class:"text-sm text-right font-medium text-gray-900 dark:text-white"},st={class:"bg-gray-50 dark:bg-gray-700 px-4 py-3 border-t border-gray-200 dark:border-gray-600"},it={class:"flex justify-between items-center"},ot={class:"text-lg font-bold text-blue-600 dark:text-blue-400"},nt={key:0,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},rt={class:"space-y-2"},at={class:"text-sm text-gray-600 dark:text-gray-400 capitalize"},dt={key:1,class:"text-sm font-medium text-gray-900 dark:text-white"},lt={key:1},ct={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3"},ut={class:"text-xs text-gray-600 dark:text-gray-400 whitespace-pre-wrap"},mt={class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600"},gt={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"},ft={key:0,class:"text-green-600 dark:text-green-400"},xt={key:1,class:"text-blue-600 dark:text-blue-400"},yt={key:1,class:"mt-4"},bt=["href"],pt={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},vt=N({__name:"NotificationModal",props:{notification:{}},emits:["close","mark-as-read","delete"],setup(r,{emit:h}){const l=r,f=h,v=u(()=>{var s;if(!l.notification.data)return!1;const t=l.notification.data;return t.frms_list||t.items||((s=t.form)==null?void 0:s.items)||t.finance_disbursement||Array.isArray(t)&&t.some(i=>i.description&&i.amount)||t.description&&t.amount||t.total_amount!==void 0}),x=u(()=>{var i;if(!l.notification.data)return[];const t=l.notification.data;let s=[];return t.frms_list&&Array.isArray(t.frms_list)?s=t.frms_list:t.items&&Array.isArray(t.items)?s=t.items:(i=t.form)!=null&&i.items&&Array.isArray(t.form.items)?s=t.form.items:Array.isArray(t)?s=t.filter(a=>a.description&&a.amount):t.description&&t.amount&&(s=[t]),s.map(a=>({description:a.description||a.name||"No description",amount:parseFloat(a.amount||0)}))}),k=u(()=>{const t=l.notification.data;return(t==null?void 0:t.total_amount)!==void 0?parseFloat(t.total_amount):x.value.reduce((s,i)=>s+i.amount,0)}),m=u(()=>{if(!l.notification.data)return{};const t=l.notification.data,s=["frms_list","items","description","amount","total_amount"],i={};return Object.keys(t).forEach(a=>{!s.includes(a)&&t[a]!==null&&t[a]!==void 0&&(i[a]=t[a])}),i}),w=()=>{f("mark-as-read",l.notification)},_=()=>{confirm("Are you sure you want to delete this notification?")&&f("delete",l.notification)},C=t=>{const s={success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-600",error:"bg-red-100 text-red-600",info:"bg-blue-100 text-blue-600"};return s[t]||s.info},A=t=>{const s={success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"};return s[t]||s.info},M=t=>new Date(t).toLocaleString(),j=t=>{if(typeof t=="string")try{return JSON.stringify(JSON.parse(t),null,2)}catch{return t}return JSON.stringify(t,null,2)},y=t=>new Intl.NumberFormat("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t),z=t=>t.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()),L=t=>{const s=(t||"").toLowerCase();return{fa:"bg-yellow-100 text-yellow-800","for approved":"bg-yellow-100 text-yellow-800",fd:"bg-purple-100 text-purple-800","for disbursement":"bg-purple-100 text-purple-800",fl:"bg-blue-100 text-blue-800","for liquidation":"bg-blue-100 text-blue-800",a:"bg-green-100 text-green-800",approved:"bg-green-100 text-green-800",c:"bg-gray-100 text-gray-800",closed:"bg-gray-100 text-gray-800",x:"bg-red-100 text-red-800",canceled:"bg-red-100 text-red-800"}[s]||"bg-gray-100 text-gray-800"};return(t,s)=>(n(),o("div",F,[e("div",S,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:s[0]||(s[0]=i=>t.$emit("close"))}),s[11]||(s[11]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",B,[e("div",I,[e("button",{type:"button",class:"bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:s[1]||(s[1]=i=>t.$emit("close"))},[...s[3]||(s[3]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",O,[e("div",{class:g(["mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10",C(r.notification.type)])},[(n(),o("svg",R,[r.notification.type==="success"?(n(),o("path",$)):r.notification.type==="warning"?(n(),o("path",V)):r.notification.type==="error"?(n(),o("path",H)):(n(),o("path",T))]))],2),e("div",U,[e("div",J,[e("h3",q,d(r.notification.title),1),e("div",E,[e("span",{class:g(["px-2 py-1 text-xs font-medium rounded-full",A(r.notification.type)])},d(r.notification.type.charAt(0).toUpperCase()+r.notification.type.slice(1)),3),r.notification.is_read?c("",!0):(n(),o("div",K))])]),e("div",P,[e("p",G,d(r.notification.message),1)]),r.notification.data&&Object.keys(r.notification.data).length>0?(n(),o("div",Q,[v.value?(n(),o("div",W,[s[8]||(s[8]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-3"},"FRMS Request Details:",-1)),e("div",X,[s[6]||(s[6]=e("div",{class:"bg-gray-50 dark:bg-gray-700 px-4 py-3 border-b border-gray-200 dark:border-gray-600"},[e("div",{class:"grid grid-cols-3 gap-4 text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider"},[e("div",null,"Description"),e("div",{class:"text-right"},"Amount"),e("div",{class:"text-right"},"Status")])],-1)),e("div",Y,[(n(!0),o(b,null,p(x.value,(i,a)=>(n(),o("div",{key:a,class:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[e("div",Z,[e("div",tt,d(i.description||"No description"),1),e("div",et," ₱"+d(y(i.amount)),1),s[4]||(s[4]=e("div",{class:"text-right"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}," Active ")],-1))])]))),128))]),e("div",st,[e("div",it,[s[5]||(s[5]=e("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Total Amount:",-1)),e("span",ot," ₱"+d(y(k.value)),1)])])]),m.value&&Object.keys(m.value).length>0?(n(),o("div",nt,[s[7]||(s[7]=e("h5",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 uppercase tracking-wider"},"Additional Information",-1)),e("div",rt,[(n(!0),o(b,null,p(m.value,(i,a)=>(n(),o("div",{key:a,class:"flex justify-between items-center"},[e("span",at,d(z(a))+":",1),a==="new_status"||a==="old_status"?(n(),o("span",{key:0,class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",L(String(i))])},d(i),3)):(n(),o("span",dt,d(i),1))]))),128))])])):c("",!0)])):(n(),o("div",lt,[s[9]||(s[9]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"},"Additional Information:",-1)),e("div",ct,[e("pre",ut,d(j(r.notification.data)),1)])]))])):c("",!0),e("div",mt,[e("div",gt,[e("span",null,d(M(r.notification.created_at)),1),r.notification.is_read?(n(),o("span",ft," ✓ Read ")):(n(),o("span",xt," ● Unread "))])]),r.notification.action_url?(n(),o("div",yt,[e("a",{href:r.notification.action_url,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"},[...s[10]||(s[10]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),D(" View Related Item ",-1)])],8,bt)])):c("",!0)])]),e("div",pt,[r.notification.is_read?c("",!0):(n(),o("button",{key:0,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors",onClick:w}," Mark as Read ")),e("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-red-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-red-700 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:mt-0 sm:w-auto sm:text-sm transition-colors",onClick:_}," Delete "),e("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors",onClick:s[2]||(s[2]=i=>t.$emit("close"))}," Close ")])])])]))}});export{vt as _};
