import{r,b as q,o as Ye,w as V,x as Z,y as G,H as s,J as m,D as d,L as be,N as U,B as Ke,F as Xe}from"./@vue-DhfKueGL.js";import{a as Ze,u as Ge}from"./@inertiajs-DE7H7qLl.js";import{_ as et}from"./CardBox-B8VuaoGy.js";import{_ as y}from"./FormField-Cnx0pd2b.js";import{_ as g}from"./FormControl-C_nPUmK8.js";import{_ as $}from"./BaseButton-YqB03AwT.js";import{_ as tt}from"./SectionTitleLineWithButton-CvP-kldM.js";import{_ as ye}from"./SwalConfirm.vue_vue_type_script_setup_true_lang-DKkGdSL9.js";import{a as z}from"./axios-ngrFHoWO.js";import{_ as at,a as ge}from"./TabContent.vue_vue_type_script_setup_true_lang-q9K3_bPd.js";import{_ as xe}from"./CoreTable.vue_vue_type_style_index_0_lang-D8LkGZdJ.js";import{s as ot}from"./service-CLgXUwp_.js";import{_ as nt}from"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./app-VaUb3FJr.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./@mdi-Ds8bXjTD.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./BaseIcon-BVVkr6PJ.js";import"./Dropdown-5dMGiR8k.js";import"./moment-T1pcntrQ.js";import"./BaseButtons--tE85GFf.js";/* empty css                                              */const lt={class:"mb-4"},it={class:"text-sm text-gray-600 font-semibold"},st={class:"fixed bottom-6 right-6 md:bottom-8 md:right-8 z-50 flex items-center gap-3"},ut={class:"flex gap-2"},rt={class:"p-6"},dt={class:"text-lg font-semibold mb-4"},ct={class:"grid grid-cols-12 gap-4"},pt={class:"col-span-12 md:col-span-6"},mt={class:"col-span-12 md:col-span-6"},vt={class:"col-span-12 md:col-span-6"},_t={class:"col-span-12 md:col-span-6"},ft={class:"col-span-12 md:col-span-6"},bt={class:"col-span-12 md:col-span-6"},yt={class:"col-span-12 md:col-span-6"},gt={class:"col-span-12 md:col-span-6"},xt={class:"col-span-12 md:col-span-6"},Vt={class:"col-span-12 md:col-span-6"},ht={class:"col-span-12"},wt={class:"col-span-12"},qt={key:0,class:"relative"},$t=["src"],Ft={key:1,class:"text-gray-500"},kt={class:"mt-4 flex justify-end gap-2"},$a={__name:"manage",props:{action:String,formdata:Object,forms:Array},emits:["triggerTopRightButton"],setup(Ve,{emit:he}){var le,ie,se,ue,re,de,ce,pe,me,ve,_e,fe;const v=Ve,ee=he,te=Ze();(le=te.props.auth)==null||le.user;const i=Ge({_token:te.props.csrf_token,id:((ie=v.formdata)==null?void 0:ie.id)||null,form_id:((se=v.formdata)==null?void 0:se.form_id)||null,location:((ue=v.formdata)==null?void 0:ue.location)||"",description:((re=v.formdata)==null?void 0:re.description)||"",expected_liquidation:((de=v.formdata)==null?void 0:de.expected_liquidation)||"",ref_num:((ce=v.formdata)==null?void 0:ce.ref_num)||"",debit:((pe=v.formdata)==null?void 0:pe.debit)||"",transaction_type:((me=v.formdata)==null?void 0:me.transaction_type)||"",amount:((ve=v.formdata)==null?void 0:ve.amount)||"",original_receipts:((_e=v.formdata)==null?void 0:_e.original_receipts)||"",frequency:((fe=v.formdata)==null?void 0:fe.frequency)||""}),O=r([]),H=r(null),S=r([]),W=r(null),we=q(()=>(v.forms??[]).map(t=>({id:t.id,label:`${t.frm_no}`})));q(()=>we.value);const j=r(null),J=r(""),F=r(""),E=r(""),k=r(""),D=r(""),x=r([]),Q=r(!1),qe=[{label:"Account Code",fieldName:"account_code_title"},{label:"Frequency",fieldName:"frequency"},{label:"Description",fieldName:"description"},{label:"Qty",fieldName:"qty"},{label:"Unit Price",fieldName:"unit_price"},{label:"Amount",fieldName:"amount"}],_=r([]),$e=[{label:"Description",fieldName:"particulars"},{label:"Actual Ammount",fieldName:"actual_amount"},{label:"Variance",fieldName:"variance"},{label:"OR.",fieldName:"or_no"},{label:"Vat/Non-Vat",fieldName:"vat_non_vat"},{label:"Expense Amount",fieldName:"expense_amount"},{label:"Vatable",fieldName:"vatcode"},{label:"Vat",fieldName:"input_vat"},{label:"Tin",fieldName:"tin"},{label:"Address",fieldName:"address"},{label:"Attach Document",fieldName:"support_document_html",type:"html"},{label:"Reason",fieldName:"reason"},{label:"Action",fieldName:"action",type:"slot"}],c=r([]);let L=ot();const Fe=r([]),h=r(!1),w=r(null),ke=r(null),Y=r(""),f=r(null),De=q(()=>{const t=new Set((c.value??[]).map(e=>e.particulars));return f.value!==null&&c.value[f.value]&&t.delete(c.value[f.value].particulars),(_.value??[]).filter(e=>(e.description||"")&&!t.has(e.description)).map(e=>({id:e.id,label:e.description}))}),o=r({date:new Date().toISOString().slice(0,10),actual_amount:"",variance:"",reason:"",or_no:"",tin:"",vat_non_vat:"",vatcode:"",expense_amount:"",input_vat:"",address:"",support_document:null,support_document_preview_url:null}),I=r(null),B=r(!1),Le=t=>{var a,n;const e=((n=(a=t==null?void 0:t.target)==null?void 0:a.files)==null?void 0:n[0])||null;o.value.support_document_preview_url&&URL.revokeObjectURL(o.value.support_document_preview_url),e&&e.type&&e.type.startsWith("image/")?(o.value.support_document=e,o.value.support_document_preview_url=URL.createObjectURL(e)):(o.value.support_document=null,o.value.support_document_preview_url=null)},Ce=t=>{var a,n;const e=((n=(a=t==null?void 0:t.dataTransfer)==null?void 0:a.files)==null?void 0:n[0])||null;B.value=!1,o.value.support_document_preview_url&&URL.revokeObjectURL(o.value.support_document_preview_url),e&&e.type&&e.type.startsWith("image/")&&(o.value.support_document=e,o.value.support_document_preview_url=URL.createObjectURL(e))},Ae=()=>{var t;(t=I.value)==null||t.click()},Re=()=>{o.value.support_document_preview_url&&URL.revokeObjectURL(o.value.support_document_preview_url),o.value.support_document=null,o.value.support_document_preview_url=null,I.value&&(I.value.value="")},Te=q(()=>(c.value||[]).map(t=>{const e=t.support_document_preview_url?`<div class="flex items-center gap-2"><img src="${t.support_document_preview_url}" alt="" class="h-10 w-10 object-cover rounded"/></div>`:t.support_document_name||"";return{...t,support_document_html:e}})),Ne=q(()=>(c.value||[]).length>0),ae=()=>{const t=parseFloat(Y.value||0),e=parseFloat(o.value.actual_amount||0),a=t-e;o.value.variance=isNaN(a)?"":a.toFixed(2)},oe=t=>{let e=null;t&&typeof t=="object"?e=(_.value||[]).find(a=>a.id==t.id)||(_.value||[]).find(a=>a.description===t.label):t&&(e=(_.value||[]).find(a=>a.id==t),e||(e=(_.value||[]).find(a=>a.description===t))),Y.value=(e==null?void 0:e.amount)??"",ae()},Ue=()=>{var R,T,P;const t=w.value;let e=null;t&&typeof t=="object"?e=(_.value||[]).find(N=>N.id==t.id):t&&(e=(_.value||[]).find(N=>N.id==t));const a=e?e.description:(t==null?void 0:t.label)||t||"",n=e?e.id:(t==null?void 0:t.id)||null,l=o.value.vat_non_vat,u=l&&typeof l=="object"?l.value:l,b=((R=(x.value||[]).find(N=>String(N.value)===String(u)))==null?void 0:R.label)||(typeof l=="string"?l:""),p={id:f.value!==null?((T=c.value[f.value])==null?void 0:T.id)??null:null,actual_amount:parseFloat(o.value.actual_amount||0),particulars:a,expense_amount:parseFloat(o.value.expense_amount||0),variance:o.value.variance||"",reason:o.value.reason||"",or_no:o.value.or_no||"",vat_non_vat:u||"",vatcode:b,input_vat:parseFloat(o.value.input_vat||0),tin:o.value.tin||"",address:o.value.address||"",support_document_name:((P=o.value.support_document)==null?void 0:P.name)||"",support_document:o.value.support_document||null,support_document_preview_url:o.value.support_document_preview_url||null,frmslist_id:n,description:a,amount:parseFloat(o.value.actual_amount||0),ref_num:i.ref_num||""};f.value!==null?(c.value.splice(f.value,1,p),f.value=null,h.value=!1):(c.value=[...c.value,p],w.value=null,ke.value=null,o.value={date:new Date().toISOString().slice(0,10),actual_amount:"",variance:"",reason:"",or_no:"",tin:"",vat_non_vat:"",vatcode:"",expense_amount:"",input_vat:"",address:"",support_document:null,support_document_preview_url:null,ref_num:i.ref_num||""})},Oe=t=>{let e=-1;(t==null?void 0:t.id)!=null&&(e=(c.value||[]).findIndex(p=>p.id==t.id)),e===-1&&(e=(c.value||[]).findIndex(p=>(p.particulars||p.description||"")===(t.particulars||t.description||"")&&(p.or_no||"")===(t.or_no||"")&&parseFloat(p.actual_amount??0)===parseFloat(t.actual_amount??t.amount??0)));const a=e!==-1?c.value[e]:t;f.value=e!==-1?e:0,o.value={date:a.date||new Date().toISOString().slice(0,10),actual_amount:a.actual_amount??"",expense_amount:a.expense_amount??"",vatcode:a.vatcode??"",input_vat:a.input_vat??"",variance:a.variance??"",reason:a.reason??"",or_no:a.or_no??"",tin:a.tin??"",address:a.address??"",support_document:null,support_document_preview_url:a.support_document_preview_url??null,ref_num:a.ref_num||""};const n=(_.value||[]).find(p=>p.description===(a.particulars||a.description));w.value=n?n.id:{id:null,label:a.particulars};const l=a.vat_non_vat,u=a.vatcode||(typeof a.vat_non_vat=="string"?a.vat_non_vat:""),b=(x.value||[]).find(p=>String(p.value)===String(l))||(x.value||[]).find(p=>p.label===u);o.value.vat_non_vat=b?b.value:l??"",oe(w.value),h.value=!0},Se=t=>{var a;const e=c.value.indexOf(t);e!==-1&&((a=c.value[e])!=null&&a.support_document_preview_url&&URL.revokeObjectURL(c.value[e].support_document_preview_url),c.value.splice(e,1),f.value===e&&(f.value=null,h.value=!1))},C=r(!1),A=r(null),je=t=>{A.value=t,C.value=!0},Ee=()=>{A.value&&Se(A.value),C.value=!1,A.value=null},Ie=()=>{C.value=!1,A.value=null},Be=async()=>{try{const t=await z.get("/frls/transaction-codes/frls-types");if(t.data.success&&(O.value=t.data.data.map(e=>({id:e.id,label:e.description})),i.transaction_type)){const e=O.value.find(a=>a.id==i.transaction_type);e&&(H.value=e)}}catch(t){console.error("Error fetching transaction types:",t)}},Me=async()=>{try{const t=await z.get("/frls/transaction-code/frls-frequincy");if(t.data.success&&(S.value=t.data.data.map(e=>({id:e.id,label:e.description})),i.frequency)){const e=S.value.find(a=>a.id==i.frequency);e&&(W.value=e)}}catch(t){console.error("Error fetching frequency types:",t)}},K=async t=>{if(!t){_.value=[],D.value="";return}try{const{data:e}=await z.get("/frls/finance-disbursement/breakdown/"+t);console.log("Breakdown data:",e),_.value=((e==null?void 0:e.items)??[]).map(a=>({id:a.id,account_code_title:a.account_code_title||"",description:a.description||"",frequency:a.frequency||"",qty:a.qty||0,unit_price:a.unit_price||0,amount:a.amount||0})),D.value=(e==null?void 0:e.total_amount)??"",!i.amount&&(e!=null&&e.total_amount)&&(i.amount=e.total_amount)}catch(e){console.error("Error loading breakdown:",e),_.value=[],D.value=""}},Pe=async()=>{Q.value=!0;try{const e=await(await fetch(route("frls.trancsaction-codes.frls-vat"))).json();e.success&&(x.value=e.data.map(a=>({value:a.trans_value,label:a.description})))}catch(t){console.error("Error loading VAT options:",t),L.error("Failed to load VAT options"),x.value=[]}finally{Q.value=!1}},ne=async t=>{if(c.value=[],!!t)try{const{data:e}=await z.get(`/frls/approval/liquidation-details/${t}`),a=(e==null?void 0:e.items)??[];c.value=a.map(n=>{var R,T;const l=Array.isArray(n.documents)&&n.documents.length>0?n.documents[0]:null,u=l?`<a href="${l.file_url}" target="_blank" class="text-blue-600 underline">${l.original_filename}</a>`:"",b=(R=l==null?void 0:l.mime_type)==null?void 0:R.startsWith("image/"),p=(T=(x.value||[]).find(P=>P.value==n.vatcode))==null?void 0:T.label;return{id:n.id??null,actual_amount:parseFloat(n.amount??0),particulars:n.description??"",expense_amount:parseFloat(n.expense_amount??0),variance:n.variance??"",reason:n.reason??"",or_no:n.or_no??"",vat_non_vat:n.vat_non_vat??"",vatcode:p??n.vatcode??"",input_vat:parseFloat(n.input_vat??0),tin:n.tin??"",address:n.address??"",support_document_name:l?l.original_filename:"",support_document:null,support_document_preview_url:b?l.file_url:null,support_document_html:u,frmslist_id:n.frmslist_id??null,description:n.description??"",amount:parseFloat(n.amount??0),ref_num:n.ref_num??""}})}catch(e){console.error("Error loading liquidation details:",e),c.value=[]}},ze=async()=>{var t,e,a;if(i.form_id){const n=(v.forms??[]).find(l=>l.id===i.form_id);if(n){if(j.value={id:n.id,label:`${n.frm_no}`},J.value=`${((t=n.user)==null?void 0:t.first_name)||""} ${((e=n.user)==null?void 0:e.last_name)||""}`.trim(),F.value=((a=n.branch)==null?void 0:a.branch_name)||"",i.location=F.value,n.items&&n.items.length>0){const l=n.items.map(u=>u.description).filter(u=>u).join(", ");E.value=`Fund Request for ${l}`,i.description=l}k.value=(n==null?void 0:n.expectedliquidation_date)||"",i.expected_liquidation=k.value}}},X=()=>{var t;try{const e=parseFloat(o.value.actual_amount)||0,a=o.value.vat_non_vat,n=(a==null?void 0:a.value)??a,l=a&&typeof a=="object"&&a.label?a.label:((t=(x.value||[]).find(p=>p.value==n))==null?void 0:t.label)||(typeof a=="string"?a:"");if(o.value.vatcode=l,e<=0){o.value.expense_amount="0.00";return}if(n==null||n===""){o.value.expense_amount=e.toFixed(2);return}let u;n>0?u=e/n:u=e,o.value.expense_amount=Math.max(0,u).toFixed(2);const b=parseFloat(o.value.expense_amount)||0;o.value.input_vat=Math.max(0,e-b).toFixed(2)}catch{o.value.expense_amount="0.00",o.value.input_vat="0.00"}},He=()=>{var t;((t=o.value.vat_non_vat)==null?void 0:t.value)??o.value.vat_non_vat,X()};q(()=>(c.value||[]).reduce((t,e)=>t+(parseFloat(e.expense_amount)||0),0)),Ye(async()=>{await Be(),await Me(),await ze(),await K(i.form_id||i.id),await Pe(),await ne(i.form_id||i.id)}),V(()=>o.value.actual_amount,t=>{(t||t===0)&&o.value.vat_non_vat&&X()}),V(()=>o.value.vat_non_vat,t=>{t&&(o.value.actual_amount||o.value.actual_amount===0)&&X()},{deep:!0}),V(H,t=>{i.transaction_type=(t==null?void 0:t.id)||""}),V(W,t=>{i.frequency=(t==null?void 0:t.id)||""}),V(()=>v.formdata,async t=>{if(t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);if(t.id&&(i.form_id=t.id,j.value={id:t.id,label:`${t.frm_no}`},await K(t.id)),t.transaction_type&&O.value.length>0){const e=O.value.find(a=>a.id==t.transaction_type);e&&(H.value=e)}if(t.frequency&&S.value.length>0){const e=S.value.find(a=>a.id==t.frequency);e&&(W.value=e)}}}),V(w,t=>{oe(t)}),V(()=>o.value.actual_amount,()=>{ae()}),V(j,async t=>{var e,a,n;if(i.form_id=(t==null?void 0:t.id)||null,t!=null&&t.id){const l=(v.forms??[]).find(u=>u.id===t.id);if(l){if(J.value=`${((e=l.user)==null?void 0:e.first_name)||""} ${((a=l.user)==null?void 0:a.last_name)||""}`.trim(),F.value=((n=l.branch)==null?void 0:n.branch_name)||"",i.location=F.value,l.items&&l.items.length>0){const u=l.items.map(b=>b.description).filter(b=>b).join(", ");E.value=`Fund Request for ${u}`,i.description=u}else E.value="",i.description="";k.value=(l==null?void 0:l.expectedliquidation_date)||"",i.expected_liquidation=k.value,await K(l.id),await ne(l.id)}}else J.value="",F.value="",E.value="",k.value="",i.location="",i.description="",i.expected_liquidation="",D.value="",_.value=[]});const We=async()=>{if((c.value||[]).length===0){L.error("Please add at least one liquidation item");return}M.value=!0},M=r(!1),Je=()=>{var a,n;const t=i.form_id||((a=j.value)==null?void 0:a.id)||((n=v.formdata)==null?void 0:n.id)||null;if(!t){L.error("Please select a form before submitting");return}let e;try{e=new FormData}catch{L.error("Browser does not support file uploads");return}e.append("id",i.id||""),e.append("ref_num",i.ref_num||""),e.append("debit",i.debit||""),e.append("location",i.location||""),e.append("form_id",String(t)),e.append("transaction_type",i.transaction_type||""),e.append("description",i.description||""),e.append("frequency",i.frequency||""),e.append("expected_liquidation",i.expected_liquidation||""),e.append("original_receipts",i.original_receipts||""),e.append("amount",i.amount||""),(c.value||[]).forEach((l,u)=>{l.id!=null&&e.append(`items[${u}][id]`,String(l.id)),e.append(`items[${u}][frmslist_id]`,l.frmslist_id??""),e.append(`items[${u}][description]`,l.description??""),e.append(`items[${u}][or_no]`,l.or_no??""),e.append(`items[${u}][amount]`,l.amount??""),e.append(`items[${u}][variance]`,l.variance??""),e.append(`items[${u}][reason]`,l.reason??""),e.append(`items[${u}][tin]`,l.tin??""),e.append(`items[${u}][address]`,l.address??""),e.append(`items[${u}][vat_non_vat]`,l.vat_non_vat??""),e.append(`items[${u}][vatcode]`,l.vatcode??""),e.append(`items[${u}][expense_amount]`,l.expense_amount??""),e.append(`items[${u}][input_vat]`,l.input_vat??""),l.support_document instanceof File&&e.append(`items[${u}][support_document]`,l.support_document)}),i.transform(()=>e),i.post(route("frls.finance-disbursement.store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{ee("triggerTopRightButton","lists")},onError:l=>{Fe.value=Object.values(l||{}),L.error("Failed to submit form")}})},Qe=()=>{M.value=!1};return(t,e)=>(G(),Z(Xe,null,[s(tt,{icon:"mdiFileDocumentPlus",title:(v.action==="Add"?"Add":"Manage")+" Liquidation Expenses",main:""},{default:m(()=>[s($,{onClick:e[0]||(e[0]=a=>ee("triggerTopRightButton","lists")),icon:"mdiViewList",label:"Disbursement Lists",color:"contrast","rounded-full":"",small:""})]),_:1},8,["title"]),s(et,null,{default:m(()=>[s(at,{onOnComplete:We,color:"#094899","step-size":"xs","finish-disabled":!Ne.value},{default:m(()=>[s(ge,{title:"Breakdown",icon:"mdiFormatListBulleted"},{default:m(()=>[s(xe,{"table-rows":_.value,"table-header":qe,"table-name":"FRMS Breakdown","searchable-fields":"description,account_code_title","is-paginated":!1,"rows-to-display-on-open":999},null,8,["table-rows"]),d("div",lt,[d("div",it,"Total amount: "+be(D.value),1)])]),_:1}),s(ge,{title:"Liquidation list",icon:"mdiReceiptText"},{default:m(()=>[d("div",st,[s($,{onClick:e[1]||(e[1]=a=>h.value=!0),class:"lg:w-12 lg:h-12",icon:"mdiPlus",color:"info","rounded-full":"",small:""})]),s(xe,{"table-rows":Te.value,"table-header":$e,"table-name":"Liquidation Items","is-paginated":!1,"rows-to-display-on-open":999},{"row-action":m(({slotProp:a})=>[d("div",ut,[s($,{icon:"mdiPencil",color:"whiteDark",title:"Edit",onClick:n=>Oe(a)},null,8,["onClick"]),s($,{icon:"mdiDelete",color:"danger",title:"Remove",onClick:n=>je(a)},null,8,["onClick"])])]),_:1},8,["table-rows"])]),_:1})]),_:1},8,["finish-disabled"]),s(ye,{modelValue:M.value,"onUpdate:modelValue":e[2]||(e[2]=a=>M.value=a),type:"warning",title:"Are you sure?",text:"Once submitted, you cannot undo this action!",confirmText:"Submit",cancelText:"Cancel",onConfirm:Je,onCancel:Qe},null,8,["modelValue"]),s(ye,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=a=>C.value=a),type:"warning",title:"Remove item?",text:"This liquidation item will be permanently removed.",confirmText:"Yes, Remove",cancelText:"Cancel",onConfirm:Ee,onCancel:Ie},null,8,["modelValue"]),s(nt,{show:h.value,"max-width":"xl",onClose:e[20]||(e[20]=a=>h.value=!1)},{default:m(()=>[d("div",rt,[d("div",dt,be(f.value!==null?"Edit Liquidation Item":"Add Liquidation Item"),1),d("div",ct,[d("div",pt,[s(y,{label:"Description"},{default:m(()=>[s(g,{options:De.value,modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=a=>w.value=a)},null,8,["options","modelValue"])]),_:1})]),d("div",mt,[s(y,{label:"Actual Amount",help:"Amount requested: "+Y.value},{default:m(()=>[s(g,{modelValue:o.value.actual_amount,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.actual_amount=a),type:"number",step:"0.01"},null,8,["modelValue"])]),_:1},8,["help"])]),d("div",vt,[s(y,{label:"Variance"},{default:m(()=>[s(g,{modelValue:o.value.variance,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.variance=a),type:"number",step:"0.01"},null,8,["modelValue"])]),_:1})]),d("div",_t,[s(y,{label:"OR No."},{default:m(()=>[s(g,{modelValue:o.value.or_no,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.or_no=a)},null,8,["modelValue"])]),_:1})]),d("div",ft,[s(y,{label:"Reference Number"},{default:m(()=>[s(g,{modelValue:o.value.ref_num,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.ref_num=a)},null,8,["modelValue"])]),_:1})]),d("div",bt,[s(y,{label:"VAT/Non-VAT"},{default:m(()=>[s(g,{modelValue:o.value.vat_non_vat,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value.vat_non_vat=a),options:x.value,loading:Q.value,placeholder:"Select VAT type...",onChange:e[10]||(e[10]=a=>He())},null,8,["modelValue","options","loading"])]),_:1})]),d("div",yt,[s(y,{label:"Expense Amount *"},{default:m(()=>[s(g,{modelValue:o.value.expense_amount,"onUpdate:modelValue":e[11]||(e[11]=a=>o.value.expense_amount=a),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0.00",min:"0",required:"",readonly:""},null,8,["modelValue"])]),_:1})]),d("div",gt,[s(y,{label:"Input VAT"},{default:m(()=>[s(g,{modelValue:o.value.input_vat,"onUpdate:modelValue":e[12]||(e[12]=a=>o.value.input_vat=a),modelModifiers:{number:!0},type:"number",step:"0.01",placeholder:"0.00",min:"0",readonly:""},null,8,["modelValue"])]),_:1})]),d("div",xt,[s(y,{label:"TIN"},{default:m(()=>[s(g,{modelValue:o.value.tin,"onUpdate:modelValue":e[13]||(e[13]=a=>o.value.tin=a)},null,8,["modelValue"])]),_:1})]),d("div",Vt,[s(y,{label:"Address"},{default:m(()=>[s(g,{modelValue:o.value.address,"onUpdate:modelValue":e[14]||(e[14]=a=>o.value.address=a)},null,8,["modelValue"])]),_:1})]),d("div",ht,[s(y,{label:"Reason"},{default:m(()=>[s(g,{modelValue:o.value.reason,"onUpdate:modelValue":e[15]||(e[15]=a=>o.value.reason=a)},null,8,["modelValue"])]),_:1})]),d("div",wt,[s(y,{label:"Support Document"},{default:m(()=>[d("input",{ref_key:"fileInput",ref:I,type:"file",accept:"image/*",class:"hidden",onChange:Le},null,544),d("div",{class:Ke(["border-2 border-dashed rounded-lg p-4 flex items-center justify-center cursor-pointer",B.value?"border-blue-500 bg-blue-50":"border-gray-300"]),onClick:Ae,onDragenter:e[16]||(e[16]=U(a=>B.value=!0,["prevent"])),onDragover:e[17]||(e[17]=U(()=>{},["prevent"])),onDragleave:e[18]||(e[18]=U(a=>B.value=!1,["prevent"])),onDrop:U(Ce,["prevent"])},[o.value.support_document_preview_url?(G(),Z("div",qt,[d("img",{src:o.value.support_document_preview_url,alt:"",class:"h-28 w-28 object-cover rounded"},null,8,$t),d("button",{type:"button",class:"absolute top-1 right-1 bg-red-500 text-white rounded-full h-6 w-6 flex items-center justify-center text-xs",onClick:U(Re,["stop"])},"âœ•")])):(G(),Z("div",Ft," Drag & drop image here or click to browse "))],34)]),_:1})])]),d("div",kt,[s($,{color:"contrast",label:"Cancel",onClick:e[19]||(e[19]=a=>h.value=!1)}),s($,{color:"info",label:f.value!==null?"Edit":"Add",onClick:Ue},null,8,["label"])])])]),_:1},8,["show"])]),_:1})],64))}};export{$a as default};
