import{d as E,r as n,b as V,K as C,y as r,J as F,D as e,C as c,x as o,L as i,B as u,O as M,P as A,F as L,z,N}from"./@vue-DhfKueGL.js";import{r as v}from"./@inertiajs-DE7H7qLl.js";import{A as U}from"./AdminLayout-8Nvj6Q27.js";import{_ as I}from"./NotificationModal.vue_vue_type_script_setup_true_lang-C_mdbSk3.js";import{a as h}from"./axios-ngrFHoWO.js";import"./qs-DlAKVIfT.js";import"./side-channel-CCwe-Ttv.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-CiOUnV34.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./side-channel-list-BCqwI4KF.js";import"./side-channel-map-Bo135rTK.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-DvnJlOn0.js";import"./lodash-es-BU332SBD.js";import"./AdminPanelNavbar-Bdvrohd_.js";import"./BaseIcon-BVVkr6PJ.js";import"./@mdi-Ds8bXjTD.js";import"./app-VaUb3FJr.js";import"./jspdf-aMcTLUx4.js";import"./@babel-Dehwj3G0.js";import"./fflate-XZmX483V.js";import"./fast-png-CUrN0NP5.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-B9FS3IR_.js";import"./lodash-B2PBWGQw.js";import"./pinia-DPcN--oA.js";import"./laravel-vite-plugin-DEL3ZhID.js";import"./html2pdf.js-p1DVm4cu.js";import"./html2canvas-CBrSDip1.js";import"./Dropdown-5dMGiR8k.js";import"./DropdownLink-Bo-pNtpR.js";import"./Modal.vue_vue_type_script_setup_true_lang-DpTllPHL.js";import"./FormField-Cnx0pd2b.js";import"./FormControl-C_nPUmK8.js";import"./BaseButton-YqB03AwT.js";import"./Footer-D5LPszYR.js";const O={class:"max-w-7xl mx-auto"},P={class:"mb-6"},J={class:"flex items-center justify-between"},K={class:"flex items-center space-x-3"},W=["disabled"],Z={key:0},q={key:1},G=["disabled"],Q={class:"mb-6 flex flex-wrap items-center gap-4"},X={class:"flex items-center space-x-2"},Y={class:"flex items-center space-x-2"},ee={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},te={key:0,class:"p-8 text-center"},se={key:1,class:"p-8 text-center"},ae={key:2,class:"divide-y divide-gray-200 dark:divide-gray-700"},re=["onClick"],oe={class:"flex items-start space-x-4"},le={class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},ie={key:0,d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},ne={key:1,d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"},de={key:2,d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"},ce={key:3,d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"},ue={class:"flex-1 min-w-0"},pe={class:"flex items-center justify-between"},me={class:"text-sm font-medium text-gray-900 dark:text-white"},xe={class:"flex items-center space-x-2"},ge={key:0,class:"w-2 h-2 bg-blue-500 rounded-full"},ve={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},ye={class:"flex items-center justify-between mt-3"},fe={class:"text-xs text-gray-500 dark:text-gray-400"},he={class:"flex items-center space-x-2"},be=["onClick"],_e=["onClick"],ke={key:3,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700"},we={class:"flex items-center justify-between"},Ce={class:"text-sm text-gray-700 dark:text-gray-300"},Me={class:"flex items-center space-x-2"},Ae=["onClick","disabled","innerHTML"],_t=E({__name:"Index",props:{notifications:{}},setup(B){const l=n(B.notifications),p=n(null),d=n(!1),m=n(!1),x=n("all"),g=n(""),b=V(()=>l.value.data.filter(s=>!s.is_read).length),H=async()=>{d.value=!0;try{v.reload({only:["notifications"]})}finally{d.value=!1}},$=async()=>{m.value=!0;try{await h.patch("/admin/notifications/mark-all-as-read"),l.value.data.forEach(s=>s.is_read=!0)}catch(s){console.error("Error marking all as read:",s)}finally{m.value=!1}},y=async s=>{if(!s.is_read)try{await h.patch(`/admin/notifications/${s.id}/mark-as-read`),s.is_read=!0}catch(t){console.error("Error marking as read:",t)}},_=async s=>{if(confirm("Are you sure you want to delete this notification?"))try{await h.delete(`/admin/notifications/${s.id}`);const t=l.value.data.findIndex(a=>a.id===s.id);t>-1&&l.value.data.splice(t,1),k()}catch(t){console.error("Error deleting notification:",t)}},j=async s=>{s.is_read||await y(s),s.action_url?v.visit(s.action_url):p.value=s},k=()=>{p.value=null},w=()=>{const s=new URLSearchParams;s.append("app_id","1"),x.value!=="all"&&s.append("filter",x.value),g.value&&s.append("type",g.value);const t=`/admin/notifications?${s.toString()}`;v.visit(t)},D=s=>{s&&v.visit(s)},R=s=>{const t={success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-600",error:"bg-red-100 text-red-600",info:"bg-blue-100 text-blue-600"};return t[s]||t.info},S=s=>{const t={success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"};return t[s]||t.info},T=s=>new Date(s).toLocaleString();return(s,t)=>(r(),C(U,null,{default:F(()=>[e("div",O,[e("div",P,[e("div",J,[t[3]||(t[3]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Admin Notifications"),e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"}," Manage your admin notifications and stay updated ")],-1)),e("div",K,[b.value>0?(r(),o("button",{key:0,onClick:$,disabled:m.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[m.value?(r(),o("span",Z,"Marking...")):(r(),o("span",q,"Mark All Read ("+i(b.value)+")",1))],8,W)):c("",!0),e("button",{onClick:H,disabled:d.value,class:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"},[(r(),o("svg",{class:u(["w-5 h-5",{"animate-spin":d.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[2]||(t[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],8,G)])])]),e("div",Q,[e("div",X,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Filter:",-1)),M(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>x.value=a),onChange:w,class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[4]||(t[4]=[e("option",{value:"all"},"All Notifications",-1),e("option",{value:"unread"},"Unread Only",-1),e("option",{value:"read"},"Read Only",-1)])],544),[[A,x.value]])]),e("div",Y,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Type:",-1)),M(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>g.value=a),onChange:w,class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[6]||(t[6]=[e("option",{value:""},"All Types",-1),e("option",{value:"info"},"Info",-1),e("option",{value:"success"},"Success",-1),e("option",{value:"warning"},"Warning",-1),e("option",{value:"error"},"Error",-1)])],544),[[A,g.value]])])]),e("div",ee,[d.value&&l.value.data.length===0?(r(),o("div",te,[...t[8]||(t[8]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"Loading notifications...",-1)])])):l.value.data.length===0?(r(),o("div",se,[...t[9]||(t[9]=[e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5zM10.5 3.75a6 6 0 0 1 6 6v2.25a2.25 2.25 0 0 0 2.25 2.25H21a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h2.25A2.25 2.25 0 0 0 7.5 12V9.75a6 6 0 0 1 6-6Z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"No notifications yet",-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"Admin notifications will appear here when they arrive",-1)])])):(r(),o("div",ae,[(r(!0),o(L,null,z(l.value.data,a=>(r(),o("div",{key:a.id,class:u(["p-6 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",a.is_read?"":"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500"]),onClick:f=>j(a)},[e("div",oe,[e("div",{class:u(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",R(a.type)])},[(r(),o("svg",le,[a.type==="success"?(r(),o("path",ie)):a.type==="warning"?(r(),o("path",ne)):a.type==="error"?(r(),o("path",de)):(r(),o("path",ce))]))],2),e("div",ue,[e("div",pe,[e("h3",me,i(a.title),1),e("div",xe,[e("span",{class:u(["px-2 py-1 text-xs font-medium rounded-full",S(a.type)])},i(a.type.charAt(0).toUpperCase()+a.type.slice(1)),3),a.is_read?c("",!0):(r(),o("div",ge))])]),e("p",ve,i(a.message),1),e("div",ye,[e("p",fe,i(T(a.created_at)),1),e("div",he,[a.is_read?c("",!0):(r(),o("button",{key:0,onClick:N(f=>y(a),["stop"]),class:"text-xs text-blue-600 hover:text-blue-800 font-medium"}," Mark as read ",8,be)),e("button",{onClick:N(f=>_(a),["stop"]),class:"text-xs text-red-600 hover:text-red-800 font-medium"}," Delete ",8,_e)])])])])],10,re))),128))])),l.value.data.length>0?(r(),o("div",ke,[e("div",we,[e("div",Ce," Showing "+i(l.value.from)+" to "+i(l.value.to)+" of "+i(l.value.total)+" notifications ",1),e("div",Me,[(r(!0),o(L,null,z(l.value.links,a=>(r(),o("button",{key:a.label,onClick:f=>D(a.url),disabled:!a.url,class:u(["px-3 py-2 text-sm rounded-lg transition-colors",a.active?"bg-blue-600 text-white":a.url?"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600":"text-gray-400 cursor-not-allowed"]),innerHTML:a.label},null,10,Ae))),128))])])])):c("",!0)])]),p.value?(r(),C(I,{key:0,notification:p.value,onClose:k,onMarkAsRead:y,onDelete:_},null,8,["notification"])):c("",!0)]),_:1}))}});export{_t as default};
